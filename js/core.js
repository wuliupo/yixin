(function(){window.NEJ=window.NEJ||{};NEJ.O={};NEJ.R=[];NEJ.F=function(){return!1};NEJ.P=function(_namespace){if(!_namespace||!_namespace.length)return null;var _package=window;for(var a=_namespace.split("."),l=a.length,i=a[0]=="window"?1:0;i<l;_package=_package[a[i]]=_package[a[i]]||{},i++);return _package};NEJ.Q=function(_context,_namespace){_context=_context||NEJ.O;var _arr=_namespace.split(".");for(var i=0,l=_arr.length;i<l;i++){_context=_context[_arr[i]];if(!_context)break}return _context};NEJ.C=function(){var _isNotFunction=function(){return NEJ.O.toString.call(arguments[0])!="[object Function]"};var _getMethodName=function(_value,_map){for(var x in _map)if(_value==_map[x])return x;return null};var _mmap={__init:0,__reset:1,__destroy:2,__initNode:3,__doBuild:4,__onShow:5,__onHide:6,__onRefresh:7},_umap={__supInit:0,__supReset:1,__supDestroy:2,__supInitNode:3,__supDoBuild:4,__supOnShow:5,__supOnHide:6,__supOnRefresh:7};return function(){var _class=function(){this.__cp__();return this.__init.apply(this,arguments)};_class.prototype.__cp__=NEJ.F;_class.prototype.__init=NEJ.F;_class._$extend=function(_super,_static){if(_isNotFunction(_super))return;if(_static==null||!!_static)NEJ.X(this,_super,_isNotFunction);this._$super=_super;this._$supro=_super.prototype;var _parent=function(){};_parent.prototype=_super.prototype;this.prototype=new _parent;var _prototype=this.prototype;_prototype.constructor=this;var _tmp;for(var x in _mmap){_tmp=_getMethodName(_mmap[x],_umap);if(!_tmp||!this._$supro[x])continue;_prototype[x]=function(_name){return function(){this[_name].apply(this,arguments)}}(_tmp)}var _pmap={};for(var x in _umap){_tmp=_getMethodName(_umap[x],_mmap);if(!_tmp||!this._$supro[_tmp])continue;_pmap[_tmp]=_super;_prototype[x]=function(_name){return function(){var _result,_parent=this.__ancestor__[_name],_method=_parent.prototype[_name];this.__ancestor__[_name]=_parent._$super||_super;if(!!_method)_result=_method.apply(this,arguments);this.__ancestor__[_name]=_super;return _result}}(_tmp)}_prototype.__cp__=function(){this.__ancestor__=NEJ.X({},_pmap)};_prototype.__super=_prototype.__supInit;return _prototype};return _class}}();NEJ.X=function(_object,_config,_filter){if(!_object||!_config)return _object;_filter=_filter||NEJ.F;for(var x in _config){if(_config.hasOwnProperty(x)&&!_filter(_config[x],x))_object[x]=_config[x]}return _object};NEJ.EX=function(_object,_config){if(!_object||!_config)return _object;for(var x in _object){if(_object.hasOwnProperty(x)&&_config[x]!=null)_object[x]=_config[x]}return _object};var _extpro=Function.prototype;_extpro._$aop=function(_before,_after){var f=NEJ.F,_after=_after||f,_before=_before||f,_handler=this;return function(){var _event={args:NEJ.R.slice.call(arguments,0)};_before(_event);if(!_event.stopped){_event.value=_handler.apply(this,_event.args);_after(_event)}return _event.value}};_extpro._$bind=function(){var _args=arguments,_object=arguments[0],_function=this;return function(){var _argc=NEJ.R.slice.call(_args,1);NEJ.R.push.apply(_argc,arguments);return _function.apply(_object||window,_argc)}};_extpro._$bind2=function(){var _args=arguments,_object=NEJ.R.shift.call(_args),_function=this;return function(){NEJ.R.push.apply(arguments,_args);return _function.apply(_object||window,arguments)}};var _extpro=String.prototype;if(!_extpro.trim){_extpro.trim=function(){var _reg=/(?:^\s+)|(?:\s+$)/g;return function(){return this.replace(_reg,"")}}()}if(!window.MWF)window.MWF=NEJ;if(!window.mwf)window.mwf=NEJ.P("nej");if(!window.console){NEJ.P("console").log=NEJ.F;NEJ.P("console").error=NEJ.F}var lt,gt,amp,nbsp,quot,apos,copy,reg})();
(function(){var _=NEJ.P,_o=NEJ.O,_p=_("nej.p"),_platform=window.navigator.platform,_useragent=window.navigator.userAgent;var _is={mac:_platform,win:_platform,linux:_platform,ipad:_useragent,ipod:_useragent,iphone:_platform,android:_useragent};_p._$IS=_is;for(var x in _is)_is[x]=(new RegExp(x,"i")).test(_is[x]);_is.ios=_is.ipad||_is.iphone||_is.ipod;_is.tablet=_is.ipad;_is.desktop=_is.mac||_is.win||_is.linux&&!_is.android;var _kernel={engine:"unknow",release:"unknow",browser:"unknow",version:"unknow",prefix:{css:"",pro:"",clz:""}};_p._$KERNEL=_kernel;if(/msie\s+(.*?);/i.test(_useragent)||/trident\/.+rv:([\d\.]+)/i.test(_useragent)){_kernel.engine="trident";_kernel.browser="ie";_kernel.version=RegExp.$1;_kernel.prefix={css:"ms",pro:"ms",clz:"MS",evt:"MS"};var _test={6:"2.0",7:"3.0",8:"4.0",9:"5.0",10:"6.0",11:"7.0"};_kernel.release=_test[document.documentMode]||_test[parseInt(_kernel.version)]}else if(/webkit\/?([\d.]+?)(?=\s|$)/i.test(_useragent)){_kernel.engine="webkit";_kernel.release=RegExp.$1||"";_kernel.prefix={css:"webkit",pro:"webkit",clz:"WebKit"}}else if(/rv\:(.*?)\)\s+gecko\//i.test(_useragent)){_kernel.engine="gecko";_kernel.release=RegExp.$1||"";_kernel.browser="firefox";_kernel.prefix={css:"Moz",pro:"moz",clz:"Moz"};if(/firefox\/(.*?)(?=\s|$)/i.test(_useragent))_kernel.version=RegExp.$1||""}else if(/presto\/(.*?)\s/i.test(_useragent)){_kernel.engine="presto";_kernel.release=RegExp.$1||"";_kernel.browser="opera";_kernel.prefix={css:"O",pro:"o",clz:"O"};if(/version\/(.*?)(?=\s|$)/i.test(_useragent))_kernel.version=RegExp.$1||""}if(_kernel.browser=="unknow"){var _test=["chrome","maxthon","safari"];for(var i=0,l=_test.length,_name;i<l;i++){_name=_test[i]=="safari"?"version":_test[i];if((new RegExp(_name+"/(.*?)(?=\\s|$)","i")).test(_useragent)){_kernel.browser=_test[i];_kernel.version=RegExp.$1.trim();break}}}_p._$SUPPORT={};var _notd=_kernel.engine!="trident";_p._$NOT_PATCH={gecko:_kernel.engine!="gecko",webkit:_kernel.engine!="webkit",presto:_kernel.engine!="presto",trident0:_notd||_kernel.release>"2.0",trident1:_notd||_kernel.release<"6.0",trident2:_notd||_kernel.release>"3.0",trident:_notd||_kernel.release>="6.0"}})();
(function(){var _c=NEJ.P("nej.c"),_cache={};var _url2host=function(){var _reg=/^([\w]+?:\/\/.*?(?=\/|$))/i;return function(_url){_url=_url||"";if(_reg.test(_url))return RegExp.$1;return location.protocol+"//"+location.host}}();var _doInit=function(){var _doInitProxy=function(_list,_map){if(!_list||!_list.length)return;for(var i=0,l=_list.length,_path;i<l;i++){_path=_list[i];if(_path.indexOf("://")>0)_map[_url2host(_path)]=_path}};var _conf={portrait:{name:"portrait",dft:"portrait/"},"ajax.swf":{name:"ajax",dft:"nej_proxy_flash.swf"},"chart.swf":{name:"chart",dft:"nej_flex_chart.swf"},"audio.swf":{name:"audio",dft:"nej_player_audio.swf"},"video.swf":{name:"video",dft:"nej_player_video.swf"},"clipboard.swf":{name:"clipboard",dft:"nej_clipboard.swf"}};return function(_config){_c.__set("root",_config.root||"/res/");var _cnf,_root=_c._$get("root");for(var x in _conf){_cnf=_conf[x];_c.__set(x,_config[_cnf.name]||_root+_cnf.dft)}var _csrf=_config.p_csrf;if(_csrf==!0){_csrf={cookie:"AntiCSRF",param:"AntiCSRF"}}_c.__set("csrf",NEJ.EX({cookie:"",param:""},_csrf));_cache.frames={};_doInitProxy(_config.p_frame,_cache.frames);_cache.flashs={};_doInitProxy(_config.p_flash,_cache.flashs)}}();_c.__set=function(_key,_value){_cache[_key]=_value};_c._$get=function(_key){return _cache[_key]};_c._$getFrameProxy=function(_url){var _host=_url2host(_url);return _cache.frames[_host]||_host+"/res/nej_proxy_frame.html"};_c._$getFlashProxy=function(_url){return _cache.flashs[_url2host(_url)]};_doInit(window.NEJ_CONF||NEJ.O)})();
(function(){var _=NEJ.P,_p=_("nej.p"),_c=_("nej.c"),_config=window.NEJ_CONF||NEJ.O;if(_p._$NOT_PATCH.trident)return;_c.__set("storage.swf",_config.storage||_c._$get("root")+"nej_storage.swf");if(_p._$KERNEL.release<"4.0"){_c.__set("blank.png",_config.blank||_c._$get("root")+"nej_blank.gif")}var _list=_config.xdr,_reg0=/^(https?:\/\/.*?)(?=\/|$)/i,_reg1=/[\/?=&]/i;var _doParseUrl2Key=function(_url){return(_reg0.test(_url)?RegExp.$1:"").toLowerCase()};if(!!_list&&!!_list.length)for(var i=_list.length-1,_url,_key;i>=0;i--){_url=_list[i];_key=_doParseUrl2Key(_url);if(!!_key)_c.__set(_key,_url)}_c._$getProxyURL=function(_url){var _key=_doParseUrl2Key(_url);if(!_key){if(_reg1.test(_url)){_key=location.protocol+"//"+location.host}else if(_url.indexOf("://")<0){_key=location.protocol+"//"+_url}else{_key=_url}}return _c._$get(_key)||_key+"/res/nej_xdomain.html"}})();
(function(){var _=NEJ.P,_c=_("nej.c"),_p=_("nej.g"),_seed=+(new Date);_p._$CODE_NOTFUND=1e4-_seed;_p._$CODE_NOTASGN=10001-_seed;_p._$CODE_NOTSPOT=10002-_seed;_p._$CODE_TIMEOUT=10003-_seed;_p._$CODE_ERREVAL=10004-_seed;_p._$CODE_ERRCABK=10005-_seed;_p._$CODE_ERRSERV=10006-_seed;_p._$CODE_ERRABRT=10007-_seed;_p._$HEAD_CT="Content-Type";_p._$HEAD_CT_PLAN="text/plain";_p._$HEAD_CT_FILE="multipart/form-data";_p._$HEAD_CT_FORM="application/x-www-form-urlencoded";_p._$BLANK_IMAGE=_c._$get("blank.png")||"data:image/gif;base64,R0lGODlhAQABAID/AMDAwAAAACH5BAEAAAAALAAAAAABAAEAAAICRAEAOw=="})();
(function(){var _=NEJ.P,_o=NEJ.O,_r=NEJ.R,_f=NEJ.F,_e=_("nej.e"),_h=_("nej.h"),_u=_("nej.u");var _isTypeOf=function(_data,_type){try{_type=_type.toLowerCase();if(_data===null)return _type=="null";if(_data===undefined)return _type=="undefined";return _o.toString.call(_data).toLowerCase()=="[object "+_type+"]"}catch(e){return!1}};_u._$isFunction=function(_data){return _isTypeOf(_data,"function")};_u._$isString=function(_data){return _isTypeOf(_data,"string")};_u._$isNumber=function(_data){return _isTypeOf(_data,"number")};_u._$isBoolean=function(_data){return _isTypeOf(_data,"boolean")};_u._$isDate=function(_data){return _isTypeOf(_data,"date")};_u._$isArray=function(_data){return _isTypeOf(_data,"array")};_u._$isObject=function(_data){return _isTypeOf(_data,"object")};_u._$length=function(){var _reg=/[^\x00-\xfff]/g;return function(_content){return(""+(_content||"")).replace(_reg,"**").length}}();_u._$indexOf=function(_list,_item){var _filter=_u._$isFunction(_item)?_item:function(_value){return _value===_item},_index=_u._$forIn(_list,_filter);return _index!=null?_index:-1};_u._$binSearch=function(){var _docheck;var _doSearch=function(_list,_low,_high){if(_low>_high)return-1;var _middle=Math.ceil((_low+_high)/2),_result=_docheck(_list[_middle],_middle,_list);if(_result==0)return _middle;if(_result<0)return _doSearch(_list,_low,_middle-1);return _doSearch(_list,_middle+1,_high)};return function(_list,_check){_docheck=_check||_f;return _doSearch(_list,0,_list.length-1)}}();_u._$reverseEach=function(_list,_callback,_this){if(!_list||!_list.length||!_u._$isFunction(_callback))return null;for(var i=_list.length-1;i>=0;i--)if(!!_callback.call(_this,_list[i],i,_list))return i;return null};_u._$forEach=function(_list,_callback,_this){if(!_list||!_list.length||!_u._$isFunction(_callback))return this;if(!!_list.forEach){_list.forEach(_callback,_this);return this}for(var i=0,l=_list.length;i<l;i++)_callback.call(_this,_list[i],i,_list);return this};_u._$forIn=function(_list,_callback,_this){if(!_list||!_u._$isFunction(_callback))return null;if(_list.length!=null){if(_list.length>0)for(var i=0,l=_list.length;i<l;i++)if(!!_callback.call(_this,_list[i],i,_list))return i}if(_u._$isObject(_list)){for(var x in _list)if(_list.hasOwnProperty(x)&&!!_callback.call(_this,_list[x],x,_list))return x}return null};_u._$mergeList=function(_slist,_dlist,_options){_slist=_slist||[];_options=_options||_o;var _added=!!_options.union,_begin=!!_options.begin,_compare=_options.compare,_floop=_added&&_begin?_u._$reverseEach:_u._$forEach;_floop(_dlist,function(_item){if(!!_compare)_compare=_compare._$bind2(_item);var _index=_u._$indexOf(_slist,_compare||_item);if(_index>=0)_slist.splice(_index,1);if(_added)_slist[_begin?"unshift":"push"](_item)});return _slist};_u._$encode=function(_map,_content){if(!_map||!_content||!_content.replace)return _content||"";return _content.replace(_map.r,function($1){var _result=_map[!_map.i?$1.toLowerCase():$1];return _result!=null?_result:$1})};_u._$escape=function(){var _map={r:/\<|\>|\&|\r|\n|\s|\'|\"/g,"<":"&lt;",">":"&gt;","&":"&amp;"," ":"&nbsp;",'"':"&quot;","'":"&#39;","\n":"<br/>","\r":""};return function(_content){return _u._$encode(_map,_content)}}();_u._$unescape=function(){var _map={r:/\&(?:lt|gt|amp|nbsp|#39|quot)\;|\<br\/\>/gi,"&lt;":"<","&gt;":">","&amp;":"&","&nbsp;":" ","&#39;":"'","&quot;":'"',"<br/>":"\n"};return function(_content){return _u._$encode(_map,_content)}}();_u._$format=function(){var _map={i:!0,r:/\byyyy|yy|MM|cM|eM|M|dd|d|HH|H|mm|ms|ss|m|s|w|ct|et\b/g},_12cc=["上午","下午"],_12ec=["A.M.","P.M."],_week=["日","一","二","三","四","五","六"],_cmon=["一","二","三","四","五","六","七","八","九","十","十一","十二"],_emon=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sept","Oct","Nov","Dec"];var _fmtnmb=function(_number){_number=parseInt(_number)||0;return(_number<10?"0":"")+_number};var _fmtclc=function(_hour){return _hour<12?0:1};return function(_time,_format,_12time){if(!_time||!_format)return"";_time=_u._$var2date(_time);_map.yyyy=_time.getFullYear();_map.yy=(""+_map.yyyy).substr(2);_map.M=_time.getMonth()+1;_map.MM=_fmtnmb(_map.M);_map.eM=_emon[_map.M-1];_map.cM=_cmon[_map.M-1];_map.d=_time.getDate();_map.dd=_fmtnmb(_map.d);_map.H=_time.getHours();_map.HH=_fmtnmb(_map.H);_map.m=_time.getMinutes();_map.mm=_fmtnmb(_map.m);_map.s=_time.getSeconds();_map.ss=_fmtnmb(_map.s);_map.ms=_time.getMilliseconds();_map.w=_week[_time.getDay()];var _cc=_fmtclc(_map.H);_map.ct=_12cc[_cc];_map.et=_12ec[_cc];if(!!_12time){_map.H=_map.H%12}return _u._$encode(_map,_format)}}();_u._$var2date=function(_time){var _date=_time;if(_u._$isString(_time))_date=new Date(Date.parse(_time));if(!_u._$isDate(_time))_date=new Date(_time);return _date};_u._$fixed=function(_float,_fraction){return(new Number(_float)).toFixed(_fraction)};_u._$absolute=function(){var _reg0=/([^\/:])\/.*$/,_reg1=/\/[^\/]+$/,_reg2=/[#\?]/,_base=location.href.split(/[?#]/)[0],_anchor=document.createElement("a");var _isAbsolute=function(_uri){return(_uri||"").indexOf("://")>0};var _doFormat=function(_uri){return(_uri||"").split(_reg2)[0].replace(_reg1,"/")};var _doMergeURI=function(_uri,_root){if(_uri.indexOf("/")==0)return _root.replace(_reg0,"$1")+_uri;return _doFormat(_root)+_uri};_base=_doFormat(_base);return function(_uri,_root){_uri=(_uri||"").trim();if(!_isAbsolute(_root))_root=_base;if(!_uri)return _root;if(_isAbsolute(_uri))return _uri;_uri=_doMergeURI(_uri,_root);_anchor.href=_uri;_uri=_anchor.href;return _isAbsolute(_uri)?_uri:_anchor.getAttribute("href",4)}}();_u._$url2origin=function(){var _reg=/^([\w]+?:\/\/.*?(?=\/|$))/i;return function(_url){if(_reg.test(_url||""))return RegExp.$1.toLowerCase();return""}}();_u._$dom2object=function(_dom,_obj){if(!_dom)return _obj;var _name=_dom.tagName.toLowerCase(),_list=_e._$getChildren(_dom);if(!_list||!_list.length){_obj[_name]=_dom.textContent||_dom.text||"";return _obj}var _tmp={};_obj[_name]=_tmp;_u._$forEach(_list,function(_node){_u._$dom2object(_node,_tmp)});return _obj};_u._$xml2object=function(_xml){try{return _u._$dom2object(_e._$xml2dom(_xml),{})}catch(ex){return null}};_u._$string2object=function(_string,_split){var _obj={};_u._$forEach((_string||"").split(_split),function(_name){var _brr=_name.split("=");if(!_brr||!_brr.length)return;var _key=_brr.shift();if(!_key)return;_obj[decodeURIComponent(_key)]=decodeURIComponent(_brr.join("="))});return _obj};_u._$object2string=function(_object,_split,_encode){if(!_object)return"";var _arr=[];for(var x in _object){_arr.push(encodeURIComponent(x)+"="+(!!_encode?encodeURIComponent(_object[x]):_object[x]))}return _arr.join(_split||",")};_u._$query2object=function(_query){return _u._$string2object(_query,"&")};_u._$object2query=function(_object){return _u._$object2string(_object,"&",!0)};_u._$object2array=function(_object){return _h.__col2array(_object)};_u._$array2object=function(_list,_filter){var _result={};_u._$forEach(_list,function(_item){var _key=_item;if(!!_filter){_key=_filter(_item)}_result[_key]=_item});return _result};_u._$number2string=function(_number,_limit){var _len1=(""+_number).length,_len2=Math.max(1,parseInt(_limit)||0),_delta=_len2-_len1;if(_delta>0){_number=(new Array(_delta+1)).join("0")+_number}return""+_number};_u._$safeDelete=function(_object,_name){if(!_u._$isArray(_name)){try{delete _object[_name]}catch(e){_object[_name]=undefined}return this}_u._$forEach(_name,_u._$safeDelete._$bind(_u,_object));return this};_u._$randString=function(){var _chars="0123456789ABCDEFGHIJKLMNOPQRSTUVWXTZabcdefghiklmnopqrstuvwxyz";return function(_length){_length=_length||10;var _result=[];for(var i=0,_rnum;i<_length;++i){_rnum=Math.floor(Math.random()*_chars.length);_result.push(_chars.charAt(_rnum))}return _result.join("")}}();_u._$randNumber=function(_min,_max){return Math.floor(Math.random()*(_max-_min)+_min)};_u._$randNumberString=function(_length){_length=Math.max(0,Math.min(_length||8,30));var _min=Math.pow(10,_length-1),_max=_min*10;return _u._$randNumber(_min,_max).toString()};_u._$uniqueID=function(){var _seed=+(new Date);return function(){return""+_seed++}}()})();
(function(){var _=NEJ.P,_r=NEJ.R,_p=_("nej.p"),_e=_("nej.e"),_v=_("nej.v"),_u=_("nej.u"),_h=_("nej.h");var _prefix=_p._$KERNEL.prefix,_suport=_p._$SUPPORT,_2dmap={scale:"scale({x|1},{y|1})",rotate:"rotate({a})",translate:"translate({x},{y})"},_3dmap={scale:"scale3d({x|1},{y|1},{z|1})",rotate:"rotate3d({x},{y},{z},{a})",translate:"translate3d({x},{y},{z})"},_cssmap={transition:!0,transform:!0,animation:!0,keyframes:!0,box:!0,"box-pack":!0,"box-flex":!0,marquee:!0,"border-radius":!0,"user-select":!0};var _doInit=function(){var _matrix=_h.__getCSSMatrix();_suport.css3d=!!_matrix&&_matrix.m41!=null;var _reg=/-([a-z])/g;for(var x in _cssmap){_cssmap[_doFormatStyleName(x)]=_cssmap[x]}};var _doFormatStyleName=function(){var _reg=/-([a-z])/g;return function(_name){_name=_name||"";return _name.replace(_reg,function($1,$2){return $2.toUpperCase()})}}();var _getTransformTemplate=function(_name){return(!_suport.css3d?_2dmap:_3dmap)[_name]};var _getClassList=function(){var _reg=/\s+/;return function(_class){_class=(_class||"").trim();return!!_class?_class.split(_reg):null}}();var _doClassName=function(_element,_type,_class){_element=_e._$get(_element);if(!_element)return;_u._$forEach(_getClassList(_class),function(_clazz){_element.classList[_type](_clazz)})};_h.__col2array=function(_list){return _r.slice.call(_list,0)};_h.__getChildren=function(_element){return _h.__col2array(_element.children)};_h.__getElementsByClassName=function(_element,_class){return _h.__col2array(_element.getElementsByClassName(_class))};_h.__addClassName=function(_element,_add){_doClassName(_element,"add",_add)};_h.__delClassName=function(_element,_del){_doClassName(_element,"remove",_del)};_h.__replaceClassName=function(_element,_del,_add){_doClassName(_element,"remove",_del);_doClassName(_element,"add",_add)};_h.__hasClassName=function(_element,_class){_element=_e._$get(_element);if(!_element)return!1;var _list=_element.classList;if(!_list||!_list.length)return!1;return _u._$indexOf(_getClassList(_class),function(_clazz){return _list.contains(_clazz)})>=0};_h.__hoverElement=function(_element,_clazz){};_h.__fixedElement=function(_element){};_h.__setCursorPosition=function(_textarea,_position){_textarea.selectionEnd=_position.end||0;_textarea.selectionStart=_position.start||0;_textarea.focus()};_h.__getCursorPosition=function(_textarea){return{end:_textarea.selectionEnd,start:_textarea.selectionStart}};_h.__focusElement=function(){var _onBlur=function(_clazz,_event){var _element=_v._$getElement(_event);if(!_element.value)_e._$delClassName(_element,_clazz)};var _onFocus=function(_clazz,_event){_e._$addClassName(_v._$getElement(_event),_clazz)};return function(_element,_mode,_clazz){if(_mode==1){_v._$addEvent(_element,"blur",_onBlur._$bind(null,_clazz))}if(_mode==1||_mode==-1){_v._$addEvent(_element,"focus",_onFocus._$bind(null,_clazz))}}}();_h.__serializeDOM2XML=function(_dom){return(new XMLSerializer).serializeToString(_dom)||""};_h.__parseDOMFromXML=function(_xml){var _root=(new DOMParser).parseFromString(_xml,"text/xml").documentElement;return _root.nodeName=="parsererror"?null:_root};_h.__fullScreen=function(_element){};_h.__mask=function(_element){return null};_h.__unmask=function(_element){return null};_h.__pushHistory=function(_hash){};_h.__formatEventArgs=function(){var _args=_h.__col2array(arguments);_args[0]=_e._$get(_args[0]);if(!_args[0])return null;_args[1]=(_args[1]||"").toLowerCase();if(!_args[1])return null;return _args};_h.__checkEvent=function(){var _tmap={touchstart:"mousedown",touchmove:"mousemove",touchend:"mouseup"},_emap={transitionend:"TransitionEnd",animationend:"AnimationEnd",animationstart:"AnimationStart",animationiteration:"AnimationIteration"};var _doCompletePrefix=function(_type){return(_prefix.evt||_prefix.pro)+_type};return function(){var _args=_h.__formatEventArgs.apply(_h,arguments);if(!_args)return;var _type=_h.__checkEventType(_args[0],_args[1]);if(!!_type){_args[4]=_args[1];_args[1]=_type;if(!!_args[2]){_args[5]=_args[2];_args[2]=_h.__checkEventHandler(_args[1],_args[2],_args[0])}return _args}var _type1=_emap[_args[1]],_type2=_tmap[_args[1]];if(!!_type1){_args[4]=_args[1];_args[1]=_doCompletePrefix(_type1)}else if(!!_type2){var _name="on"+_args[1];if(!(_name in _args[0])){_args[4]=_args[1];_args[1]=_type2}}return _args}}();_h.__checkEventTypeWithConf=function(_map,_event){var _value,_args=_event.args,_type=_args[1],_element=_args[0];if(!("on"+_type in _element)){_value=_map[_type]||""}if(!!_value&&!_map[_value]&&!("on"+_value in _element)){_value=null}if(!!_value){_event.stopped=!0;_event.value=_value}};_h.__checkEventType=function(){var _emap={enter:"keypress"};return function(_element,_type){return _emap[_type]||null}}();_h.__checkEventHandler=function(_type,_handler,_element){var _callback=_handler;switch(_type){case"keypress":_callback=function(_event){var _this=_v._$getElement(_event)||this;if(_event.keyCode==13){_handler.call(_this,_event)}};break}return _callback};_h.__addEvent=function(){var _args=arguments,_isok="on"+_args[1]in _args[0];if(!_isok){console.log("not support event["+_args[1]+"] for "+_args[0])}_args[0].addEventListener(_args[1],_args[2],!!_args[3])};_h.__delEvent=function(){var _args=arguments;_args[0].removeEventListener(_args[1],_args[2],!!_args[3])};_h.__dispatchEvent=function(_element,_type,_options){var _event=document.createEvent("Event");_event.initEvent(_type,!0,!0);NEJ.X(_event,_options);_element.dispatchEvent(_event)};_h.__getCSSMatrix=function(){var _reg0=/\((.*?)\)/,_reg1=/\s*,\s*/,_list=["m11","m12","m21","m22","m41","m42"];var _parse=function(_matrix){var _obj={};if(_reg0.test(_matrix||"")){_u._$forEach(RegExp.$1.split(_reg1),function(_value,_index){_obj[_list[_index]]=_value||""})}return _obj};return function(_matrix){if(!!window.CSSMatrix)return new CSSMatrix(_matrix);var _name=_prefix.clz+"CSSMatrix";if(!!window[_name])return new window[_name](_matrix||"");return _parse(_matrix)}}();_h.__getTransformValue=function(){var _reg=/\{(.*?)\}/g;return function(_name,_map){_map=_map||o;var _tpl=_getTransformTemplate(_name);return!_tpl?"":_tpl.replace(_reg,function($1,$2){var _arr=$2.split("|");return _map[_arr[0]]||_arr[1]||"0"})}}();_h.__getStyleValue=function(_element,_name){var _current=window.getComputedStyle(_element,null);return _current[_h.__getStyleName(_name)]||""};_h.__getStyleName=function(){var _reg=/^[a-z]/,_pfx=_prefix.css;var _addPrefix=function(_name){return _name.replace(_reg,function($1){return _pfx+$1.toUpperCase()})};return function(_name){_name=_doFormatStyleName(_name);var _pfxed=_h.__checkStyleName(_name,_cssmap);return _pfxed?_addPrefix(_name):_name}}();_h.__applyStyle=function(_element,_name,_value){_element.style[_h.__getStyleName(_name)]=_value};_h.__checkStyleName=function(){var _reg=/^([a-z]+?)[A-Z]/;return function(_name,_map){if(!_map[_name]){if(_reg.test(_name))_name=RegExp.$1}return!!_map[_name]}}();_h.__filterCSSText=function(){var _reg=/\$<(.*?)>/gi,_pfx="-"+_prefix.css.toLowerCase()+"-";return function(_css){return _css.replace(_reg,function($1,$2){var _val=$2,_arr=_val.split("|"),_tpl=_getTransformTemplate(_arr[0]);if(!!_tpl){return _h.__getTransformValue(_arr[0],_u._$query2object(_arr[1]))}return!_h.__checkCSSText(_val,_cssmap)?_val:_pfx+_val})}}();_h.__checkCSSText=function(_name,_map){return!!_map[_name]};_h.__applyCSSText=function(_style,_css){_style.textContent=_css};_h.__appendCSSText=function(_style,_css){var _sheet=_style.sheet,_length=_sheet.cssRules.length;_sheet.insertRule(_css,_length);return _sheet.cssRules[_length]};_h.__applyEffect=function(_element,_options){};_h.__canFlashEventBubble=function(_wmode){return(_wmode||"").toLowerCase()!="transparent"};_h.__handleFileLabelClick=function(_element){};_h.__getAttribute=function(_element,_name){if(!!_element.getAttribute)return _element.getAttribute(_name);return""};_h.__removeIFrameKeepHistory=function(_iframe){_e._$remove(_iframe)};_doInit()})();
(function(){var _=NEJ.P,_e=_("nej.e"),_v=_("nej.v"),_p=_("nej.p"),_h=_("nej.h");if(_p._$NOT_PATCH.trident0)return;var _seed=+(new Date);_cache={};_h.__hoverElement=_h.__hoverElement._$aop(function(_event){_event.stopped=!0;var _args=_event.args,_id=_e._$id(_args[0]),_key="hover-"+_id;if(!_id||!!_cache[_key])return;_cache[_key]=!0;_v._$addEvent(_id,"mouseenter",_e._$addClassName._$bind(_e,_id,_args[1]));_v._$addEvent(_id,"mouseleave",_e._$delClassName._$bind(_e,_id,_args[1]))});_h.__fixedElement=function(){var _doScrollCheck=function(){};return _h.__fixedElement._$aop(function(_event){_event.stopped=!0;var _element=_event.args[0],_id="fixed-"+_e._$id(_element);if(!!_cache[_id])return;var _conf={};_cache[_id]=_conf})}();_h.__fullScreen=_h.__fullScreen._$aop(function(_event){_event.stopped=!0;var _element=_event.args[0],_style=_element.style,_viewport=_e._$getPageBox();_style.width=_viewport.scrollWidth+"px";_style.height=_viewport.scrollHeight+"px"});_h.__mask=_h.__mask._$aop(function(_event){_event.stopped=!0;var _element=_event.args[0],_mask=_cache[_element.msk];if(!_mask){_element.msk=_seed++;_mask=_e._$create("iframe");_mask.style.position="absolute";_cache[_element.msk]=_mask}_event.value=_mask;var _style=_mask.style;_style.top=(parseInt(_e._$getStyle(_element,"top"))||0)+"px";_style.left=(parseInt(_e._$getStyle(_element,"left"))||0)+"px";_style.width=_element.offsetWidth+"px";_style.height=_element.offsetHeight+"px";_element.insertAdjacentElement("beforeBegin",_mask)});_h.__unmask=_h.__unmask._$aop(function(_event){_event.stopped=!0;var _mask=_cache[_event.args[0].msk];if(!!_mask)_e._$removeByEC(_mask)})})();
(function(){var _=NEJ.P,_p=_("nej.p"),_e=_("nej.e"),_h=_("nej.h");if(_p._$NOT_PATCH.trident1)return;_h.__checkEventType=function(){var _emap={touchcancel:"MSPointerCancel",touchstart:"MSPointerDown",touchmove:"MSPointerMove",touchend:"MSPointerUp"};return _h.__checkEventType._$aop(_h.__checkEventTypeWithConf._$bind(_h,_emap))}();_h.__canFlashEventBubble=function(_wmode){return!0};_h.__removeIFrameKeepHistory=_h.__removeIFrameKeepHistory._$aop(function(_event){_event.stopped=!0;var _iframe=_event.args[0];_e._$setStyle(_iframe,"display","none");try{_iframe.contentWindow.document.body.innerHTML="&nbsp;"}catch(ex){}})})();
(function(){var _=NEJ.P,_o=NEJ.O,_p=_("nej.p"),_e=_("nej.e"),_v=_("nej.v"),_u=_("nej.u"),_h=_("nej.h"),_omap={};if(_p._$NOT_PATCH.trident)return;_h.__col2array=_h.__col2array._$aop(function(_event){_event.stopped=!0;var _list=_event.args[0];if(!_list){_event.value=null;return}var _index=0,_result=[];while(!!_list[_index]){_result.push(_list[_index++])}_event.value=_result});_h.__getChildren=_h.__getChildren._$aop(function(_event){_event.stopped=!0;var _arr=[];_u._$forEach(_event.args[0].childNodes,function(_node){if(_node.nodeType==1)_arr.push(_node)});_event.value=_arr});_h.__getElementsByClassName=_h.__getElementsByClassName._$aop(function(_event){var _element=_event.args[0];if(!!_element.getElementsByClassName)return;_event.stopped=!0;var _result=[],_regexp=new RegExp("(\\s|^)(?:"+_event.args[1].replace(/\s+/g,"|")+")(?=\\s|$)");_u._$forEach(_element.getElementsByTagName("*"),function(_node){if(_regexp.test(_node.className))_result.push(_node)});_event.value=_result});_h.__setCursorPosition=_h.__setCursorPosition._$aop(function(_event){var _textarea=_event.args[0],_position=_event.args[1];if(_textarea.selectionStart==null){_event.stopped=!0;var _range=_textarea.createTextRange();_range.collapse(!0);_range.moveStart("character",_position.start);_range.moveEnd("character",_position.end-_position.start);_range.select();_textarea.focus()}});_h.__getCursorPosition=_h.__getCursorPosition._$aop(function(_event){var _textarea=_event.args[0];_textarea.focus();if(_textarea.selectionStart==null){_event.stopped=!0;var _range0=document.selection.createRange();var _range1=_textarea.createTextRange();_range1.moveToBookmark(_range0.getBookmark());var _range2=_textarea.createTextRange();_range2.collapse(!0);_range2.setEndPoint("EndToStart",_range1);var _start=_range2.text.length;_event.value={start:_start,end:_start+_range0.text.length}}});_h.__serializeDOM2XML=_h.__serializeDOM2XML._$aop(function(_event){if(!!window.XMLSerializer)return;_event.stopped=!0;var _element=_event.args[0];_event.value=_element.xml!=null?_element.xml:_element.outHTML});_h.__parseDOMFromXML=function(){var _msxml=["Msxml2.DOMDocument.6.0","Msxml2.DOMDocument.3.0"];var _getParser=function(){try{for(var i=0,l=_msxml.length;i<l;i++)return new ActiveXObject(_msxml[i])}catch(ex){return null}};return _h.__parseDOMFromXML._$aop(function(_event){if(!!window.DOMParser)return;_event.stopped=!0;var _parser=_getParser();if(!!_parser&&_parser.loadXML(_event.args[0])&&!_parser.parseError.errorCode)_event.value=_parser.documentElement})}();_h.__checkEvent=_h.__checkEvent._$aop(null,function(_event){var _args=_event.value;if(!_args||!_args[0]||!_u._$isFunction(_args[2]))return;if(!_u._$isFunction(_args[5]))_args[5]=_args[2];_args[2]=_args[2]._$bind(_args[0])});_h.__checkEventType=function(){var _emap={input:"propertychange",load:"readystatechange"};for(var x in _emap)_omap[_emap[x]]=!0;return _h.__checkEventType._$aop(_h.__checkEventTypeWithConf._$bind(_h,_emap))}();_h.__checkEventHandler=_h.__checkEventHandler._$aop(function(_evt){var _args=_evt.args,_handler=_args[1];switch(_args[0]){case"readystatechange":_evt.stopped=!0;_evt.value=function(_event){var _element=_v._$getElement(_event)||this;if(_element.readyState=="loaded"||_element.readyState=="complete"){_event.target=_element;_handler.call(_element,_event)}};break;case"propertychange":_evt.stopped=!0;_evt.value=function(_event){var _element=_v._$getElement(_event)||this;if("value"in _element&&_event.propertyName=="value"){_event.target=_element;_handler.call(_element,_event)}};break}});_h.__addEvent=_h.__addEvent._$aop(function(_event){var _args=_event.args;if(!!_omap[_args[1]]||!document.addEventListener){_event.stopped=!0;_args[0].attachEvent("on"+_args[1],_args[2])}});_h.__delEvent=_h.__delEvent._$aop(function(_event){var _args=_event.args;if(!!_omap[_args[1]]||!document.removeEventListener){_event.stopped=!0;_args[0].detachEvent("on"+_args[1],_args[2])}});if(_p._$KERNEL.release=="5.0"){_h.__addEvent=function(){var _hmap={},_kmap={8:1,46:1},_cmap={88:"ctrlKey"};var _doEventCheck=function(_event){var _code=_event.keyCode,_key=_cmap[_code],_icut=!!_key&&_event[_key];if(!_kmap[_code]&&!_icut)return;var _node=_v._$getElement(_event),_id=_e._$id(_node),_key=_id+"-last",_value=_node.value;if(_hmap[_key]!=_value){_hmap[_key]=_value;_doCallback(_id,_event)}};var _doFocusUpdate=function(_event){var _node=_v._$getElement(_event),_key=_e._$id(_node)+"-focused";_hmap[_key]=_event.type=="focus"};var _doValueChange=function(_event){var _node=_v._$getElement(_event),_id=_e._$id(_node),_key=_id+"-focused";if(!!_hmap[_key]||_event.propertyName!="value"){return}_doCallback(_id,_event)};var _doCallback=function(_id,_event){_u._$forEach(_hmap[_id],function(_handler){_handler.call(null,_event)})};_h.__delEvent=_h.__delEvent._$aop(null,function(_event){var _args=_event.args;if(_args[1]=="input"){var _id=_e._$id(_args[0]),_func=_args[2];_u._$reverseEach(_hmap[_id],function(_handler,_index,_list){if(_func==_handler){_list.splice(_index,1);return!0}});var _list=_hmap[_id];if(!_list||!_list.length){delete _hmap[_id];delete _hmap[_id+"-last"];_v._$delEvent(_id,"keyup",_doEventCheck);_v._$delEvent(_id,"keydown",_doEventCheck);_v._$delEvent(_id,"focus",_doFocusUpdate);_v._$delEvent(_id,"blur",_doFocusUpdate);_v._$delEvent(_id,"propertychange",_doValueChange)}}});return _h.__addEvent._$aop(null,function(_event){var _args=_event.args;if(_args[1]=="input"){var _id=_e._$id(_args[0]);if(!_hmap[_id]){_hmap[_id]=[]}_hmap[_id].push(_args[2]);_v._$addEvent(_id,"keyup",_doEventCheck);_v._$addEvent(_id,"keydown",_doEventCheck);_v._$addEvent(_id,"focus",_doFocusUpdate);_v._$addEvent(_id,"blur",_doFocusUpdate);_v._$addEvent(_id,"propertychange",_doValueChange)}})}()}_h.__dispatchEvent=_h.__dispatchEvent._$aop(function(_event){if(!document.createEvent){_event.stopped=!0;var _args=_event.args,_eobj=document.createEventObject();NEJ.X(_eobj,_args[2]);try{_args[0].fireEvent("on"+_args[1],_eobj)}catch(ex){console.error(ex.message);console.error(ex.stack)}}});_h.__getStyleValue=function(){var _reg0=/opacity\s*=\s*([\d]+)/i;return _h.__getStyleValue._$aop(function(_event){if(!!window.getComputedStyle)return;_event.stopped=!0;var _result="",_args=_event.args,_name=_args[1],_current=_args[0].currentStyle||_o;if(_name=="opacity"&&!(_name in _current)){_result=0;var _value=_current.filter||"";if(_reg0.test(_value)){_result=parseFloat(RegExp.$1)/100}}else{_result=_current[_h.__getStyleName(_name)]||""}_event.value=_result})}();_h.__applyStyle=_h.__applyStyle._$aop(function(_event){var _args=_event.args,_name=_args[1].toLowerCase();if(_name=="opacity"&&!(_name in document.body.style)){_args[1]="filter";_args[2]="alpha(opacity="+_args[2]*100+")"}});_h.__applyCSSText=function(){var _max=30;return _h.__applyCSSText._$aop(function(_event){var _element=_event.args[0];if(!_element.styleSheet)return;_event.stopped=!0;var _css=_event.args[1];var _list=document.styleSheets;if(_list.length>_max){_element=_list[_max];_css=_element.cssText+_css}else{_element=_element.styleSheet}_element.cssText=_css})}();_h.__appendCSSText=_h.__appendCSSText._$aop(function(_event){var _args=_event.args,_sheet=_args[0].sheet;if(!!_sheet)return;_event.stopped=!0;var _sheet=_args[0].styleSheet,_length=_sheet.rules.length,_arr=_args[1].split(/[\{\}]/);_sheet.addRule(_arr[0],_arr[1],_length);_event.value=_sheet.rules[_length]});_h.__focusElement=function(){var _onBlur=function(_clazz,_event){_e._$delClassName(_v._$getElement(_event),_clazz)};return _h.__focusElement._$aop(function(_event){if(_p._$KERNEL.release>="4.0")return;var _args=_event.args;if(_args[1]!=1){_v._$addEvent(_args[0],"blur",_onBlur._$bind(null,_args[2]));_args[1]=-1}})}();_h.__canFlashEventBubble=function(_wmode){return!0};_h.__getAttribute=_h.__getAttribute._$aop(function(_event){var _args=_event.args,_node=(_args[0].attributes||_o)[_args[1]];if(!!_node){_event.stopped=!0;_event.value=_node.value}},function(_event){var _args=_event.args;if(_args[1]=="maxlength"&&_event.value==2147483647)_event.value=""});if(_p._$KERNEL.release<5){_h.__pushHistory=function(){var _timer,_iframe,_queue=[],_hflag="cb-"+ +(new Date),_content='<script>parent.nej.h["'+_hflag+'"] = !0;parent.location.hash = decodeURIComponent("#<HASH>");</scr'+"ipt>";var _doCheckQueue=function(){_timer=window.clearTimeout(_timer);if(!_queue.length)return;var _hash=_queue.shift();try{var _document=_iframe.contentWindow.document;_document.open();_document.write("<head><title>");_document.write(document.title);_document.write("</title>");_document.write(_content.replace("#<HASH>",encodeURIComponent(_hash)));_document.write("</head><body></body>");if(location.hostname!=document.domain)_document.domain=document.domain;_document.close();_h[_hflag]=!1}catch(ex){console.log(ex.message||ex);_queue.unshift(_hash)}_timer=window.setTimeout(_doCheckQueue,50)};return _h.__pushHistory._$aop(function(_event){_event.stopped=!0;var _hash=_event.args[0];if(!!_h[_hflag]||!_iframe&&!_hash)return;_queue.push(_hash);if(!_iframe)_iframe=_e._$createXFrame();_doCheckQueue()})}()}try{document.execCommand("BackgroundImageCache",!1,!0)}catch(e){}})();
(function(){var _=NEJ.P,_v=_("nej.v"),_e=_("nej.e"),_h=_("nej.h"),_p=_("nej.p"),_support=_p._$SUPPORT;if(_p._$NOT_PATCH.gecko)return;var _doInit=function(){_support.css3d=_support.css3d||"MozPerspective"in document.body.style;if(!document.body.insertAdjacentElement)HTMLElement.prototype.insertAdjacentElement=function(_where,_element){if(!_where||!_element)return;switch(_where){case"beforeEnd":this.appendChild(_element);return;case"beforeBegin":this.parentNode.insertBefore(_element,this);return;case"afterBegin":!this.firstChild?this.appendChild(_element):this.insertBefore(_element,this.firstChild);return;case"afterEnd":!this.nextSibling?this.parentNode.appendChild(_element):this.parentNode.insertBefore(_element,this.nextSibling);return}};if(!("innerText"in document.body)){HTMLElement.prototype["__defineGetter__"]("innerText",function(){return this.textContent});HTMLElement.prototype["__defineSetter__"]("innerText",function(_content){this.textContent=_content})}};_h.__checkEvent=function(){var _reg0=/^(?:transitionend|animationend|animationstart|animationiteration)$/i;return _h.__checkEvent._$aop(function(_event){var _args=_event.args;if(_reg0.test(_args[1]||"")){_event.stopped=!0;_event.value=_args}})}();_h.__checkEventType=function(){var _emap={mousewheel:"MozMousePixelScroll",MozMousePixelScroll:!0};return _h.__checkEventType._$aop(_h.__checkEventTypeWithConf._$bind(_h,_emap))}();_h.__checkEventHandler=function(){var _doMouseWheel=function(_id,_handler,_event){var _element=_e._$get(_id);if(!!_element){var _delta=_event.detail;_event.wheelDelta=-_delta;_event.wheelDeltaY=-_delta;_event.wheelDeltaX=0;_handler.call(_element,_event)}};return _h.__checkEventHandler._$aop(function(_event){var _args=_event.args,_type=_args[0],_handler=_args[1],_id=_e._$id(_args[2]);if(_type=="MozMousePixelScroll"){_event.stopped=!0;_event.value=_doMouseWheel._$bind(null,_id,_handler)}})}();_h.__handleFileLabelClick=function(){var _doLabelClick=function(_event){_v._$stop(_event);_v._$getElement(_event).control.click()};return function(_element){_v._$addEvent(_element,"click",_doLabelClick)}}();_doInit()})();
(function(){var _=NEJ.P,_e=_("nej.e"),_h=_("nej.h");var __hasClassMethod=function(){var _test=!!document.body.classList;return function(){return _test}}();var __getClassRegExp=function(){var _reg=/\s+/g;return function(_class){_class=(_class||"").trim();return!_class?null:new RegExp("(\\s|^)(?:"+_class.replace(_reg,"|")+")(?=\\s|$)","g")}}();_h.__replaceClassName=_h.__replaceClassName._$aop(function(_event){if(__hasClassMethod())return;_event.stopped=!0;var _args=_event.args,_element=_e._$get(_args[0]);if(!_element||!_args[1]&&!_args[2])return;var _class=_element.className||"";var _add=" "+(_args[2]||""),_del=__getClassRegExp((_args[1]||"")+_add);!!_del&&(_class=_class.replace(_del,"$1"));_element.className=(_class+_add).replace(/\s+/g," ").trim()});_h.__addClassName=_h.__addClassName._$aop(function(_event){if(__hasClassMethod())return;_event.stopped=!0;var _args=_event.args;_h.__replaceClassName(_args[0],"",_args[1])});_h.__delClassName=_h.__delClassName._$aop(function(_event){if(__hasClassMethod())return;_event.stopped=!0;var _args=_event.args;_h.__replaceClassName(_args[0],_args[1],"")});_h.__hasClassName=_h.__hasClassName._$aop(function(_event){if(__hasClassMethod())return;_event.stopped=!0;var _args=_event.args,_element=_e._$get(_args[0]);if(!_element){_event.value=!1;return}var _reg=__getClassRegExp(_args[1]);_event.value=!_reg?!1:_reg.test(_element.className||"")})})();
(function(){var _=NEJ.P,_e=_("nej.e"),_v=_("nej.v"),_p=_("nej.p"),_h=_("nej.h");if(_p._$NOT_PATCH.webkit)return;_h.__checkEventType=function(){var _emap={mouseenter:"mouseover",mouseleave:"mouseout"};return _h.__checkEventType._$aop(_h.__checkEventTypeWithConf._$bind(_h,_emap))}();_h.__checkEventHandler=function(){var _cache={};var _doCheckElement=function(_id,_element){return _id==_element.id};var _doCheckCache=function(_id,_state,_event){var _key=_id+"-timer";_cache[_key]=window.clearTimeout(_cache[_key]);var _element=_v._$getElement(_event,_doCheckElement._$bind(null,_id));if(!_element)return;_v._$stopBubble(_event);if(_cache[_id]!=_state){_cache[_id]=_state;return _element}};var _doMouseEnter=function(_id,_handler,_event){var _element=_doCheckCache(_id,"over",_event);if(!!_element){_handler.call(_element,_event)}};var _doMouseLeave=function(_id,_handler,_event){var _element=_doCheckCache(_id,"out",_event);if(!!_element){_cache[_id+"-timer"]=window.setTimeout(_doMouseLeaveCheck._$bind(null,_id,_handler,NEJ.X({},_event)),50)}};var _doMouseLeaveCheck=function(_id,_handler,_event){delete _cache[_id+"-timer"];if(_cache[_id]=="out"){var _element=_e._$get(_id);_handler.call(_element,_event)}};return _h.__checkEventHandler._$aop(function(_event){var _args=_event.args,_type=_args[0],_handler=_args[1],_id=_e._$id(_args[2]);switch(_type){case"mouseover":_event.stopped=!0;_event.value=_doMouseEnter._$bind(null,_id,_handler);break;case"mouseout":_event.stopped=!0;_event.value=_doMouseLeave._$bind(null,_id,_handler);break}})}();_h.__canFlashEventBubble=function(_wmode){return!0}})();
(function(){var o=!0,w=null;(function(B){function v(a){if("bug-string-char-index"==a)return"a"!="a"[0];var f,c="json"==a;if(c||"json-stringify"==a||"json-parse"==a){if("json-stringify"==a||c){var d=k.stringify,b="function"==typeof d&&l;if(b){(f=function(){return 1}).toJSON=f;try{b="0"===d(0)&&"0"===d(new Number)&&'""'==d(new String)&&d(m)===r&&d(r)===r&&d()===r&&"1"===d(f)&&"[1]"==d([f])&&"[null]"==d([r])&&"null"==d(w)&&"[null,null,null]"==d([r,m,w])&&'{"a":[1,true,false,null,"\\u0000\\b\\n\\f\\r\\t"]}'==d({a:[f,o,!1,w,"\0\b\n\f\r\t"]})&&"1"===d(w,f)&&"[\n 1,\n 2\n]"==d([1,2],w,1)&&'"-271821-04-20T00:00:00.000Z"'==d(new Date(-864e13))&&'"+275760-09-13T00:00:00.000Z"'==d(new Date(864e13))&&'"-000001-01-01T00:00:00.000Z"'==d(new Date(-621987552e5))&&'"1969-12-31T23:59:59.999Z"'==d(new Date(-1))}catch(n){b=!1}}if(!c)return b}if("json-parse"==a||c){a=k.parse;if("function"==typeof a)try{if(0===a("0")&&!a(!1)){f=a('{"a":[1,true,false,null,"\\u0000\\b\\n\\f\\r\\t"]}');var e=5==f.a.length&&1===f.a[0];if(e){try{e=!a('"\t"')}catch(g){}if(e)try{e=1!==a("01")}catch(i){}}}}catch(O){e=!1}if(!c)return e}return b&&e}}var m={}.toString,p,C,r,D=typeof define==="function"&&define.amd,k="object"==typeof exports&&exports;k||D?"object"==typeof JSON&&JSON?k?(k.stringify=JSON.stringify,k.parse=JSON.parse):k=JSON:D&&(k=B.JSON={}):k=B.JSON||(B.JSON={});var l=new Date(-0xc782b5b800cec);try{l=-109252==l.getUTCFullYear()&&0===l.getUTCMonth()&&1===l.getUTCDate()&&10==l.getUTCHours()&&37==l.getUTCMinutes()&&6==l.getUTCSeconds()&&708==l.getUTCMilliseconds()}catch(P){}if(!v("json")){var s=v("bug-string-char-index");if(!l)var t=Math.floor,J=[0,31,59,90,120,151,181,212,243,273,304,334],z=function(a,f){return J[f]+365*(a-1970)+t((a-1969+(f=+(f>1)))/4)-t((a-1901+f)/100)+t((a-1601+f)/400)};if(!(p={}.hasOwnProperty))p=function(a){var f={},c;if((f.__proto__=w,f.__proto__={toString:1},f).toString!=m)p=function(a){var f=this.__proto__,a=a in(this.__proto__=w,this);this.__proto__=f;return a};else{c=f.constructor;p=function(a){var f=(this.constructor||c).prototype;return a in this&&!(a in f&&this[a]===f[a])}}f=w;return p.call(this,a)};var K={"boolean":1,number:1,string:1,"undefined":1};C=function(a,f){var c=0,b,h,n;(b=function(){this.valueOf=0}).prototype.valueOf=0;h=new b;for(n in h)p.call(h,n)&&c++;b=h=w;if(c)c=c==2?function(a,f){var c={},b=m.call(a)=="[object Function]",d;for(d in a)!(b&&d=="prototype")&&!p.call(c,d)&&(c[d]=1)&&p.call(a,d)&&f(d)}:function(a,f){var c=m.call(a)=="[object Function]",b,d;for(b in a)!(c&&b=="prototype")&&p.call(a,b)&&!(d=b==="constructor")&&f(b);(d||p.call(a,b="constructor"))&&f(b)};else{h=["valueOf","toString","toLocaleString","propertyIsEnumerable","isPrototypeOf","hasOwnProperty","constructor"];c=function(a,f){var c=m.call(a)=="[object Function]",b,d;if(d=!c)if(d=typeof a.constructor!="function"){d=typeof a.hasOwnProperty;d=d=="object"?!!a.hasOwnProperty:!K[d]}d=d?a.hasOwnProperty:p;for(b in a)!(c&&b=="prototype")&&d.call(a,b)&&f(b);for(c=h.length;b=h[--c];d.call(a,b)&&f(b));}}c(a,f)};if(!v("json-stringify")){var L={92:"\\\\",34:'\\"',8:"\\b",12:"\\f",10:"\\n",13:"\\r",9:"\\t"},u=function(a,f){return("000000"+(f||0)).slice(-a)},G=function(a){var f='"',b=0,d=a.length,h=d>10&&s,n;for(h&&(n=a.split(""));b<d;b++){var e=a.charCodeAt(b);switch(e){case 8:case 9:case 10:case 12:case 13:case 34:case 92:f=f+L[e];break;default:if(e<32){f=f+("\\u00"+u(2,e.toString(16)));break}f=f+(h?n[b]:s?a.charAt(b):a[b])}}return f+'"'},E=function(a,b,c,d,h,n,e){var g=b[a],i,j,k,l,q,s,v,x,y;try{g=b[a]}catch(A){}if(typeof g=="object"&&g){i=m.call(g);if(i=="[object Date]"&&!p.call(g,"toJSON"))if(g>-1/0&&g<1/0){if(z){k=t(g/864e5);for(i=t(k/365.2425)+1970-1;z(i+1,0)<=k;i++);for(j=t((k-z(i,0))/30.42);z(i,j+1)<=k;j++);k=1+k-z(i,j);l=(g%864e5+864e5)%864e5;q=t(l/36e5)%24;s=t(l/6e4)%60;v=t(l/1e3)%60;l=l%1e3}else{i=g.getUTCFullYear();j=g.getUTCMonth();k=g.getUTCDate();q=g.getUTCHours();s=g.getUTCMinutes();v=g.getUTCSeconds();l=g.getUTCMilliseconds()}g=(i<=0||i>=1e4?(i<0?"-":"+")+u(6,i<0?-i:i):u(4,i))+"-"+u(2,j+1)+"-"+u(2,k)+"T"+u(2,q)+":"+u(2,s)+":"+u(2,v)+"."+u(3,l)+"Z"}else g=w;else if(typeof g.toJSON=="function"&&(i!="[object Number]"&&i!="[object String]"&&i!="[object Array]"||p.call(g,"toJSON")))g=g.toJSON(a)}c&&(g=c.call(b,a,g));if(g===w)return"null";i=m.call(g);if(i=="[object Boolean]")return""+g;if(i=="[object Number]")return g>-1/0&&g<1/0?""+g:"null";if(i=="[object String]")return G(""+g);if(typeof g=="object"){for(a=e.length;a--;)if(e[a]===g)throw TypeError();e.push(g);x=[];b=n;n=n+h;if(i=="[object Array]"){j=0;for(a=g.length;j<a;y||(y=o),j++){i=E(j,g,c,d,h,n,e);x.push(i===r?"null":i)}a=y?h?"[\n"+n+x.join(",\n"+n)+"\n"+b+"]":"["+x.join(",")+"]":"[]"}else{C(d||g,function(a){var b=E(a,g,c,d,h,n,e);b!==r&&x.push(G(a)+":"+(h?" ":"")+b);y||(y=o)});a=y?h?"{\n"+n+x.join(",\n"+n)+"\n"+b+"}":"{"+x.join(",")+"}":"{}"}e.pop();return a}};k.stringify=function(a,b,c){var d,h,j;if(typeof b=="function"||typeof b=="object"&&b)if(m.call(b)=="[object Function]")h=b;else if(m.call(b)=="[object Array]"){j={};for(var e=0,g=b.length,i;e<g;i=b[e++],(m.call(i)=="[object String]"||m.call(i)=="[object Number]")&&(j[i]=1));}if(c)if(m.call(c)=="[object Number]"){if((c=c-c%1)>0){d="";for(c>10&&(c=10);d.length<c;d=d+" ");}}else m.call(c)=="[object String]"&&(d=c.length<=10?c:c.slice(0,10));return E("",(i={},i[""]=a,i),h,j,d,"",[])}}if(!v("json-parse")){var M=String.fromCharCode,N={92:"\\",34:'"',47:"/",98:"\b",116:"\t",110:"\n",102:"\f",114:"\r"},b,A,j=function(){b=A=w;throw SyntaxError()},q=function(){for(var a=A,f=a.length,c,d,h,k,e;b<f;){e=a.charCodeAt(b);switch(e){case 9:case 10:case 13:case 32:b++;break;case 123:case 125:case 91:case 93:case 58:case 44:c=s?a.charAt(b):a[b];b++;return c;case 34:c="@";for(b++;b<f;){e=a.charCodeAt(b);if(e<32)j();else if(e==92){e=a.charCodeAt(++b);switch(e){case 92:case 34:case 47:case 98:case 116:case 110:case 102:case 114:c=c+N[e];b++;break;case 117:d=++b;for(h=b+4;b<h;b++){e=a.charCodeAt(b);e>=48&&e<=57||e>=97&&e<=102||e>=65&&e<=70||j()}c=c+M("0x"+a.slice(d,b));break;default:j()}}else{if(e==34)break;e=a.charCodeAt(b);for(d=b;e>=32&&e!=92&&e!=34;)e=a.charCodeAt(++b);c=c+a.slice(d,b)}}if(a.charCodeAt(b)==34){b++;return c}j();default:d=b;if(e==45){k=o;e=a.charCodeAt(++b)}if(e>=48&&e<=57){for(e==48&&(e=a.charCodeAt(b+1),e>=48&&e<=57)&&j();b<f&&(e=a.charCodeAt(b),e>=48&&e<=57);b++);if(a.charCodeAt(b)==46){for(h=++b;h<f&&(e=a.charCodeAt(h),e>=48&&e<=57);h++);h==b&&j();b=h}e=a.charCodeAt(b);if(e==101||e==69){e=a.charCodeAt(++b);(e==43||e==45)&&b++;for(h=b;h<f&&(e=a.charCodeAt(h),e>=48&&e<=57);h++);h==b&&j();b=h}return+a.slice(d,b)}k&&j();if(a.slice(b,b+4)=="true"){b=b+4;return o}if(a.slice(b,b+5)=="false"){b=b+5;return false}if(a.slice(b,b+4)=="null"){b=b+4;return w}j()}}return"$"},F=function(a){var b,c;a=="$"&&j();if(typeof a=="string"){if((s?a.charAt(0):a[0])=="@")return a.slice(1);if(a=="["){for(b=[];;c||(c=o)){a=q();if(a=="]")break;if(c)if(a==","){a=q();a=="]"&&j()}else j();a==","&&j();b.push(F(a))}return b}if(a=="{"){for(b={};;c||(c=o)){a=q();if(a=="}")break;if(c)if(a==","){a=q();a=="}"&&j()}else j();(a==","||typeof a!="string"||(s?a.charAt(0):a[0])!="@"||q()!=":")&&j();b[a.slice(1)]=F(q())}return b}j()}return a},I=function(a,b,c){c=H(a,b,c);c===r?delete a[b]:a[b]=c},H=function(a,b,c){var d=a[b],h;if(typeof d=="object"&&d)if(m.call(d)=="[object Array]")for(h=d.length;h--;)I(d,h,c);else C(d,function(a){I(d,a,c)});return c.call(a,b,d)};k.parse=function(a,f){var c,d;b=0;A=""+a;c=F(q());q()!="$"&&j();b=A=w;return f&&m.call(f)=="[object Function]"?H((d={},d[""]=c,d),"",f):c}}}D&&define(function(){return k})})(this)})();
(function(){var _=NEJ.P,_p=_("nej.p");if(_p._$NOT_PATCH.trident0)return;JSON.parse=function(){var _isSafeJSON=function(_content){return!/[^,:{}\[\]0-9.\-+Eaeflnr-u \n\r\t]/.test(_content.replace(/"(\\.|[^"\\])*"/g,""))};return JSON.parse._$aop(function(_event){var _str=_event.args[0]||"";if(_str.length>=5e5){_event.stopped=!0;_event.value=eval("("+_str+")")}})}()})();
(function(){var _=NEJ.P,_o=NEJ.O,_f=NEJ.F,_g=_("nej.g"),_e=_("nej.e"),_u=_("nej.u"),_v=_("nej.v"),_h=_("nej.h"),_x=_("nej.x"),_cspol,_empol={},_cache=document.createDocumentFragment();_e._$id=_x._$id=function(_element){_element=_e._$get(_element);if(!_element)return;var _id=!!_element.id?_element.id:"auto-id-"+_u._$randString(16);_element.id=_id;if(_e._$get(_id)!=_element)_empol[_id]=_element;return _id};_e._$get=_x._$get=function(_element){var _node=_empol[""+_element];if(!!_node)return _node;if(!_u._$isString(_element)&&!_u._$isNumber(_element))return _element;return document.getElementById(_element)};_e._$getChildren=_x._$getChildren=function(_element,_clazz){_element=_e._$get(_element);if(!_element)return null;var _list=_h.__getChildren(_element);if(!!_clazz)_u._$reverseEach(_list,function(_node,_index){if(!_e._$hasClassName(_node,_clazz))_list.splice(_index,1)});return _list};_e._$getByClassName=_x._$getByClassName=function(_element,_class){_element=_e._$get(_element);return!_element?null:_h.__getElementsByClassName(_element,_class.trim())};_e._$getScrollViewPort=_x._$getScrollViewPort=function(_element){_element=_e._$get(_element);if(!!_element){_element=_element.parentNode;while(!!_element){if(_element.scrollHeight>_element.clientHeight)break;_element=_element.parentNode}if(!!_element)return _element}var _tmp1=document.body.scrollHeight,_tmp2=document.documentElement.scrollHeight;return _tmp2>=_tmp1?document.documentElement:document.body};_e._$getPageBox=function(){var _getClientBox=function(_list){var _result=0;_u._$forEach(_list,function(_size){if(!_size)return;if(!_result){_result=_size}else{_result=Math.min(_result,_size)}});return _result};return function(_document){var _doc=_document||document,_body0=_doc.body,_body1=_doc.documentElement,_result={scrollTop:Math.max(_body0.scrollTop,_body1.scrollTop),scrollLeft:Math.max(_body0.scrollLeft,_body1.scrollLeft),clientWidth:_getClientBox([_body0.clientWidth,_body0.offsetWidth,_body1.clientWidth,_body1.offsetWidth]),clientHeight:_getClientBox([_body0.clientHeight,_body0.offsetHeight,_body1.clientHeight,_body1.offsetHeight])};_result.scrollWidth=Math.max(_result.clientWidth,_body0.scrollWidth,_body1.scrollWidth);_result.scrollHeight=Math.max(_result.clientHeight,_body0.scrollHeight,_body1.scrollHeight);return _result}}();_e._$getMaxBox=function(_max,_org){var _result=NEJ.X({},_org),_mrto=_max.width/_max.height,_orto=_org.width/_org.height;if(_mrto>_orto&&_org.height>_max.height){_result.height=_max.height;_result.width=_result.height*_orto}if(_mrto<_orto&&_org.width>_max.width){_result.width=_max.width;_result.height=_result.width/_orto}return _result};_e._$align=function(){var _reg=/\s+/;var _fmap={left:function(){return 0},center:function(_box,_org){return(_box.width-_org.width)/2},right:function(_box,_org){return _box.width-_org.width},top:function(){return 0},middle:function(_box,_org){return(_box.height-_org.height)/2},bottom:function(_box,_org){return _box.height-_org.height}};return function(_box,_org,_align){var _result={},_arr=(_align||"").split(_reg),_top=_fmap[_arr[1]]||_fmap.middle,_left=_fmap[_arr[0]]||_fmap.center;_result.top=_top(_box,_org);_result.left=_left(_box,_org);return _result}}();_e._$hover=_x._$hover=function(_element,_clazz){_h.__hoverElement(_element,_clazz||_e._$dataset(_element,"hover")||"js-hover");return this};_e._$fixed=_x._$fixed=function(_element){_element=_e._$get(_element);if(!_element)return;_h.__fixedElement(_element)};_e._$highlight=_x._$highlight=function(){var _cache={},_distance=2;var _doTouchStart=function(_id,_clazz,_event){_cache[_id]=[_v._$pageX(_event),_v._$pageY(_event)];_e._$addClassName(_id,_clazz)};var _doTouchMove=function(_id,_clazz,_event){var _point=_cache[_id];if(!_u._$isArray(_point))return;var _dx=Math.abs(_v._$pageX(_event)-_point[0]),_dy=Math.abs(_v._$pageY(_event)-_point[1]);if(_dx>_distance||_dy>_distance)_doTouchEnd(_id,_clazz)};var _doTouchEnd=function(_id,_clazz){if(_u._$isArray(_cache[_id])){_cache[_id]=-1;_e._$delClassName(_id,_clazz)}};return function(_element,_clazz){var _id=_e._$id(_element);if(!_id||_cache[_id]!=null)return;_cache[_id]=-1;_clazz=_clazz||_e._$dataset(_id,"highlight")||"js-highlight";_v._$addEvent(_id,"touchstart",_doTouchStart._$bind(null,_id,_clazz));_v._$addEvent(document,"touchmove",_doTouchMove._$bind(null,_id,_clazz));_v._$addEvent(document,"touchend",_doTouchEnd._$bind(null,_id,_clazz));_v._$addEvent(document,"touchcancel",_doTouchEnd._$bind(null,_id,_clazz))}}();_e._$toggle=_x._$toggle=function(){var _doClick=function(_id,_clazz,_ontoggle){var _element=_e._$get(_id),_event={clazz:_clazz,target:_element};if(_e._$hasClassName(_element,_clazz)){_event.toggled=!1;_e._$delClassName(_element,_clazz)}else{_event.toggled=!0;_e._$addClassName(_element,_clazz)}_ontoggle.call(null,_event)};return function(_element,_options){_element=_e._$get(_element);if(!!_element){var _obj={ontoggle:_f,clazz:"js-toggle",element:_element.parentNode};if(_u._$isString(_options)){var _node=_e._$get(_options);!!_node?_obj.element=_node:_obj.clazz=_options}else{NEJ.EX(_obj,_options);_obj.element=_e._$get(_obj.element)}var _id=_e._$id(_obj.element);_v._$addEvent(_element,"click",_doClick._$bind(null,_id,_obj.clazz,_obj.ontoggle||_f))}return this}}();_e._$focus=_x._$focus=function(_element,_options){_element=_e._$get(_element);if(!_element)return;var _mode=0,_clazz="js-focus";if(_u._$isNumber(_options)){_mode=_options}else if(_u._$isString(_options)){_clazz=_options}else if(_u._$isObject(_options)){_mode=_options.mode||_mode;_clazz=_options.clazz||_clazz}var _value=parseInt(_e._$dataset(_element,"mode"));if(!isNaN(_value))_mode=_value;_value=_e._$dataset(_element,"focus");if(!!_value)_clazz=_value;_h.__focusElement(_element,_mode,_clazz);return this};_e._$create=function(){var _map={a:{href:"#",hideFocus:!0},style:{type:"text/css"},link:{type:"text/css",rel:"stylesheet"},iframe:{frameBorder:0},script:{defer:!0,type:"text/javascript"}};return function(_tag,_class,_parent){var _element=document.createElement(_tag);NEJ.X(_element,_map[_tag.toLowerCase()]);if(!!_class)_element.className=_class;_parent=_e._$get(_parent);if(!!_parent)_parent.appendChild(_element);return _element}}();_e._$createXFrame=function(){var _getFrameSrc=function(){if(location.hostname==document.domain)return"about:blank";return'javascript:(function(){document.open();document.domain="'+document.domain+'";document.close();})();'};var _getFrameWithName=function(_name){_name=_name.trim();if(!_name)return _e._$create("iframe");var _iframe;try{_iframe=document.createElement('<iframe name="'+_name+'"></iframe>');_iframe.frameBorder=0}catch(e){_iframe=_e._$create("iframe");_iframe.name=_name}return _iframe};return function(_options){_options=_options||_o;var _iframe=_getFrameWithName(_options.name||"");if(!_options.visible)_iframe.style.display="none";if(_u._$isFunction(_options.onload))_v._$addEvent(_iframe,"load",function(_event){if(!_iframe.src)return;_v._$clearEvent(_iframe,"load");_options.onload(_event)});var _parent=_options.parent;if(_u._$isFunction(_parent)){try{_parent(_iframe)}catch(e){}}else{(_e._$get(_parent)||document.body).appendChild(_iframe)}var _src=_options.src||_getFrameSrc();window.setTimeout(function(){_iframe.src=_src},0);return _iframe}}();_e._$remove=_x._$remove=function(){var _clearImage=function(_image){_image.src=_g._$BLANK_IMAGE};var _clearFrame=function(_frame){_frame.src="about:blank"};return function(_element,_nocls){_element=_e._$get(_element);if(!_element)return this;if(!_nocls)_v._$clearEvent(_element);delete _empol[_element.id];var _tag=_element.tagName;if(_tag=="IFRAME"){_clearFrame(_element)}else if(_tag=="IMG"){_clearImage(_element)}else if(!!_element.getElementsByTagName){_u._$forEach(_element.getElementsByTagName("img"),_clearImage);_u._$forEach(_element.getElementsByTagName("iframe"),_clearFrame)}if(!!_element.parentNode){_element.parentNode.removeChild(_element)}return this}}();_e._$removeByEC=_x._$removeByEC=function(_element){_element=_e._$get(_element);if(!!_element)_cache.appendChild(_element);return this};_e._$clearChildren=_x._$clearChildren=function(_element){_element=_e._$get(_element);if(!_element)return;_u._$reverseEach(_element.childNodes,function(_node){_e._$remove(_node)})};_e._$wrapInline=_x._$wrapInline=function(){var _clazz,_reg0=/\s+/;var _doInitStyle=function(){if(!!_clazz)return;_clazz=_e._$pushCSSText(".#<uispace>{position:relative;zoom:1;}.#<uispace>-show{position:absolute;top:0;left:100%;cursor:text;white-space:nowrap;overflow:hidden;}");_e._$dumpCSSText()};return function(_element,_options){_element=_e._$get(_element);if(!_element)return;_doInitStyle();_options=_options||_o;var _parent=_element.parentNode;if(!_e._$hasClassName(_parent,_clazz)){_parent=_e._$create("span",_clazz);_element.insertAdjacentElement("beforeBegin",_parent);_parent.appendChild(_element)}var _nid=_options.nid||"",_node=_e._$getByClassName(_parent,_nid||_clazz+"-show")[0];if(!_node){var _klass=((_options.clazz||"")+" "+_nid).trim();_klass=_clazz+"-show"+(!_klass?"":" ")+_klass;_node=_e._$create(_options.tag||"span",_klass);_parent.appendChild(_node)}var _klass=_options.clazz;if(!!_klass){_klass=(_klass||"").trim().split(_reg0)[0]+"-parent";_e._$addClassName(_parent,_klass)}return _node}}();_e._$dataset=_x._$dataset=function(){var _dataset={},_tag="data-",_reg=/\-(.{1})/gi;var _init=function(_element){var _id=_e._$id(_element);if(!!_dataset[_id])return;var _map={};_u._$forEach(_element.attributes,function(_node){var _key=_node.nodeName;if(_key.indexOf(_tag)!=0)return;_key=_key.replace(_tag,"").replace(_reg,function($1,$2){return $2.toUpperCase()});_map[_key]=_node.nodeValue||""});_dataset[_id]=_map};return function(_element,_key,_value){_element=_e._$get(_element);if(!_element)return null;var _set=_element.dataset;if(!_set){_init(_element);_set=_dataset[_element.id]}if(_value!==undefined)_set[_key]=_value;return _set[_key]}}();_e._$attr=_x._$attr=function(_element,_name,_value){_element=_e._$get(_element);if(!_element)return"";if(_value!==undefined&&!!_element.setAttribute)_element.setAttribute(_name,_value);return _h.__getAttribute(_element,_name)};_e._$html2node=function(_html){var _div=document.createElement("div");_div.innerHTML=_html;var _list=_e._$getChildren(_div);return _list.length>1?_div:_list[0]};_e._$dom2xml=_x._$dom2xml=function(_element){_element=_e._$get(_element);return!_element?"":_h.__serializeDOM2XML(_element)};_e._$xml2dom=function(_xml){_xml=(_xml||"").trim();return!_xml?null:_h.__parseDOMFromXML(_xml)};_e._$text2type=function(_text,_type){_text=_text||"";switch(_type){case"xml":_text=_e._$xml2dom(_text);break;case"json":try{_text=JSON.parse(_text)}catch(ex){_text=null}break}return _text};_e._$offset=_x._$offset=function(){var _isRoot=function(_element){return _element==document.body||_element==document.documentElement};return function(_from,_to){_from=_e._$get(_from);if(!_from)return null;_to=_e._$get(_to)||null;var _result={x:0,y:0},_isroot,_delta,_border;while(!!_from&&_from!=_to){_isroot=_isRoot(_from);_delta=_isroot?0:_from.scrollLeft;_border=parseInt(_e._$getStyle(_from,"borderLeftWidth"))||0;_result.x+=_from.offsetLeft+_border-_delta;_delta=_isroot?0:_from.scrollTop;_border=parseInt(_e._$getStyle(_from,"borderTopWidth"))||0;_result.y+=_from.offsetTop+_border-_delta;_from=_from.offsetParent}return _result}}();_e._$scrollTo=_x._$scrollTo=function(_element){var _offset=_e._$offset(_element);window.scrollTo(_offset.x,_offset.y);return this};_e._$matrix=function(_matrix){_matrix=(_matrix||"").trim();return _h.__getCSSMatrix(_matrix)};_e._$css3d=_x._$css3d=function(_element,_name,_map){_element=_e._$get(_element);if(!_element)return this;var _value=_h.__getTransformValue(_name,_map);if(!_value)return this;_e._$setStyle(_element,"transform",_value);return this};_e._$style=_x._$style=function(_element,_map){_element=_e._$get(_element);if(!!_element)_u._$forIn(_map,function(_value,_name){_e._$setStyle(_element,_name,_value)});return this};_e._$cursor=_x._$cursor=function(_textarea,_options){_textarea=_e._$get(_textarea);if(!_textarea)return{start:0,end:0};if(_u._$isNumber(_options))_options={start:_options,end:_options};if(_options!=null){if(_options.end==null)_options.end=_options.start||0;_h.__setCursorPosition(_textarea,_options)}else{_options=_h.__getCursorPosition(_textarea)}return _options};_e._$setStyle=_x._$setStyle=function(_element,_name,_value){_element=_e._$get(_element);if(!!_element)_h.__applyStyle(_element,_name,_value);return this};_e._$getStyle=_x._$getStyle=function(_element,_name){_element=_e._$get(_element);if(!_element)return"";return _h.__getStyleValue(_element,_name)};_e._$addStyle=function(){var _reg=/[\s\r\n]+/gi;return function(_style){_style=(_style||"").trim().replace(_reg," ");if(!_style)return;var _node=_e._$create("style");document.head.appendChild(_node);_h.__applyCSSText(_node,_h.__filterCSSText(_style));return _node}}();_e._$addScript=function(_script){try{_script=_script.trim();if(!!_script)return(new Function(_script))()}catch(ex){console.error(ex.message);console.error(ex.stack)}};_e._$pushCSSText=function(){var _reg=/#<.*?>/g,_seed=+(new Date);return function(_css){if(!_cspol)_cspol=[];var _class="auto-"+_seed++;_cspol.push(_css.replace(_reg,_class));return _class}}();_e._$dumpCSSText=function(){if(!!_cspol){_e._$addStyle(_cspol.join(""));_cspol=null}return this};_e._$appendCSSText=function(_style,_css){_style=_e._$get(_style);return!_style?null:_h.__appendCSSText(_style,_css)};_e._$addClassName=_x._$addClassName=function(){_h.__addClassName.apply(_h,arguments);return this};_e._$delClassName=_x._$delClassName=function(){_h.__delClassName.apply(_h,arguments);return this};_e._$replaceClassName=_x._$replaceClassName=function(){_h.__replaceClassName.apply(_h,arguments);return this};_e._$hasClassName=_x._$hasClassName=function(){return _h.__hasClassName.apply(_h,arguments)};if(!document.head)document.head=document.getElementsByTagName("head")[0]||document.body;_x.isChange=!0})();
(function(){var _=NEJ.P,_h=_("nej.h"),_e=_("nej.e"),_u=_("nej.u"),_v=_("nej.v"),_x=_("nej.x"),_cache={};var _doClearElement=function(_element){_element=_e._$get(_element);if(!_element||!_cache[_element.id])return;var _empty=!0,_id=_element.id;_u._$forIn(_cache[_id],function(){_empty=!1;return!0});if(_empty)delete _cache[_id]};_v._$addEvent=_x._$addEvent=function(){var _doAddEventInCache=function(){var _args=_h.__checkEvent.apply(_h,arguments);if(!_args||!_args[2])return;var _tmp0=_e._$id(_args[0]),_tmp1=_cache[_tmp0]||{};_cache[_tmp0]=_tmp1;_tmp0=_args[4]||_args[1];var _tmp2=_tmp1[_tmp0]||[];_tmp1[_tmp0]=_tmp2;_tmp2.push({type:_args[1],func:_args[2],capt:!!_args[3],sfun:_args[5]||_args[2]});return _args.slice(0,4)};return function(){var _args=_doAddEventInCache.apply(null,arguments);if(!!_args)_h.__addEvent.apply(_h,_args);return this}}();_v._$delEvent=_x._$delEvent=function(){var _doDelEventInCache=function(){var _argc=arguments,_tmp0=_e._$id(_argc[0]),_tmp1=_cache[_tmp0],_type=(_argc[1]||"").toLowerCase(),_event=_argc[2];if(!_tmp1||!_type||!_event)return;_tmp1=_tmp1[_type];if(!_tmp1)return;var _cflag=!!_argc[3],_index=_u._$indexOf(_tmp1,function(_emap){return _event==_emap.sfun&&_cflag==_emap.capt});if(_index<0)return;var _emap=_tmp1.splice(_index,1)[0];return!_emap?null:[_e._$get(_tmp0),_emap.type,_emap.func,_emap.capt]};return function(){var _args=_doDelEventInCache.apply(null,arguments);if(!!_args){_h.__delEvent.apply(_h,_args);_doClearElement(_args[0])}return this}}();_v._$clearEvent=_x._$clearEvent=function(){var _doClearByType=function(){var _argc=arguments,_tmp0=_e._$id(_argc[0]),_tmp1=_cache[_tmp0],_tmp2=(_argc[1]||"").toLowerCase();if(!_tmp1||!_tmp2)return;var _element=_e._$get(_tmp0);_u._$reverseEach(_tmp1[_tmp2],function(_emap,_index,_list){_h.__delEvent(_element,_emap.type,_emap.func,_emap.capt);_list.splice(_index,1)});delete _tmp1[_tmp2]};var _doClearAll=function(_element){_element=_e._$get(_element);if(!_element)return;var _id=_element.id;_u._$forIn(_cache[_id],function(_list,_type){_doClearByType(_id,_type)});delete _cache[_id]};return function(_element,_type){!_type?_doClearAll(_element):_doClearByType(_element,_type);_doClearElement(_element);return this}}();_v._$getElement=function(){var _exmap;var _doFilter=function(_name,_element){var _arr=_name.split(":");if(_arr.length>1){if(!_exmap)_exmap={c:_e._$hasClassName,d:_e._$dataset,a:_e._$attr};var _check=_exmap[_arr[0]];if(!!_check)return!!_check(_element,_arr[1]);_name=_arr[1]}return!!_e._$attr(_element,_name)||!!_e._$dataset(_element,_name)||_e._$hasClassName(_element,_name)};return function(_event){if(!_event)return null;var _element=_event.target||_event.srcElement,_filter=arguments[1];if(!_filter)return _element;if(_u._$isString(_filter))_filter=_doFilter._$bind(null,_filter);if(_u._$isFunction(_filter)){while(_element){if(!!_filter(_element))return _element;_element=_element.parentNode}return null}return _element}}();_v._$stop=function(_event){_v._$stopBubble(_event);_v._$stopDefault(_event);return this};_v._$stopBubble=function(_event){if(!!_event){!!_event.stopPropagation?_event.stopPropagation():_event.cancelBubble=!0}return this};_v._$stopDefault=function(_event){if(!!_event){!!_event.preventDefault?_event.preventDefault():_event.returnValue=!1}return this};_v._$stopClick=function(){var _inited=!1;var _doInitListener=function(){if(_inited)return;_inited=!0;_v._$addEvent(document,"click",_onDocumentClick,!0)};var _onDocumentClick=function(_event){var _element=_v._$getElement(_event),_stopped=_e._$dataset(_element,"stopped");if(_stopped=="true"){_v._$stop(_event);_e._$dataset(_element,"stopped","false")}};return function(_event){if(!_event)return;if(_event.type=="click"){_v._$stop(_event);return}_doInitListener();_e._$dataset(_v._$getElement(_event),"stopped","true")}}();_v._$pageX=function(_event){return _event.pageX!=null?_event.pageX:_event.clientX+_e._$getPageBox().scrollLeft};_v._$pageY=function(_event){return _event.pageY!=null?_event.pageY:_event.clientY+_e._$getPageBox().scrollTop};_v._$dispatchEvent=_x._$dispatchEvent=function(_element,_type,_options){var _args=_h.__checkEvent(_element,_type);if(!!_args)_h.__dispatchEvent(_args[0],_args[1],_options);return this};_("dbg").dumpEV=function(){return _cache};_x.isChange=!0})();
(function(){var o=NEJ.O,u=NEJ.P("nej.u"),j=NEJ.P("nej.j");j._$cookie=function(){var _date=new Date,_crut=+_date,_days=864e5;var _getcookie=function(_name){var _cookie=document.cookie,_search="\\b"+_name+"=",_index1=_cookie.search(_search);if(_index1<0)return"";_index1+=_search.length-2;var _index2=_cookie.indexOf(";",_index1);if(_index2<0)_index2=_cookie.length;return _cookie.substring(_index1,_index2)||""};return function(_name,_data){if(_data===undefined)return _getcookie(_name);if(u._$isString(_data)){if(!!_data){document.cookie=_name+"="+_data+";";return _data}_data={expires:-100}}_data=_data||o;var _cookie=_name+"="+(_data.value||"")+";";delete _data.value;if(_data.expires!==undefined){_date.setTime(_crut+_data.expires*_days);_data.expires=_date.toGMTString()}_cookie+=u._$object2string(_data,";");document.cookie=_cookie}}()})();
(function(){if(!Date.now){Date.now=function(){return(new Date).getTime()}}if(!String.prototype.trim){String.prototype.trim=function(){return this.replace(/^\s+|\s+$/g,"")}}if(!Array.prototype.indexOf){Array.prototype.indexOf=function(obj,opt_from){opt_from=parseInt(opt_from)||0;for(var i=opt_from,length=this.length;i<length;i++){if(this[i]===obj)return i}return-1}}if(!Array.isArray){Array.isArray=function(obj){return Object.prototype.toString.call(obj)==="[object Array]"}}if(!Array.prototype.forEach){Array.prototype.forEach=function(callback,opt_this){for(var i=0,length=this.length;i<length;i++){callback.call(opt_this,this[i],i,this)}}}if(!Array.prototype.revert){Array.prototype.revert=function(){var i=this.length,res=[];for(;i--;){res.push(this[i])}return res}}})();
(function(){var using=NEJ.P;var u=using("nej.u");var dc=using("dd.const");dc.TYPES=[{id:101,name:"imageText",title:"图文"},{id:1,name:"image",title:"图片",limit:{size:2,extension:["bmp","png","jpeg","jpg","gif"]}},{id:2,name:"voice",title:"语音",limit:{size:5,duration:120,extension:["mp3","wma","wav","amr"]}},{id:3,name:"video",title:"视频",limit:{size:20,extension:["mp4","rm","rmvb","wmv","avi","mpg","mpeg"]}},{id:1e3,name:"activity",title:"活动"},{id:2e3,name:"lottery",title:"抽奖"}];var emots={path:"/res/emoji/",list:[{title:"大笑",name:"emoji_0"},{title:"可爱",name:"emoji_01"},{title:"色",name:"emoji_02"},{title:"嘘",name:"emoji_03"},{title:"亲",name:"emoji_04"},{title:"呆",name:"emoji_05"},{title:"口水",name:"emoji_06"},{title:"汗",name:"emoji_145"},{title:"呲牙",name:"emoji_07"},{title:"鬼脸",name:"emoji_08"},{title:"害羞",name:"emoji_09"},{title:"偷笑",name:"emoji_10"},{title:"调皮",name:"emoji_11"},{title:"可怜",name:"emoji_12"},{title:"敲",name:"emoji_13"},{title:"惊讶",name:"emoji_14"},{title:"流感",name:"emoji_15"},{title:"委屈",name:"emoji_16"},{title:"流泪",name:"emoji_17"},{title:"嚎哭",name:"emoji_18"},{title:"惊恐",name:"emoji_19"},{title:"怒",name:"emoji_20"},{title:"酷",name:"emoji_21"},{title:"不说",name:"emoji_22"},{title:"鄙视",name:"emoji_23"},{title:"阿弥陀佛",name:"emoji_24"},{title:"奸笑",name:"emoji_25"},{title:"睡着",name:"emoji_26"},{title:"口罩",name:"emoji_27"},{title:"努力",name:"emoji_28"},{title:"抠鼻孔",name:"emoji_29"},{title:"疑问",name:"emoji_30"},{title:"怒骂",name:"emoji_31"},{title:"晕",name:"emoji_32"},{title:"呕吐",name:"emoji_33"},{title:"拜一拜",name:"emoji_160"},{title:"惊喜",name:"emoji_161"},{title:"流汗",name:"emoji_162"},{title:"卖萌",name:"emoji_163"},{title:"默契眨眼",name:"emoji_164"},{title:"烧香拜佛",name:"emoji_165"},{title:"晚安",name:"emoji_166"},{title:"强",name:"emoji_34"},{title:"弱",name:"emoji_35"},{title:"OK",name:"emoji_36"},{title:"拳头",name:"emoji_37"},{title:"胜利",name:"emoji_38"},{title:"鼓掌",name:"emoji_39"},{title:"发怒",name:"emoji_40"},{title:"骷髅",name:"emoji_41"},{title:"便便",name:"emoji_42"},{title:"火",name:"emoji_43"},{title:"溜",name:"emoji_44"},{title:"爱心",name:"emoji_45"},{title:"心碎",name:"emoji_46"},{title:"钟情",name:"emoji_47"},{title:"唇",name:"emoji_48"},{title:"戒指",name:"emoji_49"},{title:"钻石",name:"emoji_50"},{title:"太阳",name:"emoji_51"},{title:"有时晴",name:"emoji_52"},{title:"多云",name:"emoji_53"},{title:"雷",name:"emoji_54"},{title:"雨",name:"emoji_55"},{title:"雪花",name:"emoji_56"},{title:"爱人",name:"emoji_57"},{title:"帽子",name:"emoji_58"},{title:"皇冠",name:"emoji_59"},{title:"篮球",name:"emoji_60"},{title:"足球",name:"emoji_61"},{title:"垒球",name:"emoji_62"},{title:"网球",name:"emoji_63"},{title:"台球",name:"emoji_64"},{title:"咖啡",name:"emoji_65"},{title:"啤酒",name:"emoji_66"},{title:"干杯",name:"emoji_67"},{title:"柠檬汁",name:"emoji_68"},{title:"餐具",name:"emoji_69"},{title:"汉堡",name:"emoji_70"},{title:"鸡腿",name:"emoji_71"},{title:"面条",name:"emoji_72"},{title:"冰淇淋",name:"emoji_73"},{title:"沙冰",name:"emoji_74"},{title:"生日蛋糕",name:"emoji_75"},{title:"蛋糕",name:"emoji_76"},{title:"糖果",name:"emoji_77"},{title:"葡萄",name:"emoji_78"},{title:"西瓜",name:"emoji_79"},{title:"光碟",name:"emoji_80"},{title:"手机",name:"emoji_81"},{title:"电话",name:"emoji_82"},{title:"电视",name:"emoji_83"},{title:"声音开启",name:"emoji_84"},{title:"声音关闭",name:"emoji_85"},{title:"铃铛",name:"emoji_86"},{title:"锁头",name:"emoji_87"},{title:"放大镜",name:"emoji_88"},{title:"灯泡",name:"emoji_89"},{title:"锤头",name:"emoji_90"},{title:"烟",name:"emoji_91"},{title:"炸弹",name:"emoji_92"},{title:"枪",name:"emoji_93"},{title:"刀",name:"emoji_94"},{title:"药",name:"emoji_95"},{title:"打针",name:"emoji_96"},{title:"钱袋",name:"emoji_97"},{title:"钞票",name:"emoji_98"},{title:"银行卡",name:"emoji_99"},{title:"手柄",name:"emoji_100"},{title:"麻将",name:"emoji_101"},{title:"调色板",name:"emoji_102"},{title:"电影",name:"emoji_103"},{title:"麦克风",name:"emoji_104"},{title:"耳机",name:"emoji_105"},{title:"音乐",name:"emoji_106"},{title:"吉他",name:"emoji_107"},{title:"火箭",name:"emoji_108"},{title:"飞机",name:"emoji_109"},{title:"火车",name:"emoji_110"},{title:"公交",name:"emoji_111"},{title:"轿车",name:"emoji_112"},{title:"出租车",name:"emoji_113"},{title:"警车",name:"emoji_114"},{title:"自行车",name:"emoji_115"},{title:"憨笑",name:"emoji_116"},{title:"吻",name:"emoji_117"},{title:"哀伤",name:"emoji_118"},{title:"吐舌",name:"emoji_119"},{title:"撇嘴",name:"emoji_120"},{title:"痛苦",name:"emoji_121"},{title:"惶恐",name:"emoji_122"},{title:"大哭",name:"emoji_123"},{title:"开心",name:"emoji_124"},{title:"皱眉",name:"emoji_125"},{title:"喜欢",name:"emoji_126"},{title:"星星",name:"emoji_127"},{title:"生气",name:"emoji_128"},{title:"牵手",name:"emoji_129"},{title:"跳舞",name:"emoji_130"},{title:"禁止",name:"emoji_131"},{title:"示爱",name:"emoji_132"},{title:"狗",name:"emoji_133"},{title:"猫",name:"emoji_134"},{title:"猪",name:"emoji_135"},{title:"兔子",name:"emoji_136"},{title:"小鸡",name:"emoji_137"},{title:"公鸡",name:"emoji_138"},{title:"幽灵",name:"emoji_139"},{title:"圣诞",name:"emoji_140"},{title:"外星",name:"emoji_141"},{title:"礼物",name:"emoji_142"},{title:"男孩",name:"emoji_143"},{title:"女孩",name:"emoji_144"},{title:"汗",name:"emoji_145"},{title:"生病",name:"emoji_146"},{title:"这边",name:"emoji_147"},{title:"爱意",name:"emoji_148"},{title:"嘴唇",name:"emoji_149"},{title:"圈",name:"emoji_151"},{title:"叉",name:"emoji_152"}]};dc.EMOTS=[];u._$forEach(emots.list,function(item,index,that){item.url=emots.path+item.name+".png";dc.EMOTS.push(item)});dc.EMOTS_SORT=dc.EMOTS.slice();dc.EMOTS_SORT.sort(function(a,b){return b.title.length-a.title.length});dc.MAX_LIST_LENGTH=1e5})();
!function(win,doc,undefined){var nes=function(node,context){return all(node,context)},locals={};var ap=Array.prototype,op=Object.prototype,sp=String.prototype,fp=Function.prototype,slice=ap.slice,body=doc.body,testNode=doc.createElement("div"),toArray=function(arr){return slice.call(arr)},typeOf=function(o){return o==null?String(o):op.toString.call(o).slice(8,-1).toLowerCase()},extend=function(o1,o2,override){for(var i in o2){if(o1[i]==null||override)o1[i]=o2[i]}},createCache=function(max){var keys=[],cache={};return{set:function(key,value){if(keys.length>this.length){delete cache[keys.shift()]}cache[key]=value;keys.push(key);return value},get:function(key){if(key===undefined)return cache;return cache[key]},length:max,len:function(){return keys.length}}},autoSet=function(fn){return function(key,value){if(typeOf(key)=="object"){for(var i in key){fn.call(this,i,key[i])}}else{fn.call(this,key,value)}return this}},assert=function(fn){try{return fn()}catch(e){return false}finally{testNode=document.createElement("div")}};try{slice.call(doc.getElementsByTagName("body"))}catch(e){toArray=function(arr){var result=[],len=arr.length;for(var i=0;i<len;i++){result.push(arr[i])}return result}}var trimReg=/^\s+|\s+$/g;sp.trim=sp.trim||function(){return this.replace(trimReg,"")};fp.bind=fp.bind||function(context,args){args=slice.call(arguments,1);var fn=this;return function(){return fn.apply(context,args.concat(slice.call(arguments)))}};ap.indexOf=ap.indexOf||function(a){for(var i=0,len=this.length;i<len;i++){if(a===this[i])return i}return-1};var ignoredRef=/\(\?\!|\(\?\:/,extractRefNum=function(regStr){var left=0,right=0,len=regStr.length,ignored=regStr.split(ignoredRef).length-1;for(;len--;){var letter=regStr.charAt(len);if(len===0||regStr.charAt(len-1)!=="\\"){if(letter==="(")left++;if(letter===")")right++}}if(left!==right)throw regStr+"中的括号不匹配";else return left-ignored},refIndexReg=/\\(\d+)/g,extractRefIndex=function(regStr,curIndex){return regStr},keys=Object.keys||function(obj){var result=[];for(var prop in obj){if(obj.hasOwnProperty(prop))result.push(prop)}return result},cleanRule=function(rule){var reg=rule.reg;if(typeOf(reg)==="regexp")reg=reg.toString().slice(1,-1);rule.regexp=reg.replace(replaceReg,function(a,b){if(b in macros)return macros[b];else throw new Error('can"t replace undefined macros:'+b)});return rule},cleanRules=function(rules){for(var i in rules){if(rules.hasOwnProperty(i))cleanRule(rules[i])}return rules};function Parser(opts){opts=opts||{};if(opts.macros)this._macros=opts.macros;this._links={};this._rules={};this.TRUNK=null;this.cache=createCache(opts.maxCache||200);this.cache.set("",[[]])}extend(Parser.prototype,{parse:function(input){input=clean(input);if(parsed=this.cache.get(input))return parsed;var parsed=this.parsed=[[null]];var remain=this.input=input;var TRUNK=this.TRUNK;var prevRemain;while(prevRemain!=(remain=remain.replace(TRUNK,this._process.bind(this)))){prevRemain=remain}if(remain!=="")this.error(remain);return this.cache.set(input,parsed)},on:function(rules){if(typeOf(rules)==="string"){var tmp={};tmp[rules]=arguments[1];rules=tmp}for(var i in rules){var rule=rules[i];if(typeOf(rule)!=="object"){rule={regexp:rule}}var reg=rule.regexp;if(typeOf(reg)==="regexp"){rule.regexp=reg.toString().slice(1,-1)}if(rule.order===undefined)rule.order=1;this._rules[i]=rule}this.setup();return this},off:function(name){if(typeOf(name)==="array"){for(var i=name.length;i--;){this.off(name[i])}}else{if(this._rules[name]){delete this._rules[name]}}return this},current:function(){var data=this.parsed;var piece=data[data.length-1],len=piece.length;return piece[len-1]||(piece[len-1]={tag:"*"})},error:function(info){throw Error("输入  "+this.input+"  含有未识别语句:"+info||"")},clone:function(parser){return(new Parser).on(this._rules)},_process:function(){var links=this._links,rules=this._rules,args=slice.call(arguments);for(var i in links){var link=links[i],retain=link[1],index=parseInt(link[0]);if(args[index]&&(rule=rules[i])){rule.action.apply(this,args.slice(index,index+retain));return""}}return""},setup:function(){cleanRules(this._rules);var curIndex=1,splits=[],rules=this._rules,links=this._links,ruleNames=keys(rules).sort(function(a,b){return rules[a].order>=rules[b].order}),len=ruleNames.length;for(;len--;){var i=ruleNames[len],rule=rules[i],retain=extractRefNum(rule.regexp)+1;if(rule.filter&&!filters[i]){filters[i]=rule.filter}links[i]=[curIndex,retain];var regexp=extractRefIndex(rule.regexp,curIndex-1);curIndex+=retain;splits.push(regexp)}this.TRUNK=new RegExp("^(?:("+splits.join(")|(")+"))");return this}});var replaceReg=/\{\{([^\}]*)\}\}/g,nthValueReg=/^(?:(\d+)|([+-]?\d*)?n([+-]\d+)?)$/,posPesudoReg=/^(nth)[\w-]*(-of-type|-child)/,nthCache=createCache(100),extractNthValue=function(param){var step,start,res;if(!param||!(param=param.replace(/\s+/g,""))){return{start:1,step:0}}if(res=nthCache.get(param))return res;if(param=="even"){start=2;step=2}else if(param=="odd"){step=2;start=1}else{res=param.match(nthValueReg);if(!res)step=null;else{if(res[1]){step=0;start=parseInt(res[1])}else{if(res[2]=="-")res[2]="-1";step=res[2]?parseInt(res[2]):1;start=res[3]?parseInt(res[3]):0}}}if(start<1){if(step<1){step=null}else{start=-(-start)%step+step}}return nthCache.set(param,{start:start,step:step})};var macros={split:"\\s*,\\s*",operator:"[*^$|~!]?=",combo:"[>\\s+~](?!=)",word:"[\\\\\\w\\u00A1-\\uFFFF-]"},rules={split:{reg:"{{split}}",action:function(all){this.parsed.push([null])},order:0},id:{reg:"#({{word}}+)",action:function(all,id){this.current().id=id}},tag:{reg:"\\*|[a-zA-Z-]\\w*",action:function(tag){this.current().tag=tag.toLowerCase()}},classList:{reg:"\\.({{word}}+)",action:function(all,className){var current=this.current(),classList=current.classList||(current.classList=[]);classList.push(className)}},pesudos:{reg:":({{word}}+)"+"(?:\\("+"([^\\(\\)]*"+"|(?:"+"\\([^\\)]+\\)"+"|[^\\(\\)]*"+")+)"+"\\))?",action:function(all,name,param){var current=this.current(),pesudos=current.pesudos||(current.pesudos=[]),name=name.toLowerCase(),res={name:name};if(param)param=param.trim();if(posPesudoReg.test(name)){param=extractNthValue(param)}if(param)res.param=param;pesudos.push(res)}},attributes:{reg:"\\[\\s*({{word}}+)(?:({{operator}})['\"]?([^'\"\\[]+)['\"]?)?\\s*\\]",action:function(all,key,operator,value){var current=this.current(),attributes=current.attributes||(current.attributes=[]);var res={};attributes.push({key:key,operator:operator,value:value})}},combo:{reg:"\\s*({{combo}})\\s*",action:function(all,combo){var data=this.parsed,cur=data[data.length-1];this.current().combo=combo;cur.push(null)},order:0}};var cleanReg=new RegExp("\\s*(,|"+macros.combo+"|"+macros.operator+")\\s*","g");clean=function(sl){return sl.trim().replace(/\s+/g," ").replace(cleanReg,"$1")};var parser=new Parser;parser.on(rules);function parse(sl){return parser.parse(sl)}var root=doc.documentElement||doc;var attrMap={"for":"htmlFor",href:function(node){return"href"in node?node.getAttribute("href",2):node.getAttribute("href")},type:function(node){return"type"in node?node.getAttribute("type"):node.type}};var checkTagName=assert(function(){testNode.appendChild(doc.createComment(""));return!testNode.getElementsByTagName("*").length||typeof doc.getElementsByTagName("input").length!=="number"});var checkAttributes=assert(function(){testNode.innerHTML="<select></select>";var type=typeOf(testNode.lastChild.getAttribute("multiple"));return type!=="boolean"&&type!=="string"});function checkNth(node,type){return type?node.nodeName===type:node.nodeType===1}function nthChild(node,type){var node=node.firstChild;return!node||checkNth(node,type)?node:nthNext(node,type)}function nthLastChild(node,type){var node=node.lastChild;return!node||checkNth(node,type)?node:nthPrev(node,type)}function nthPrev(node,type){while(node=node.previousSibling){if(checkNth(node,type))return node}return node}function nthNext(node,type){while(node=node.nextSibling){if(checkNth(node,type))return node}return node}function getAttribute(node,key){var map=attrMap[key];if(map)return typeof map==="function"?map(node):node[map];if(checkAttributes){return node.getAttribute(key)}var attrNode=node.getAttributeNode(key);return typeof node[key]==="boolean"?node[key]?key:null:attrNode&&attrNode.specified?attrNode.value:null}function distinct(array){for(var i=array.length;i--;){var n=array[i];array.splice(i,1,null);if(~array.indexOf(n)){array.splice(i,1)}else{array.splice(i,1,n)}}return array}var sortor=doc.compareDocumentPosition?function(a,b){if(!a.compareDocumentPosition||!b.compareDocumentPosition)return 0;return a.compareDocumentPosition(b)&4?-1:a===b?0:1}:"sourceIndex"in doc?function(a,b){if(!a.sourceIndex||!b.sourceIndex)return 0;return a.sourceIndex-b.sourceIndex}:function(a,b){var i=0,ap=[a],bp=[b],aup=a.parentNode,bup=b.parentNode,cur=aup;if(a===doc){return-1}else if(b===doc){return 1}else if(!aup&&!bup){return 0}else if(!bup){return-1}else if(!aup){return 1}else if(aup===bup){return siblingCheck(a,b)}while(cur){ap.unshift(cur);cur=cur.parentNode}cur=bup;while(cur){bp.unshift(cur);cur=cur.parentNode}while(ap[i]===bp[i]){i++}return siblingCheck(ap[i],bp[i])};function siblingCheck(a,b){if(a&&b){var cur=a.nextSibling;while(cur){if(cur===b){return-1}cur=cur.nextSibling}}return a?1:-1}function uniqueSort(nodeList){return distinct(nodeList.sort(sortor))}var getUid=function(token){var _uid=0;return function(node){return node._uid||(node._uid=token+_uid++)}}("nes_"+(+(new Date)).toString(36));function createNthFilter(isNext,isType){var next,prev,cacheKey,getStart;if(isNext){cacheKey=isType?"type":"child";next=nthNext;prev=nthPrev;getStart=nthChild}else{cacheKey="last"+(isType?"type":"child");prev=nthNext;next=nthPrev;getStart=nthLastChild}return function(node,param){var cache=nthPositionCache[cacheKey];if(node===root)return false;var _uid=getUid(node),parent=node.parentNode,traverse=param.step>0?next:prev,step=param.step,start=param.start,type=isType&&node.nodeName;if(step===null)return false;if(!cache[_uid]){var startNode=getStart(parent,type),index=0;do{cache[getUid(startNode)]=++index;nthPositionCache.length++}while(startNode=next(startNode,type))}var position=cache[_uid];if(step===0)return position===start;return(position-start)/step>=0&&(position-start)%step===0}}var nthPositionCache={length:1};function clearNthPositionCache(){if(nthPositionCache.length){nthPositionCache={child:{},lastchild:{},type:{},lasttype:{},length:0}}}clearNthPositionCache();var finders={byId:function(id){var node=doc.getElementById(id);return node?[node]:[]},byClassName:doc.getElementsByClassName?function(classList,node){classList=classList.join(" ");return toArray((node||doc).getElementsByClassName(classList))}:null,byTagName:checkTagName?function(tagName,node){var results=(node||doc).getElementsByTagName(tagName);return toArray(results)}:function(tagName,node){var results=(node||doc).getElementsByTagName(tagName);var elem,tmp=[],i=0;for(;elem=results[i];i++){if(elem.nodeType===1)tmp.push(elem)}return tmp}};var filters={id:function(node,id){return node.id===id},classList:function(node,classList){var len=classList.length,className=" "+node.className+" ";for(;len--;){if(className.indexOf(" "+classList[len]+" ")===-1){return false}}return true},tag:function(node,tag){if(tag=="*")return true;return node.tagName.toLowerCase()===tag},pesudos:function(node,pesudos){var len=pesudos.length,pesudoFilters=expandFilters["pesudos"];for(;len--;){var pesudo=pesudos[len],name=pesudo.name,filter=pesudoFilters[name];if(!filter)throw Error("不支持的伪类:"+name);if(!filter(node,pesudo.param))return false}return true},attributes:function(node,attributes){var len=attributes.length,operatorFilters=expandFilters["operators"];for(;len--;){var attribute=attributes[len],operator=attribute["operator"],filter=operatorFilters[operator],nodeValue=getAttribute(node,attribute.key);if(nodeValue===null){if(operator!=="!=")return false;continue}if(!operator)continue;if(!filter)throw Error("不支持的操作符:"+operator);if(!filter(attribute.value,nodeValue+""))return false}return true}};var expandFilters={combos:{">":function(node,match){var parent=node.parentNode;if(match(parent))return parent},"~":function(node,match){var prev=nthPrev(node);while(prev){if(match(prev))return prev;prev=nthPrev(prev)}}," ":function(node,match){var parent=node.parentNode;while(parent){var pass=match(parent);if(pass)return parent;if(pass===null)return null;parent=parent.parentNode}return null},"+":function(node,match){var prev=nthPrev(node);if(prev&&match(prev))return prev}},operators:{"^=":function(value,nodeValue){if(nodeValue==null)return false;return nodeValue.indexOf(value)===0},"=":function(value,nodeValue){return nodeValue===value},"~=":function(value,nodeValue){if(nodeValue==null)return false;return~(" "+nodeValue+" ").indexOf(value)},"$=":function(value,nodeValue){return nodeValue.substr(nodeValue.length-value.length)===value},"|=":function(value,nodeValue){return~("-"+nodeValue+"-").indexOf("-"+value+"-")},"*=":function(value,nodeValue){return~nodeValue.indexOf(value)},"!=":function(value,nodeValue){return nodeValue!==value}},pesudos:{not:function(node,sl){return!matches(node,sl)},matches:function(node,sl){return matches(node,sl)},"nth-child":createNthFilter(true,false),"nth-last-child":createNthFilter(false,false),"nth-of-type":createNthFilter(true,true),"nth-last-of-type":createNthFilter(false,true),"first-child":function(node){return!nthPrev(node)},"last-child":function(node){return!nthNext(node)},"last-of-type":function(node){return!nthNext(node,node.nodeName)},"first-of-type":function(node){return!nthPrev(node,node.nodeName)},"only-child":function(node){return!nthPrev(node)&&!nthNext(node)},"only-of-type":function(node){return!nthPrev(node,node.nodeName)&&!nthNext(node,node.nodeName)},contains:function(node,param){return~(node.innerText||node.textContent||"").indexOf(param)},checked:function(node){return!!node.checked||!!node.selected},selected:function(node){return node.selected},enabled:function(node){return node.disabled===false},disabled:function(node){return node.disabled===true},empty:function(node){var nodeType;node=node.firstChild;while(node){if(node.nodeName>"@"||(nodeType=node.nodeType)===3||nodeType===4){return false}node=node.nextSibling}return true},focus:function(node){return node===doc.activeElement&&(!doc.hasFocus||doc.hasFocus())&&!!(node.type||node.href||~node.tabIndex)},target:function(node,param){var id=node.id||node.name;if(!id)return false;return"#"+id===location.hash}}};function matchDatum(node,datum,ignored){var subFilter;for(var i in datum){if(ignored!==i&&(subFilter=filters[i])&&!subFilter(node,datum[i])){return false}}return true}var matchesCache=null;function matchData(node,data,ignored){var len=data.length,datum=data[len-1];if(!matchDatum(node,datum,ignored))return false;else{if(len==1)return true;var nextDatum=data[len-2],getNext=expandFilters.combos[nextDatum.combo],match=matchesCache[len-2],next=getNext(node,match);if(next)return true;else return false}}function createMatch(data){return function(node){if(node==root||node==null||node==doc)return null;return matchData(node,data)}}function createMatches(data){var matches=[];for(var i=0,len=data.length;i<len;i++){matches.push(createMatch(data.slice(0,i+1)))}return matches}function filter(results,data,ignored){if(!data.length)return results;var preMatchesCache=matchesCache;matchesCache=createMatches(data);for(var i=results.length;i--;){if(!matchData(results[i],data,ignored)){results.splice(i,1)}}matchesCache=preMatchesCache;return results}function getTargets(data,context){var results,ignored,lastPiece=data[data.length-1];if(lastPiece.id){results=finders.byId(lastPiece.id);ignored="id"}else if(lastPiece.classList&&lastPiece.classList.length&&finders.byClassName){results=finders.byClassName(lastPiece.classList,context);ignored="classList"}else{results=finders.byTagName(lastPiece.tag||"*",context);ignored="tag"}if(!results.length)return results;return filter(results,data,ignored)}function find(datas,context){if(!datas[0][0])return[];var results=[],notNullResult=0;for(var i=0,len=datas.length;i<len;i++){var data=datas[i],dlen=data.length,last=data[dlen-1],result=getTargets(data,context);if(result&&result.length){notNullResult++}if(!results)results=result;else results=results.concat(result)}clearNthPositionCache();if(notNullResult>1)uniqueSort(results);return results}function get(sl,context){var data=parse(sl);var result=find(data,context||doc);return result}var supportQuerySelector=!!doc.querySelector;function one(sl,context){var node;if(supportQuerySelector&&!nes.debug){try{node=(context||doc).querySelector(sl)}catch(e){node=get(sl,context)[0]}}else{node=get(sl,context)[0]}return node}function all(sl,context){var nodeList;if(supportQuerySelector&&!nes.debug){try{nodeList=toArray((context||doc).querySelectorAll(sl))}catch(e){nodeList=get(sl,context)}}else{nodeList=get(sl,context)}return nodeList}function matches(node,sl){if(!node||node.nodeType!==1)return false;var datas=parse(sl),len=datas.length;if(!datas[len-1][0])return false;for(;len--;){if(matchOneData(node,datas[len]))return true}return false}function matchOneData(node,data){var len=data.length;if(!matchDatum(node,data[len-1])){return false}else{return filter([node],data.slice(0)).length===1}}(function createExpand(host,beforeAssign){for(var i in host){nes[i]=function(i){var container=host[i];return autoSet(function(key,value){container[key]=value;if(i in beforeAssign){beforeAssign[i](key,value)}})}(i)}})(expandFilters,{operators:function(key){var befores=macros.operator.split("]");befores.splice(1,0,key.charAt(0)+"]");macros.operator=befores.join("");parser.setup()},combos:function(key){var befores=macros.combo.split("]");befores.splice(1,0,key+"]");macros.combo=befores.join("");parser.setup()}});nes.debug=false;nes._nthCache=nthCache;nes.parser=parser;nes.parse=parse;nes._find=find;nes._get=get;nes.one=one;nes.all=all;nes.matches=matches;nes._uniqueSort=uniqueSort;nes._cleanSelector=clean;nes._getUid=getUid;if(typeof exports==="object"){module.exports=nes}else if(typeof define==="function"&&define.amd){define(function(){return nes})}else{win.nes=nes}function nthMatch(first){return function(node,param){var tmp=param.split(/\s+of\s+/);if(tmp.length<2)throw Error("no 'of' keyword in nth-match\"s selector");var params=extractNthValue(tmp[0]),sl=tmp[1],testNode=node.parentNode[first?"firstChild":"lastChild"],next=first?"nextSibling":"previousSibling",step=params.step,start=params.start,position=0;if(!matches(node,sl))return false;if(step===null)return false;do{if(testNode.nodeType===1&&nes.matches(testNode,sl))position++;if(testNode===node)break}while(testNode=testNode[next]);if(step===0)return position===start;return(position-start)/step>=0&&(position-start)%step===0}}nes.pesudos({"nth-match":nthMatch(true),"nth-last-match":nthMatch(false),"local-link":function(_node,param){if(param)param=parseInt(param)}})}(window,document,undefined);
(function(){var _=NEJ.P,_e=_("nej.e");_e._$all=function(){try{return nes.all.apply(nes,arguments)}catch(e){return null}};_e._$one=function(){try{return nes.one.apply(nes,arguments)}catch(e){return null}};_e._$g=nes._get})();
(function(){var _=NEJ.P,_e=_("nej.e"),_v=_("nej.v"),_u=_("nej.u"),_x=_("nej.x"),fragmentRE=/^\s*<(\w+|!)[^>]*>/,_slice=[].slice,_doc=document,_de="documentElement",_docElem=_doc[_de],_testNode=_doc.createElement("div"),_textHandle=_testNode.textContent==null?"innerText":"textContent",_extend=function(_name,_value,_options){_options=_options||{};if(this[_name]==null||_options.override)this[_name]=_value;return this},_bubbleUp=function(_sl,_node,_container){while(_node&&_node!==_container){if(nes.matches(_node,_sl)){return _node}_node=_node.parentNode}},_ischainableRet=function(_result,_methodName,_node){return _result===_node||_result==="undefined"||_result===this||_result===_e||_result===_v},_isAcceptedNode=function(_node){if(!_node)return false;var _type=_node.nodeType;return _type===1||_type===9||_type===11||_node.window===_node},_safeProtoExtend=function(Type){var _proto=Type.prototype,_list={};return{extend:function(_name,_fn){_list[_name]=_proto._name;_proto[_name]=_fn;return this},reset:function(){for(var _i in _list)if(_list.hasOwnProperty(_i)){if(_list[_i]===undefined){delete _proto[_i]}else{_proto[_i]=_list[_i]}}}}},_fn=_safeProtoExtend(Function);_fn.extend("autoSet",function(){var _fn=this;return function(_key,_value){if(_u._$isObject(_key)){var _args=_slice.call(arguments,1);for(var _i in _key){_fn.apply(this,[_i,_key[_i]].concat(_args))}return this}else{return _fn.apply(this,arguments)}}}).extend("splitProcess",function(_isGetter){var _fn=this;return function(_params){if(_u._$isArray(_params)){var _args=_slice.call(arguments,1),_len=_params.length,_ret;if(_isGetter)_ret={};for(var _i=0;_i<_len;_i++){var _param=_params[_i],_tmpRet=_fn.apply(this,[_param].concat(_args));if(_isGetter&&typeof _param==="string")_ret[_param]=_tmpRet}return _isGetter?_ret:this}else{return _fn.apply(this,arguments)}}});_extend=_extend.autoSet();var $=nej.$=function(_selector,_context){if(_x.isChange){$._$implement(nej.x,{statics:true});_x.isChange=false}if(typeof _selector==="string"&&_selector.trim().indexOf("<")==0){var container=document.createElement("div");container.innerHTML=_selector;var res=$(container.childNodes);return res}return new _$$NodeList(_selector,_context)};function _$$NodeList(_selector,_context){this.length=0;this._signs={};this._context=_context||_doc;if(!_selector)return;if(typeof _selector==="string"){if(_context&&_context instanceof _$$NodeList)_context=_context[0];if(typeof _context=="string")_context=$(_context)[0];this._$add(_e._$all(_selector,_context))}else if(_selector instanceof _$$NodeList||_isAcceptedNode(_selector)||_selector.length){this._$add(_selector)}}$._$extend=_extend._$bind($);$._$extend({_$signal:"_uid",_$instances:{},_$handlers:[],_$fragment:function(){},_$implement:function(_name,_fn,_options){_options=_options||{};_extend.call(_$$NodeList.prototype,_name,_options.statics?this._transport(_fn):_fn)}.autoSet(),_transport:function(_fn){return function(){var _args=_slice.call(arguments);_args.unshift(this[0]);var _ret=_fn.apply(this,_args);if(!_ischainableRet.call(this,_ret))return _ret;this._$forEach(function(_node,_index){if(_index===0)return;_args[0]=_node;_fn.apply(this,_args)});return this}},_merge:function(_list1,_list2,_filter){var _i=_list1.length||0,_j=0;for(;_list2[_j]!==undefined;){var _tmp=_list2[_j++];if(!_filter||_filter.call(_list1,_tmp)){_list1[_i++]=_tmp}}_list1.length=_i;return _list1},_toArray:function(_list){return $._merge([],_list)},_contains:_docElem.contains?function(_a,_b){return _a===_b||(_a.nodeType==9?_a[_de]:_a).contains(_b)}:_docElem.compareDocumentPosition?function(_a,_b){return _b&&!!(_a.compareDocumentPosition(_b)&16)}:function(_a,_b){while(_b=_b.parentNode){if(_b===_a)return true}return false},_$cloneNode:function(_node,_withContent){_withContent=!!_withContent;var _clone=_node.cloneNode(_withContent),_ce,_be;if(_withContent){_be=nes.all("*",_node);_be.push(_node);_ce=nes.all("*",_clone);_ce.push(_clone)}else{_be=[_node];_ce=[_clone]}for(_i=_ce.length;_i--;){_definitions.fixture.clone(_ce[_i],_be[_i])}return _clone},_delegateHandlers:{},_cleanSelector:nes._cleanSelector,_$uniqueSort:nes._uniqueSort,_$matches:nes.matches,_$fn:_$$NodeList.prototype,_$uid:nes._getUid});var _rclickEvents=/^(?:click|dblclick|contextmenu|DOMMouseScroll|mouse(?:\w+))$/,_rkeyEvents=/^key(?:)/,_definitions={insertor:{top:function(_node,_node2){_node.insertBefore(_node2,_node.firstChild)},bottom:function(_node,_node2){_node.appendChild(_node2)},before:function(_node,_node2){var _parent=_node.parentNode;if(_parent)_parent.insertBefore(_node2,_node)},after:function(_node,_node2){var _parent=_node.parentNode;if(_parent)_parent.insertBefore(_node2,_node.nextSibling)}},fixProps:{input:"checked",option:"selected",textarea:"value",script:"text"},fixture:{clone:function(_dest,_src){var _nodeName,_attr;if(_dest.nodeType!==1){return}if(_dest.clearAttributes){_dest.clearAttributes();_dest.mergeAttributes(_src)}_nodeName=_dest.nodeName.toLowerCase();if(_prop=_definitions.fixProps[_nodeName]){_dest[_prop]=_src[_prop]}_dest.removeAttribute($._$signal);_dest.removeAttribute("id")},event:function(_e){var _type=_e.type;var _button=_e.button;_e.__fixed=true;_e.target=_e.target||_e.srcElement||document;_e.metaKey=!!_e.metaKey;if(_e.target.nodeType===3)_e.target=_e.target.parentNode;if(_rclickEvents.test(_type)){_e.pageX=_v._$pageX(_e);_e.pageY=_v._$pageY(_e);if(_type==="mouseover"||_type==="mouseout"){var related=_e.relatedTarget||_e[(_type=="mouseover"?"from":"to")+"Element"];while(related&&related.nodeType==3)related=related.parentNode;_e.relatedTarget=related}}_e.which=_e.charCode!=null?_e.charCode:_e.keyCode;if(!_e.which&&_button!==undefined){_e.which=_button&1?1:_button&2?3:_button&4?2:0}if(!_e.preventDefault)_e.preventDefault=function(){this.returnValue=false;return this};if(!_e.stopPropagation)_e.stopPropagation=function(){this.cancelBubble=true;return this}}}},_traverse=function(_direct){var _$matches=$._$matches;return function(_selector,_all){var _ret=$([]);if(typeof _selector==="boolean"){_all=_selector;_selector=null}this._$forEach(function(_node){var _tmp=_node[_direct];while(_tmp){if(_tmp.nodeType===1&&(!_selector||_$matches(_tmp,_selector))){_ret._$add(_tmp);if(!_all)break}_tmp=_tmp[_direct]}});return _ret}};$._$implement({_$style:function(_key,_value){if(!_key)throw Error("缺少css样式名");if(_value===undefined){return _e._$getStyle(this[0],_key)}return this._$forEach(function(_node){_e._$setStyle(_node,_key,_value)})}.splitProcess(true).autoSet(),_$attr:function(_key,_value){if(!_key)throw Error("缺少属性名");if(_value===undefined){return _e._$attr(this[0],_key)}return this._$forEach(function(_node){_e._$attr(_node,_key,_value)})}.splitProcess(true).autoSet(),_$forEach:function(_fn){_u._$forEach(this,_fn);return this},_$filter:function(_fn){var _ret=[],_isSelctor=typeof _fn==="string";this._$forEach(function(_node,_index){var _test=_isSelctor?$._$matches(_node,_fn):_fn.call(this,_node,_index);if(_test)_ret.push(_node)});return $(_ret)},_$map:function(_fn){var _ret=[],_isNotAllNode=false;this._$forEach(function(_node,_index){var _res=_fn.call(this,_node,_index);if(!_isAcceptedNode(_res))_isNotAllNode=true;_ret.push(_res)});return _isNotAllNode?_ret:$([])._$add(_ret)},_$sort:function(){var _array=this._$get();$._$uniqueSort(_array);return $(_array)},_$add:function(_node){if(!_node)return;if(typeof _node.length!=="number"||_node===window||_node.tagName&&_node.tagName.toLowerCase()=="form")_node=[_node];$._merge(this,_node,function(_nodum){if(!_isAcceptedNode(_nodum))return false;var _uid=$._$uid(_nodum);if(this._signs[_uid]){return false}else{this._signs[_uid]=1;return true}});return this},_$get:function(_index,wrap){if(typeof _index!=="number")return $._toArray(this);return wrap?$(this[_index]):this[_index]},_$last:function(wrap){return wrap?$(this[this.length-1]):this[this.length-1]},_$first:function(wrap){return wrap?$(this[0]):this[0]},_$matches:function(_selector){return $._$matches(this[0],_selector)},_$parent:_traverse("parentNode"),_$prev:_traverse("previousSibling"),_$next:_traverse("nextSibling"),_$children:function(_selector,_all){var _ret=$([]);if(typeof _selector==="boolean"){_all=_selector;_selector=null}this._$forEach(function(_node){var _backed=_all?_e._$all(_selector||"*",_node):_selector?$(_node.childNodes)._$filter(_selector):$(_node.childNodes);_ret._$add(_backed)});return _ret},_$siblings:function(_selector){return this._$prev(_selector,true)._$add(this._$next(_selector,true))},_$insert:function(_selector,_direct){_direct=_direct&&_direct.toLowerCase()||"bottom";if(!_definitions.insertor[_direct])_direct="bottom";var _content=$(_selector)[0],_insertor=_definitions.insertor[_direct];if(!_content)throw Error("The Element to be inserted is not exist");return this._$forEach(function(_node,_index){_insertor(_node,_index===0?_content:$._$cloneNode(_content,true))})},_$insert2:function(_selector,_direct){$(_selector)._$insert(this,_direct);return this},_$clone:function(_withContent){return this._$map(function(_node){return $._$cloneNode(_node,_withContent)})},_$text:function(_content){if(_content===undefined){if(!this[0])throw Error("内部节点为空，无法完成get操作");return this[0][_textHandle]}return this._$forEach(function(_node){_node[_textHandle]=_content})},_$html:function(_content){if(_content===undefined){if(!this[0])throw Error("内部节点为空，无法完成get操作");return this[0].innerHTML}return this._$forEach(function(_node){_node.innerHTML=_content});return this},_$val:function(_content){if(_content===undefined){if(!this[0])throw Error("内部节点为空，无法完成get操作");return this[0].value}return this._$forEach(function(_node){_node.value=_content});return this},_delegate:function(_event,_selector,_handler){_selector=$._cleanSelector(_selector);return this._$forEach(function(_node){var _uid=$._$uid(_node),_handlers=$._delegateHandlers[_uid]||($._delegateHandlers[_uid]={}),_events=_handlers[_event]||(_handlers[_event]={}),_selectors=_events[_selector]||(_events[_selector]=[]);var _realCb=function(_e){var _trigger;if(_trigger=_bubbleUp(_selector,_e.target||_e.srcElement,_node)){_handler.apply(_trigger,arguments)}};_realCb._raw=_handler;_selectors.push(_realCb);_v._$addEvent(_node,_event,_realCb)})},_undelegate:function(_event,_selector,_handler){_selector=$._cleanSelector(_selector);return this._$forEach(function(_node){var _uid=$._$uid(_node);var _handlers,_events,_selectors;if(!(_handlers=$._delegateHandlers[_uid])||!(_events=_handlers[_event])||!(_selectors=_events[_selector])){return}for(var _len=_selectors.length;_len--;){var _fn=_selectors[_len];if(!_handler||_fn._raw===_handler){_v._$delEvent(_node,_event,_fn);_selectors.splice(_len,1)}}if(!_selectors.length)delete _events[_selector]});return this},_$on:function(_event,_selector,_handler){if(_event===undefined)throw Error("缺少事件名参数");if(typeof _selector==="function"){_handler=_selector;_selector=null}var _index=_event.indexOf(" ");if(~_index){_selector=_event.slice(_index+1);_event=_event.slice(0,_index)}if(!_handler)throw Error("缺少回调函数");else{var _raw=_handler;var _handler=function(_e){_definitions.fixture.event(_e);_raw.apply(this,arguments)};_raw.real=_handler}if(_selector){return this._delegate(_event,_selector,_handler)}return this._$forEach(function(_node){_v._$addEvent(_node,_event,_handler)})}.splitProcess().autoSet(),_$off:function(_event,_selector,_handler){if(typeof _selector==="function"){_handler=_selector;_selector=null}var _index;if(_event&&~(_index=_event.indexOf(" "))){_selector=_event.slice(_index+1);_event=_event.slice(0,_index)}if(_handler)_handler=_handler.real||_handler;if(_selector){return this._undelegate(_event,_selector,_handler)}return this._$forEach(function(_node){var _uid=$._$uid(_node),_handlers=$._delegateHandlers[_uid],_events;if(!_event){if(_handlers){delete $._delegateHandlers[_uid]}_v._$clearEvent(_node,_event)}else{if(_handlers)_events=_handlers[_event];if(!_handler){if(_events){delete _handlers[_event]}_v._$clearEvent(_node,_event)}else{_v._$delEvent(_node,_event,_handler)}}})}.splitProcess().autoSet(),_$trigger:function(_event,_options){if(typeof _event!=="string")throw Error("事件类型参数错误");this._$forEach(function(_node){_v._$dispatchEvent(_node,_event,_options)});return this}.splitProcess().autoSet(),splice:function(){throw Error("don't use the NodeList#splice")}});_fn.reset()})();
(function(){})();
(function(){var using=NEJ.P;var o=NEJ.O;var e=using("nej.e");var $=using("nej.$");var u=using("nej.u");var v=using("nej.v");var j=using("nej.j");var du=using("dd.util");var dw=using("dd.widget");var dc=using("dd.const");var typeMap,msgNode,timer,timer2;var containers={base:document.createElement("div")};var passFn=function(){return true};du.findAncestor=function(node,condition,opt_root){while(node&&node!==opt_root){if(u._$isFunction(condition)&&condition(node)){return node}node=node.parentNode}};du.nameToClass=function(name){return"j-"+name};du.classToName=function(clazz){return clazz.substr&&clazz.substr(2)};$._$implement({_$toggleClass:function(className){if(this._$hasClassName(className)){this._$delClassName(className)}else{this._$addClassName(className)}return this},_$find:function(sl){return this._$children(sl,true)}});du.$=function(sl,context){var container=document.createElement("div");if(typeof sl==="string"&&sl.trim().indexOf("<")==0){container.innerHTML=sl;var res=$(container.childNodes);return res}return $(sl,context)};du.getParent=function(node,selector){var test,parent;if(!selector)test=passFn;else{test=typeof selector==="function"?selector:function(node){return nes.matches(node,selector)}}if(!node)return;parent=node.parentNode;while(parent){if(test(parent))return parent;else parent=parent.parentNode}};du.get=function(name,opt_context){var nodes=e._$getByClassName(opt_context,this.nameToClass(name));return nodes&&nodes[0]};du.getAll=function(name,opt_context){return e._$getByClassName(opt_context,this.nameToClass(name))};du.showMessage=function(options){options=options||o;var message=options.message;var content=du.get("content",msgNode);var closer=options.closer;var type=options.type||"hint";var delay=options.delay;var autoDisappear=options.autoDisappear;if(!msgNode){msgNode=document.createElement("div");msgNode.innerHTML='<p class="j-content"></p>';document.body.appendChild(msgNode);msgNode.className="u-msg1 u-msg1-"+type}window.clearTimeout(timer);window.clearTimeout(timer2);var content=du.get("content",msgNode);content.innerHTML=message||"";if(closer&&!autoDisappear){content.innerHTML+='<a href="javascript:void(0);" class="closer j-closer" title="我知道了">×</a>';v._$addEvent(du.get("closer",msgNode),"click",function(){e._$delClassName(msgNode,"u-msg1-show");closer()})}msgNode.className="u-msg1 u-msg1-"+type;if(options.klass)msgNode.className+=" "+options.klass;timer2=window.setTimeout(function(){e._$addClassName(msgNode,"u-msg1-show")},0);autoDisappear=autoDisappear===undefined?true:autoDisappear;if(autoDisappear){timer=window.setTimeout(function(){e._$delClassName(msgNode,"u-msg1-show")},delay||2500)}};du.hideMessage=function(){if(msgNode){e._$delClassName(msgNode,"u-msg1-show")}};du.showSuccess=function(options){if(u._$isString(options)){options={message:options}}options=options||{};options.type="success";return du.showMessage(options)};du.showHint=function(options){if(u._$isString(options)){options={message:options}}options=options||{};options.type="hint";return du.showMessage(options)};du.showError=function(options){if(u._$isString(options)){options={message:options}}options=options||{};options.type="error";return du.showMessage(options)};du.toggleByCookie=function(options){var node=options.node;var cookie=options.cookie;var closer=options.closer;if(!(node&&u._$isObject(cookie)&&cookie.name)){return}if(u._$isString(node)){node=e._$get(node)}if(node&&!j._$cookie(cookie.name)){node.style.display="";if(closer){v._$addEvent(closer,"click",function(event){node.style.display="none";j._$cookie(cookie.name,{value:cookie.value||1,expires:cookie.expires||7})}._$bind(this))}}};du.format=function(size){var units=["B","K","M","G","T"];size=parseInt(size,10);if(u._$isNumber(size)&&size>=0){for(var i=0,unit;unit=units[i];i++){if(size<1024){break}size=size/1024}return Math.round(size*100)/100+units[i]}};du.clone=function(obj){if(obj===undefined){return undefined}return JSON.parse(JSON.stringify(obj))};du.trimAll=function(str){return str.replace(/\s+/g,"")};du.mergeSpace=function(str){return str.replace(/\s+/g," ")};du.showListLoading=function(event){event.value='<div class="u-load">数据加载中<span class="loadicon"></span></div>'};du.showListMessage=function(msg,event){event.value='<div class="u-msg2">'+msg+"</div>"};du.showListError=function(event){switch(event.action){case"add":du.showError("新建失败，请稍后再试！");break;case"update":du.showError("修改失败，请稍后再试！");break;case"delete":du.showError("删除失败，请稍后再试！");break;default:du.showError("操作失败，请稍后再试！")}};du.getType=function(id){if(!typeMap){typeMap={};var types=dc.TYPES;for(var i=0,type;type=types[i];i++){typeMap[type.id]=type}}return typeMap[id]};du.isDate=function(str){if(!str){return}var arr=str.match(/(\d{1,4})(-|\/)(\d{1,2})\2(\d{1,2})/);if(!arr){return false}var reg=/^0*/;var yearNum=parseInt(arr[1].replace(reg,""),10);var monthNum=parseInt(arr[3].replace(reg,""),10)-1;var dateNum=parseInt(arr[4].replace(reg,""),10);var date=new Date(yearNum,monthNum,dateNum);return date.getFullYear()===yearNum&&date.getMonth()===monthNum&&date.getDate()===dateNum};du.onUploaderMessage=function(){var status="";return function(event,param){var types=["","图片","音频","视频"];var type=types[param.type]||"文档";switch(event.type){case"validated":switch(event.data.code){case 0:du.showError("请选择要上传的文件");break;case 1:du.showError(type+"格式必须为："+param.extension);break;case 2:du.showError(type+"大小不能超过"+param.size);break;case 3:du.showError(type+"尺寸不能超过"+param.dimension);break;case 4:du.showError(type+"原图不能超过"+(param.maxSize||"10M")+".或压缩后超过"+param.size)}break;case"beforeupload":if(navigator.onLine!==undefined&&!navigator.onLine){du.showError("网络异常，请稍后再试");event.stop=true}break;case"uploading":du.showHint({message:"上传中...",autoDisappear:false});break;case"uploaded":if(event.data.code===400){du.showError("上传失败:"+(event.data.result||type))}break;case"offline":if(status==="uploading"){du.showError("网络异常，请稍后再试")}break}status=event.type==="offline"?"":event.type}}();du.removeTag=function(str){var node=document.createElement("div");node.innerHTML=str||"";return node.innerText};du.toEmot=function(str,hdpi){var str=str;if(!str)return;str=u._$escape(str);u._$forEach(dc.EMOTS_SORT,function(item,index,that){str=str.replace(eval("/\\/"+item.title+"/g"),'<img title="'+item.title+'"class="u-emot" src="'+(!hdpi?item.url:item.url.replace(".png","@2x.png"))+'">')});return str};du.parseURL=function(str){if(!du.validator.url(str))return;var a=document.createElement("a");a.href=str;return{protocol:a.protocol,hostname:a.hostname,port:a.port,search:a.search,hash:a.hash}};du.proprocessURL=function(str){if(!str||!str.indexOf)return;if(!/^https?:\/\//.test(str)){str="http://"+str}return str};du.validator={url:function(str){if(!str)return;return/^(https?:\/\/([-\w]+\.)+[-\w]+(?:\:\d+)?(\/[\w\u4e00-\u9fa5\-\.\/?\@\%\!\&=\+\~\:\#\;\,]*)?)$/i.test(str)},email:function(str){if(!str)return;return/^\w[\w\.-]*[a-zA-Z0-9]?@[a-zA-Z0-9][\w\.-]*[a-zA-Z0-9]\.[a-zA-Z][a-zA-Z\.]*[a-zA-Z]$/.test(str)},mobile:function(str){str=str.trim();if(!str)return;var _url="/verify/verifyPhoneNum",_flag=!1;j._$request(_url,{method:"POST",timeout:1e3,query:{phoneNum:str},sync:true,onload:function(cb){cb=JSON.parse(cb);_flag=cb&&cb.result==200?!0:!1},onerror:function(e){_flag=!1}});return _flag},phone:function(str){if(!str)return;return/^0\d{2,3}\-\d{7,8}$/.test(str)},id:function(str){var isIdCard=function(e){function n(e){var t=0;e[17].toLowerCase()=="x"&&(e[17]=10);for(var n=0;n<17;n++)t+=o[n]*e[n];return valCodePosition=t%11,e[17]==u[valCodePosition]?!0:!1}function r(e){var t=e.substring(6,10),n=e.substring(10,12),r=e.substring(12,14),i=new Date(t,parseFloat(n)-1,parseFloat(r));return i.getFullYear()!=parseFloat(t)||i.getMonth()!=parseFloat(n)-1||i.getDate()!=parseFloat(r)?!1:!0}function i(e){var t=e.substring(6,8),n=e.substring(8,10),r=e.substring(10,12),i=new Date(t,parseFloat(n)-1,parseFloat(r));return i.getYear()!=parseFloat(t)||i.getMonth()!=parseFloat(n)-1||i.getDate()!=parseFloat(r)?!1:!0}function s(e){e=e.replace(/ /g,"").trim();if(e.length==15)return!1;if(e.length==18){var i=e.split("");return r(e)&&n(i)?!0:!1}return!1}var o=[7,9,10,5,8,4,2,1,6,3,7,9,10,5,8,4,2,1],u=[1,0,10,9,8,7,6,5,4,3,2];return s(e)};var check=function(e){if(/\(/.test(e)){if(!/\)/.test(e))return!1}if(/\)/.test(e)){if(!/\(/.test(e))return!1}return!0};var isMIdCard=function(e){if(!check(e))return!1;e=e.replace("(","").replace(")","");if(!/^\d{1}\d{6}\d{1}$/.test(e))return!1};var isHIdCard=function(e){if(!check(e))return!1;e=e.replace("(","").replace(")","");if(!/^[ACRUZXWOBN]\d{7}$/.test(e))return!1;var m={A:1,B:2,C:3,D:4,E:5,F:6,G:7,H:8,I:9,J:10,K:11,L:12,M:13,N:14,O:15,P:16,Q:17,R:18,S:19,T:20,U:21,V:22,W:23,X:24,Y:25,Z:26};var o=[8,7,6,5,4,3,2],key=e.slice(0,1),count=0;var area=m[key],arr=e.slice(1,7).split("");arr.unshift(area);for(var i=0;i<o.length;i++){count+=o[i]*arr[i]}var y=count%11;return y==0||11-y==e.slice(-1)};var isTIdCard=function(e){if(!check(e))return!1;e=e.replace("(","").replace(")","");if(!/^[A-Z][1|2]\d{8}$/.test(e))return!1;var m={A:10,B:11,C:12,D:13,E:14,F:15,G:16,H:17,I:34,J:18,K:19,L:20,M:21,N:22,O:35,P:23,Q:24,R:25,S:26,T:27,U:28,V:29,W:32,X:30,Y:31,Z:33};var o=[1,9,8,7,6,5,4,3,2,1];var area=m[e.slice(0,1)],num=area+e.slice(1,9);var arr=num.split(""),count=0;for(var i=0;i<o.length;i++){count+=o[i]*arr[i]}var y=count%10;return y==0||10-y==e.slice(-1)};if(!str)return;var str=str.toUpperCase();return isIdCard(str)||isHIdCard(str)||isTIdCard(str)||isMIdCard(str)},password:function(str){if(!str)return;return/^[-~`!@#$%^&*()_+=|{}\[\]:;"'<,>.?\/\d\w]{6,18}$/.test(str)}};du.uriToObject=function(uri){var uri=uri.split("/");return{bucket:uri[uri.length-2],object:uri[uri.length-1]}};du.transUri=function(uri,http){return uri&&uri.replace(/http:\/\/nos(-yx)?\.netease\.com/,http?"http://nos.163.com":"https://nos.163.com")};du.transTime=function(time,format){return time&&u._$format(time,format||"yyyy-MM-dd")};du.tpl=function(template){function get(path,param){var base=param;var spaths=path.split(".");spaths.forEach(function(path){var tmp=base[path];if(!(base=base[path]))return""});var type=typeof base;if(type==="function")return base();if(type!=="object")return base;return""}return function(param){return template.replace(/\{([\w\.]+)}/g,function(all,capture){return get(capture,param)})}};du.isAuthen=function(){return $(".m-account")._$attr("data-authen")!=null};du.extend=function(o1,o2,override){for(var i in o2){if(o1[i]==undefined||override){o1[i]=o2[i]}}return o1};du.toggleActived=function(ev){var $parent=du.$(ev.target)._$parent(".m-rule",true);$parent._$toggleClass("actived")};du.startCount=function(node,time,text){var $node=du.$(node);$node._$addClassName("u-btn-dis");time=time||60;text=text||"{}秒后重新发送";var timer=setInterval(function(){if(time<=0){$node._$delClassName("u-btn-dis")._$text("发送验证码");clearInterval(timer)}else{$node._$text(text.replace("{}",time--))}},1e3)};du.getFormData=function(node){var result={};$(node)._$children("input,select, textarea",true)._$forEach(function(node){result[node.name]=node.value.trim()});return result};du.getGroupData=function(ev){var $parent=du.$(ev.target)._$parent(".m-rule",true);var id=$parent._$attr("data-id");var result=du.getFormData($parent);var message,len;if(id!=null){result.id=id}if(!result.manageId){$parent._$find("[name=manageId]")[0].focus();message="管理员易信号不能为空"}else if(!result.name||u._$length(result.name)>30){$parent._$find("[name=name]")[0].focus();message="群名称不能为空，且长度应为1~30个字符"}else if(!result.sms&&!id){$parent._$find("[name=sms]")[0].focus();message="验证码不能为空"}else if(!result.description||u._$length(result.description)>30){message="群备注不能为空，且长度应为1~30个字符";$parent._$find("[name=description]")[0].focus()}if(message){result.code=500;result.message=message}return result};du.throttle=function(func,wait,immediate){var context,args,result;var timeout=null;var previous=0;var later=function(){previous=new Date;timeout=null;result=func.apply(context,args)};return function(){var now=new Date;if(!previous&&immediate===false)previous=now;var remaining=wait-(now-previous);context=this;args=arguments;if(remaining<=0){clearTimeout(timeout);timeout=null;previous=now;result=func.apply(context,args)}else if(!timeout){timeout=setTimeout(later,remaining)}return result}};du.transReg=function(str){var reg=/[\^\.\\\|\(\)\*\+\-\$\[\]\?]/g;var map={"^":"\\^",".":"\\.","\\":"\\\\","|":"\\|","(":"\\(",")":"\\)","*":"\\*","+":"\\+","-":"\\-",$:"$","[":"\\[","]":"\\]","?":"\\?"};str=str.replace(reg,function(s){return map[s]});return str};du.highlight=function(){var highlightWord,tempNodeVal,tempWordVal,pn,nv,ni,before,docWordVal,after,hiwordtext,hiword;highlightWord=function(node,word,klass){if(node.hasChildNodes){var i;for(i=0;i<node.childNodes.length;i++){highlightWord(node.childNodes[i],word,klass)}}if(node.nodeType==3){tempNodeVal=node.nodeValue.toLowerCase();tempWordVal=word.toLowerCase();if(tempNodeVal.indexOf(tempWordVal)!=-1){pn=node.parentNode;if(pn.className!=klass){nv=node.nodeValue;ni=tempNodeVal.indexOf(tempWordVal);before=document.createTextNode(nv.substr(0,ni));docWordVal=nv.substr(ni,word.length);after=document.createTextNode(nv.substr(ni+word.length));hiwordtext=document.createTextNode(docWordVal);hiword=document.createElement("span");hiword.className=klass;hiword.appendChild(hiwordtext);pn.insertBefore(before,node);pn.insertBefore(hiword,node);pn.insertBefore(after,node);pn.removeChild(node)}}}};return function(node,word,klass){if(!node||!word)return;var klass=klass||"u-key";highlightWord(node,word,klass)}}();du.textHighlight=function(str,key,klass){if(!str||!key)return;var str=u._$escape(str);var key=du.transReg(key);var reg=new RegExp("("+key+")","gi");str=str.replace(reg,'<span class="'+(klass||"u-key")+'">$1</span>');return str};du.fromNow=function(ts){var s=1e3;var m=s*60;var h=m*60;var d=h*24;var mm=d*30;var y=mm*12;var fl=Math.floor;var str="";var now=new Date;var base=new Date;var past=new Date(ts);var pday="星期"+["天","一","二","三","四","五","六"][past.getDay()];var pmonth=past.getMonth()+1;var pdate=past.getDate();var ndate=now.getDate();var pyear=past.getFullYear();var nyear=now.getFullYear();var offset=+now-ts;var doffset=offset/d;if(offset<m*5){str="刚刚"}else if(offset<h){str=fl(offset/m)+"分钟前"}else if(offset<d&&ndate==pdate){str=fl(offset/h)+"小时前"}else if(doffset<2&&ndate-pdate==1){str="昨天"}else if(doffset<3&&ndate-pdate==2){str="前天"}else if(doffset<7){str=pday}else{if(nyear-pyear>=1){str=(pyear+"年"+pmonth+"月"+pdate+"日").slice(2)}else{str=pmonth+"月"+pdate+"日"}}return str};du.urlToLink=function(str){return str.replace(/(((https?|ftp|file):\/\/|www\.)[-a-zA-Z0-9+&@#\/%?=~_|!:,.;]*)/g,function(all){var url=all;if(url.indexOf("www")==0){url="http://"+url}return'<a href="'+url+'">'+all+"</a>"})};du.confirm=function(){}})();
(function(){var _=NEJ.P,_o=NEJ.O,_r=NEJ.R,_f=NEJ.F,_v=_("nej.v"),_u=_("nej.u"),_p=_("nej.ut"),_pro;if(!!_p._$$Event)return;_p._$$Event=NEJ.C();_pro=_p._$$Event.prototype;_p._$$Event._$allocate=function(_options){_options=_options||{};var _instance=!!this.__pool&&this.__pool.shift();if(!_instance){_instance=new this(_options);this.__inst__=(this.__inst__||0)+1}_instance.__reset(_options);return _instance};_p._$$Event._$recycle=function(){var _doRecycle=function(_item,_index,_list){_item._$recycle();_list.splice(_index,1)};return function(_instance){if(!_instance)return null;if(!_u._$isArray(_instance)){if(!(_instance instanceof this)){var _class=_instance.constructor;if(!!_class._$recycle)_class._$recycle(_instance);return null}if(_instance==this.__instance)delete this.__instance;if(_instance==this.__inctanse)delete this.__inctanse;_instance.__destroy();if(!this.__pool)this.__pool=[];if(_u._$indexOf(this.__pool,_instance)<0){this.__pool.push(_instance)}return null}_u._$reverseEach(_instance,_doRecycle,this)}}();_p._$$Event._$getInstance=function(_options){_options=_options||{};if(!this.__instance)this.__instance=this._$allocate(_options);return this.__instance};_p._$$Event._$getInstanceWithReset=function(_options,_clear){_options=_options||{};if(!!_clear&&!!this.__inctanse){this.__inctanse._$recycle();delete this.__inctanse}if(!this.__inctanse){this.__inctanse=this._$allocate(_options)}else{this.__inctanse.__reset(_options)}return this.__inctanse};_pro.__init=function(){this.__events={};this.__events_dom={};this.id=_u._$uniqueID()};_pro.__reset=function(_options){this._$batEvent(_options)};_pro.__destroy=function(){this._$clearEvent();this.__doClearDomEvent()};_pro.__doInitDomEvent=function(){var _doAttach=function(_args){if(!_args||_args.length<3)return;this.__events_dom["de-"+_u._$uniqueID()]=_args;_v._$addEvent.apply(_v,_args)};return function(_list){_u._$forEach(_list,_doAttach,this)}}();_pro.__doClearDomEvent=function(){var _doRemoveEvent=function(_args,_key,_map){delete _map[_key];_v._$delEvent.apply(_v,_args)};return function(){_u._$forIn(this.__events_dom,_doRemoveEvent)}}();_pro.__doClearComponent=function(_filter){_filter=_filter||_f;_u._$forIn(this,function(_inst,_key,_map){if(!!_inst&&!!_inst._$recycle&&!_filter(_inst)){delete _map[_key];_inst._$recycle()}})};_pro._$recycle=function(){this.constructor._$recycle(this)};_pro._$hasEvent=function(_type){var _type=(_type||"").toLowerCase(),_event=this.__events[_type];return!!_event&&_event!==_f};_pro._$addEvent=function(_type,_event){this._$setEvent.apply(this,arguments)};_pro._$delEvent=function(_type,_event){var _type=(_type||"").toLowerCase(),_events=this.__events[_type];if(!_u._$isArray(_events)){if(_events==_event){delete this.__events[_type]}return}_u._$reverseEach(_events,function(_func,_index,_list){if(_func==_event){_list.splice(_index,1)}})};_pro._$setEvent=function(_type,_event){if(!!_type&&_u._$isFunction(_event)){this.__events[_type.toLowerCase()]=_event}};_pro._$batEvent=function(){var _doSetEvent=function(_event,_type){this._$setEvent(_type,_event)};return function(_events){_u._$forIn(_events,_doSetEvent,this)}}();_pro._$clearEvent=function(){var _doClearEvent=function(_event,_type){this._$clearEvent(_type)};return function(_type){var _type=(_type||"").toLowerCase();if(!!_type){delete this.__events[_type]}else{_u._$forIn(this.__events,_doClearEvent,this)}}}();_pro._$pushEvent=function(_type,_event){if(!_type||!_u._$isFunction(_event)){return}_type=_type.toLowerCase();var _events=this.__events[_type];if(!_events){this.__events[_type]=_event;return}if(!_u._$isArray(_events)){this.__events[_type]=[_events]}this.__events[_type].push(_event)};_pro._$dispatchEvent=function(_type){var _type=(_type||"").toLowerCase(),_event=this.__events[_type];if(!_event)return;var _args=_r.slice.call(arguments,1);if(!_u._$isArray(_event)){return _event.apply(this,_args)}_u._$forEach(_event,function(_handler){try{_handler.apply(this,_args)}catch(ex){console.error(ex.message);console.error(ex.stack)}},this);return this};_p._$api=function(){var _cache={};return function(_id,_class,_options){var _sn=_class.__sign__;if(!_sn){_sn=_u._$randString(10);_class.__sign__=_sn}var _key=_id+"-"+_sn,_instance=_cache[_key];if(!!_options&&!_instance){_instance=_class._$allocate(_options);_instance._$recycle=_instance._$recycle._$aop(function(_event){delete _cache[_key];delete _instance._$recycle});_cache[_key]=_instance}return _instance}}()})();
(function(){if(typeof TrimPath==="undefined"){TrimPath={};if(typeof exports!=="undefined")TrimPath=exports}var _tcache={},_stack=[],_rspc=/\s+/g,_seed=+(new Date),_trim,_config,_vars;var _doParseVars=function(){var _reg0=/^\s*[\[\{'"].*?[\]\}'"]\s*$/,_reg1=/[\&\|\<\>\+\-\*\/\%\,\(\)\[\]\?\:\!\=\;]/,_reg2=/^(?:defined|null|undefined|true|false|instanceof|new|this|typeof|\$v|[\d]+)$/i,_reg3=/^new\s+/,_reg4=/['"]/;var _doParseSimple=function(_value){if(_reg0.test(_value))return;_value=_value.split(".")[0].trim();if(!_value||_reg4.test(_value))return;_value=_value.replace(_reg3,"");try{if(_reg2.test(_value))return;_vars[_value]=1}catch(e){}};return function(_content){_content=_content||"";if(!_content||_reg0.test(_content))return;var _arr=_content.split(_reg1);for(var i=0,l=_arr.length;i<l;i++)_doParseSimple(_arr[i])}}();var _doParsePrefixFor=function(_part){if(_part[2]!="in")throw"bad for loop statement: "+_part.join(" ");_stack.push(_part[1]);_doParseVars(_part[3]);return"var __HASH__"+_part[1]+" = "+_part[3]+","+_part[1]+","+_part[1]+"_count=0;"+"if (!!__HASH__"+_part[1]+")"+"for(var "+_part[1]+"_key in __HASH__"+_part[1]+"){"+_part[1]+" = __HASH__"+_part[1]+"["+_part[1]+"_key];"+"if (typeof("+_part[1]+')=="function") continue;'+_part[1]+"_count++;"};var _doParsePrefixForElse=function(){var _part=_stack[_stack.length-1];return"}; if(!__HASH__"+_part+"||!"+_part+"_count){"};var _doParsePrefixForEnd=function(){_stack.pop();return"};"};var _doParsePrefixList=function(_part){if(_part[2]!="as")throw"bad for list loop statement: "+_part.join(" ");var _seq=_part[1].split("..");if(_seq.length>1){_doParseVars(_seq[0]);_doParseVars(_seq[1]);return"for(var "+_part[3]+","+_part[3]+"_index=0,"+_part[3]+"_beg="+_seq[0]+","+_part[3]+"_end="+_seq[1]+","+_part[3]+"_length=parseInt("+_part[3]+"_end-"+_part[3]+"_beg+1);"+_part[3]+"_index<"+_part[3]+"_length;"+_part[3]+"_index++){"+_part[3]+" = "+_part[3]+"_beg+"+_part[3]+"_index;"}else{_doParseVars(_part[1]);return"for(var __LIST__"+_part[3]+" = "+_part[1]+","+_part[3]+","+_part[3]+"_index=0,"+_part[3]+"_length=__LIST__"+_part[3]+".length;"+_part[3]+"_index<"+_part[3]+"_length;"+_part[3]+"_index++){"+_part[3]+" = __LIST__"+_part[3]+"["+_part[3]+"_index];"}};var _doParsePrefixMacro=function(_part){if(!_part||!_part.length)return;_part.shift();var _name=_part[0].split("(")[0];return"var "+_name+" = function"+_part.join("").replace(_name,"")+"{var __OUT=[];"};var _doParsePrefixInline=function(_part){if(!_part[1])throw"bad include statement: "+_part.join(" ");return'if (typeof inline == "function"){__OUT.push(inline('};var _doParsePrefixCondition=function(_prefix,_part){_doParseVars(_part.slice(1).join(" "));return _prefix};var _doParsePrefixConditionIF=function(_part){return _doParsePrefixCondition("if(",_part)};var _doParsePrefixConditionELSEIF=function(_part){return _doParsePrefixCondition("}else if(",_part)};var _doParsePrefixConditionVAR=function(_part){return _doParsePrefixCondition("var ",_part)};_config={blk:/^\{(cdata|minify|eval)/i,tag:"forelse|for|list|if|elseif|else|var|macro|break|notrim|trim|include",def:{"if":{pfix:_doParsePrefixConditionIF,sfix:"){",pmin:1},"else":{pfix:"}else{"},elseif:{pfix:_doParsePrefixConditionELSEIF,sfix:"){",pdft:"true"},"/if":{pfix:"}"},"for":{pfix:_doParsePrefixFor,pmin:3},forelse:{pfix:_doParsePrefixForElse},"/for":{pfix:_doParsePrefixForEnd},list:{pfix:_doParsePrefixList,pmin:3},"/list":{pfix:"};"},"break":{pfix:"break;"},"var":{pfix:_doParsePrefixConditionVAR,sfix:";"},macro:{pfix:_doParsePrefixMacro},"/macro":{pfix:'return __OUT.join("");};'},trim:{pfix:function(){_trim=!0}},"/trim":{pfix:function(){_trim=null}},inline:{pfix:_doParsePrefixInline,pmin:1,sfix:"));}"}},ext:{seed:function(_prefix){return(_prefix||"")+""+_seed},"default":function(_value,_default){return _value||_default}}};var _doParseStatement=function(){var _rbrc=/\\([\{\}])/g;return function(_content,_out){_content=_content.replace(_rbrc,"$1");var _part=_content.slice(1,-1).split(_rspc),_conf=_config.def[_part[0]];if(!_conf){_doParseSectionText(_content,_out);return}if(!!_conf.pmin&&_conf.pmin>=_part.length)throw"Statement needs more parameters:"+_content;_out.push(!!_conf.pfix&&typeof _conf.pfix!="string"?_conf.pfix(_part):_conf.pfix||"");if(!!_conf.sfix){if(_part.length<=1){if(!!_conf.pdft)_out.push(_conf.pdft)}else{for(var i=1,l=_part.length;i<l;i++){if(i>1)_out.push(" ");_out.push(_part[i])}}_out.push(_conf.sfix)}}}();var _doParseExpression=function(_exps,_out){if(!_exps||!_exps.length)return;if(_exps.length==1){var _var=_exps.pop();_doParseVars(_var);_out.push(_var==""?'""':_var);return}var _exp=_exps.pop().split(":");_out.push("__MDF['"+_exp.shift()+"'](");_doParseExpression(_exps,_out);if(_exp.length>0){var _args=_exp.join(":");_doParseVars(_args);_out.push(","+_args)}_out.push(")")};var _doParseSectionText=function(_content,_out){if(!_content)return;var _lines=_content.split("\n");if(!_lines||!_lines.length)return;for(var i=0,l=_lines.length,_line;i<l;i++){_line=_lines[i];if(!!_trim){_line=_line.trim();if(!_line)continue}_doParseSectionTextLine(_line,_out);if(!!_trim&&i<l-1)_out.push("__OUT.push('\\n');")}};var _doParseSectionTextLine=function(){var _raor=/\|\|/g,_rvor=/#@@#/g;return function(_content,_out){var _prvmrkend="}",_prvexpend=-1,_length=_content.length,_begin,_end,_begexp,_endexp,_exparr;while(_prvexpend+_prvmrkend.length<_length){_begin="${";_end="}";_begexp=_content.indexOf(_begin,_prvexpend+_prvmrkend.length);if(_begexp<0)break;if(_content.charAt(_begexp+2)=="%"){_begin="${%";_end="%}"}_endexp=_content.indexOf(_end,_begexp+_begin.length);if(_endexp<0)break;_doParseText(_content.substring(_prvexpend+_prvmrkend.length,_begexp),_out);_exparr=_content.substring(_begexp+_begin.length,_endexp).replace(_raor,"#@@#").split("|");for(var i=0,l=_exparr.length;i<l;_exparr[i]=_exparr[i].replace(_rvor,"||"),i++);_out.push("__OUT.push(");_doParseExpression(_exparr,_out);_out.push(");");_prvmrkend=_end;_prvexpend=_endexp}_doParseText(_content.substring(_prvexpend+_prvmrkend.length),_out)}}();var _doParseText=function(){var _map={r:/\n|\\|\'/g,"\n":"\\n","\\":"\\\\","'":"\\'"};var _doEncode=function(_content){return(_content||"").replace(_map.r,function($1){return _map[$1]||$1})};return function(_content,_out){if(!_content)return;_out.push("__OUT.push('"+_doEncode(_content)+"');")}}();var _doParseTemplate=function(){var _rtab=/\t/g,_rnln=/\n/g,_rlne=/\r\n?/g;var _doSearchEnd=function(_content,_begin){var _index=_content.indexOf("}",_begin+1);while(_content.charAt(_index-1)=="\\"){_index=_content.indexOf("}",_index+1)}return _index};var _doParseVarMap=function(){var _arr=[],_arg=arguments[0];for(var x in _arg){x=(x||"").trim();if(!x)continue;_arr.push(x+"=$v('"+x+"')")}return _arr.length>0?"var "+_arr.join(",")+";":""};return function(_content){_vars={};_content=_content.replace(_rlne,"\n").replace(_rtab,"    ");var _ftxt=["if(!__CTX) return '';",""];_ftxt.push("function $v(__NAME){var v = __CTX[__NAME];return v==null?window[__NAME]:v;};");_ftxt.push("var defined=function(__NAME){return __CTX[__NAME]!=null;},");_ftxt.push("__OUT=[];");var _prvend=-1,_length=_content.length;var _stmtbeg,_stmtend,_statement,_blockrx,_blktmp,_blkend,_blkmrk,_blktxt;while(_prvend+1<_length){_stmtbeg=_prvend;_stmtbeg=_content.indexOf("{",_stmtbeg+1);while(_stmtbeg>=0){_stmtend=_doSearchEnd(_content,_stmtbeg);_statement=_content.substring(_stmtbeg,_stmtend);_blockrx=_statement.match(_config.blk);if(!!_blockrx){_blktmp=_blockrx[1].length+1;_blkend=_content.indexOf("}",_stmtbeg+_blktmp);if(_blkend>=0){_blkmrk=_blkend-_stmtbeg-_blktmp<=0?"{/"+_blockrx[1]+"}":_statement.substr(_blktmp+1);_blktmp=_content.indexOf(_blkmrk,_blkend+1);if(_blktmp>=0){_doParseSectionText(_content.substring(_prvend+1,_stmtbeg),_ftxt);_blktxt=_content.substring(_blkend+1,_blktmp);switch(_blockrx[1]){case"cdata":_doParseText(_blktxt,_ftxt);break;case"minify":_doParseText(_blktxt.replace(_rnln," ").replace(_rspc," "),_ftxt);break;case"eval":if(!!_blktxt)_ftxt.push("__OUT.push((function(){"+_blktxt+"})());");break}_stmtbeg=_prvend=_blktmp+_blkmrk.length-1}}}else if(_content.charAt(_stmtbeg-1)!="$"&&_content.charAt(_stmtbeg-1)!="\\"&&_statement.substr(_statement.charAt(1)=="/"?2:1).search(_config.tag)==0){break}_stmtbeg=_content.indexOf("{",_stmtbeg+1)}if(_stmtbeg<0)break;_stmtend=_doSearchEnd(_content,_stmtbeg);if(_stmtend<0)break;_doParseSectionText(_content.substring(_prvend+1,_stmtbeg),_ftxt);_doParseStatement(_content.substring(_stmtbeg,_stmtend+1),_ftxt);_prvend=_stmtend}_doParseSectionText(_content.substring(_prvend+1),_ftxt);_ftxt.push(';return __OUT.join("");');_ftxt[1]=_doParseVarMap(_vars);_vars=null;return new Function("__CTX","__MDF",_ftxt.join(""))}}();TrimPath.seed=function(){return _seed};TrimPath.merge=function(){var _fcache={};TrimPath.dump=function(){return{func:_fcache,text:_tcache}};return function(_sn,_data,_extend){try{_data=_data||{};if(!_fcache[_sn]&&!_tcache[_sn])return"";if(!_fcache[_sn]){_fcache[_sn]=_doParseTemplate(_tcache[_sn]);delete _tcache[_sn]}if(!!_extend){for(var x in _config.ext)if(!_extend[x])_extend[x]=_config.ext[x]}return _fcache[_sn](_data,_extend||_config.ext)}catch(ex){return ex.message||""}}}();TrimPath.parse=function(){var _xeed=+(new Date);return function(_content,_sn){if(!_content)return"";_sn=_sn||"ck_"+_xeed++;_tcache[_sn]=_content;return _sn}}()})();
(function(){var _=NEJ.P,_e=_("nej.e"),_u=_("nej.u"),_ext={};_e._$getHtmlTemplateSeed=TrimPath.seed;_e._$getHtmlTemplate=function(){var _doInline=function(_id){return!_e._$getTextTemplate?"":_e._$getTextTemplate(_id)};return function(_sn,_data,_extend){_data=_data||{};_data.inline=_doInline;_extend=NEJ.X(NEJ.X({},_ext),_extend);_extend.rand=_u._$randNumberString;_extend.format=_u._$format;_extend.escape=_u._$escape;_extend.inline=_doInline;return TrimPath.merge(_sn,_data,_extend)}}();_e._$addHtmlTemplate=function(_content,_keep){if(!_content)return"";var _sn,_element=_e._$get(_content);if(!!_element){_sn=_element.id;_content=_element.value||_element.innerText;if(!_keep)_e._$remove(_element)}return TrimPath.parse(_content,_sn)};_e._$renderHtmlTemplate=function(_parent,_sn,_data,_extend){_parent=_e._$get(_parent);if(!!_parent)_parent.innerHTML=_e._$getHtmlTemplate(_sn,_data,_extend);return this};_e._$registJSTExt=function(_map){NEJ.X(_ext,_map)};_("dbg").dumpJST=function(){return TrimPath.dump()}})();
(function(){var _=NEJ.P,_f=NEJ.F,_e=_("nej.e"),_v=_("nej.v"),_u=_("nej.u"),_p=_("nej.ut"),_pro;if(!!_p._$$CustomEvent)return;_p._$$CustomEvent=NEJ.C();_pro=_p._$$CustomEvent._$extend(_p._$$Event);_pro.__init=function(){this.__cache={};this.__supInit()};_pro.__reset=function(_options){this.__supReset(_options);this.__element=_e._$get(_options.element)||window;this.__doEventInit(_options.event);this.__doEventAPIEnhance();this._$dispatchEvent("oninit")};_pro.__destroy=function(){var _doClear=function(_value,_key,_map){if(!_u._$isArray(_value)){_u._$safeDelete(this.__element,_key)}delete _map[_key]};return function(){this.__supDestroy();_u._$forIn(this.__cache,_doClear,this);delete this.__element}}();_pro.__isDelegate=function(_element,_type){_element=_e._$get(_element);return _element===this.__element&&(!_type||!!this.__cache["on"+_type])};_pro.__doEventInit=function(_event){if(_u._$isString(_event)){var _name="on"+_event;if(!this.__cache[_name]){this.__cache[_name]=this.__doEventDispatch._$bind(this,_event)}this.__doEventBind(_event);return}if(_u._$isArray(_event)){_u._$forEach(_event,this.__doEventInit,this)}};_pro.__doEventBind=function(_type){var _event="on"+_type,_handler=this.__element[_event],_handler1=this.__cache[_event];if(_handler!=_handler1){this.__doEventDelete(_type);if(!!_handler&&_handler!=_f)this.__doEventAdd(_type,_handler);this.__element[_event]=_handler1}};_pro.__doEventAdd=function(_type,_handler,_front){var _list=this.__cache[_type];if(!_list){_list=[];this.__cache[_type]=_list}if(_u._$isFunction(_handler)){!_front?_list.push(_handler):_list.unshift(_handler)}};_pro.__doEventDelete=function(_type,_handler){var _list=this.__cache[_type];if(!_list||!_list.length)return;if(!_handler){delete this.__cache[_type];return}_u._$reverseEach(_list,function(_value,_index,_xlist){if(_handler===_value){_xlist.splice(_index,1);return!0}})};_pro.__doEventDispatch=function(_type,_event){_event=_event||{noargs:!0};_event.type=_type;this._$dispatchEvent("ondispatch",_event);if(!!_event.stopped)return;_u._$forEach(this.__cache[_type],function(_handler){try{_handler(_event)}catch(ex){console.error(ex.message);console.error(ex.stack)}})};_pro.__doEventAPIEnhance=function(){var _doAddEvent=function(_event){var _args=_event.args,_type=_args[1].toLowerCase();if(this.__isDelegate(_args[0],_type)){_event.stopped=!0;this.__doEventBind(_type);this.__doEventAdd(_type,_args[2],_args[3]);this._$dispatchEvent("oneventadd",{type:_type,listener:_args[2]})}};var _doDelEvent=function(_event){var _args=_event.args,_type=_args[1].toLowerCase();if(this.__isDelegate(_args[0],_type)){_event.stopped=!0;this.__doEventDelete(_type,_args[2])}};var _doClearEvent=function(_event){var _args=_event.args,_type=(_args[1]||"").toLowerCase();if(this.__isDelegate(_args[0])){if(!!_type){this.__doEventDelete(_type);return}_u._$forIn(this.__cache,function(_value,_key){if(_u._$isArray(_value)){this.__doEventDelete(_key)}},this)}};var _doDispatchEvent=function(_event){var _args=_event.args,_type=_args[1].toLowerCase();if(this.__isDelegate(_args[0],_type)){_event.stopped=!0;_args[0]["on"+_type].apply(_args[0],_args.slice(2))}};return function(){if(!!this.__enhanced)return;this.__enhanced=true;_v._$addEvent=_v._$addEvent._$aop(_doAddEvent._$bind(this));_v._$delEvent=_v._$delEvent._$aop(_doDelEvent._$bind(this));_v._$clearEvent=_v._$clearEvent._$aop(_doClearEvent._$bind(this));_v._$dispatchEvent=_v._$dispatchEvent._$aop(_doDispatchEvent._$bind(this))}}()})();
(function(){var _=NEJ.P,_f=NEJ.F,_g=_("nej.g"),_v=_("nej.v"),_u=_("nej.u"),_t=_("nej.ut"),_p=_("nej.ut.j"),_proLoader,_timeout=6e4;if(!!_p._$$Loader)return;_p._$$Loader=NEJ.C();_proLoader=_p._$$Loader._$extend(_t._$$Event);_proLoader.__init=function(){this.__supInit();this.__qopt={onerror:this.__onQueueError._$bind(this),onloaded:this.__onQueueLoaded._$bind(this)};if(!this.constructor.__cache)this.constructor.__cache={loaded:{}}};_proLoader.__reset=function(_options){this.__supReset(_options);this.__version=_options.version;this.__timeout=_options.timeout;this.__qopt.version=this.__version;this.__qopt.timeout=this.__timeout};_proLoader.__delLoadData=function(_key){delete this.constructor.__cache[_key]};_proLoader.__getLoadData=function(_key){return this.constructor.__cache[_key]};_proLoader.__setLoadData=function(_key,_data){this.constructor.__cache[_key]=_data};_proLoader.__getRequest=_f;_proLoader.__clearRequest=function(_request){_v._$clearEvent(_request)};_proLoader.__doRequest=function(_request){_request.src=this.__url;document.head.appendChild(_request)};_proLoader.__doClear=function(){var _cache=this.__getLoadData(this.__url);if(!_cache)return;window.clearTimeout(_cache.timer);this.__clearRequest(_cache.request);delete _cache.bind;delete _cache.timer;delete _cache.request;this.__delLoadData(this.__url);this.__getLoadData("loaded")[this.__url]=!0};_proLoader.__doCallback=function(_name){var _cache=this.__getLoadData(this.__url);if(!_cache)return;var _list=_cache.bind;this.__doClear();if(!!_list&&_list.length>0){var _instance;while(_list.length){_instance=_list.shift();try{_instance._$dispatchEvent(_name,arguments[1])}catch(ex){console.error(ex.message);console.error(ex.stack)}_instance._$recycle()}}};_proLoader.__onError=function(_error){this.__doCallback("onerror",_error)};_proLoader.__onLoaded=function(){this.__doCallback("onloaded")};_proLoader.__doLoadQueue=function(_url){this.constructor._$allocate(this.__qopt)._$load(_url)};_proLoader.__onQueueCheck=function(_error){var _cache=this.__getLoadData(this.__key);if(!_cache)return;if(!!_error)_cache.error++;_cache.loaded++;if(_cache.loaded<_cache.total)return;this.__delLoadData(this.__key);this._$dispatchEvent(_cache.error>0?"onerror":"onloaded")};_proLoader.__onQueueError=function(_error){this.__onQueueCheck(!0)};_proLoader.__onQueueLoaded=function(){this.__onQueueCheck()};_proLoader._$load=function(_url){_url=_u._$absolute(_url);if(!_url){this._$dispatchEvent("onerror",{code:_g._$CODE_NOTASGN,message:"请指定要载入的资源地址！"});return this}this.__url=_url;if(!!this.__version)this.__url+=(this.__url.indexOf("?")<0?"?":"&")+this.__version;if(this.__getLoadData("loaded")[this.__url]){try{this._$dispatchEvent("onloaded")}catch(ex){console.error(ex.message);console.error(ex.stack)}this._$recycle();return this}var _cache=this.__getLoadData(this.__url),_request;if(!!_cache){_cache.bind.unshift(this);_cache.timer=window.clearTimeout(_cache.timer)}else{_request=this.__getRequest();_cache={request:_request,bind:[this]};this.__setLoadData(this.__url,_cache);_v._$addEvent(_request,"load",this.__onLoaded._$bind(this));_v._$addEvent(_request,"error",this.__onError._$bind(this,{code:_g._$CODE_ERRSERV,message:"无法加载指定资源文件["+this.__url+"]！"}))}if(this.__timeout!=0)_cache.timer=window.setTimeout(this.__onError._$bind(this,{code:_g._$CODE_TIMEOUT,message:"指定资源文件["+this.__url+"]载入超时！"}),this.__timeout||_timeout);if(!!_request)this.__doRequest(_request);this._$dispatchEvent("onloading");return this};_proLoader._$queue=function(_list){if(!_list||!_list.length){this._$dispatchEvent("onerror",{code:_g._$CODE_NOTASGN,message:"请指定要载入的资源队列！"});return this}this.__key=_u._$randNumberString();var _cache={error:0,loaded:0,total:_list.length};this.__setLoadData(this.__key,_cache);for(var i=0,l=_list.length;i<l;i++){if(!_list[i]){_cache.total--;continue}this.__doLoadQueue(_list[i])}this._$dispatchEvent("onloading");return this}})();
(function(){var _=NEJ.P,_o=NEJ.O,_e=_("nej.e"),_h=_("nej.h"),_p=_("nej.ut.j"),_proHtmlLoader;if(!!_p._$$HtmlLoader)return;_p._$$HtmlLoader=NEJ.C();_proHtmlLoader=_p._$$HtmlLoader._$extend(_p._$$Loader);_proHtmlLoader.__getRequest=function(){var _iframe=_e._$create("iframe");_iframe.width=0;_iframe.height=0;_iframe.style.display="none";return _iframe};_proHtmlLoader.__doRequest=function(_request){_request.src=this.__url;document.body.appendChild(_request)};_proHtmlLoader.__onError=function(_error){var _iframe=(this.__getLoadData(this.__url)||_o).request;this.__doCallback("onerror",_error);_h.__removeIFrameKeepHistory(_iframe)};_proHtmlLoader.__onLoaded=function(){var _body=null,_iframe=(this.__getLoadData(this.__url)||_o).request;try{_body=_iframe.contentWindow.document.body}catch(ex){}this.__doCallback("onloaded",_body);_h.__removeIFrameKeepHistory(_iframe)}})();
(function(){var _=NEJ.P,_e=_("nej.e"),_p=_("nej.ut.j"),_proStyleLoader;if(!!_p._$$StyleLoader)return;_p._$$StyleLoader=NEJ.C();_proStyleLoader=_p._$$StyleLoader._$extend(_p._$$Loader);_proStyleLoader.__getRequest=function(){return _e._$create("link")};_proStyleLoader.__doRequest=function(_request){_request.href=this.__url;document.head.appendChild(_request)}})();
(function(){var _=NEJ.P,_e=_("nej.e"),_p=_("nej.ut.j"),_proScriptLoader;if(!!_p._$$ScriptLoader)return;_p._$$ScriptLoader=NEJ.C();_proScriptLoader=_p._$$ScriptLoader._$extend(_p._$$Loader);_proScriptLoader.__reset=function(_options){this.__supReset(_options);this.__async=_options.async;this.__charset=_options.charset;this.__qopt.async=!1;this.__qopt.charset=this.__charset};_proScriptLoader.__getRequest=function(){var _request=_e._$create("script");if(this.__async!=null)_request.async=!!this.__async;if(this.__charset!=null)_request.charset=this.__charset;return _request};_proScriptLoader.__clearRequest=function(_request){_e._$remove(_request)}})();
(function(){var _=NEJ.P,_j=_("nej.j"),_p=_("nej.ut.j");_j._$loadScript=function(_url,_options){_p._$$ScriptLoader._$allocate(_options)._$load(_url);return this};_j._$queueScript=function(_list,_options){_p._$$ScriptLoader._$allocate(_options)._$queue(_list);return this};_j._$loadStyle=function(_url,_options){_p._$$StyleLoader._$allocate(_options)._$load(_url);return this};_j._$queueStyle=function(_list,_options){_p._$$StyleLoader._$allocate(_options)._$queue(_list);return this};_j._$loadHtml=function(_url,_options){_p._$$HtmlLoader._$allocate(_options)._$load(_url);return this}})();
(function(){var _=NEJ.P,_f=NEJ.F,_c=_("nej.c"),_g=_("nej.g"),_e=_("nej.e"),_j=_("nej.j"),_t=_("nej.ut"),_p=_("nej.ut.j"),_pro;if(!!_p._$$Proxy)return;_p._$$Proxy=NEJ.C();_pro=_p._$$Proxy._$extend(_t._$$Event);_pro.__reset=function(_options){this.__supReset(_options);this.__request={url:"",sync:!1,cookie:!1,type:"text",method:"GET",timeout:6e4};NEJ.EX(this.__request,_options);var _csrf=_c._$get("csrf");if(!!_csrf.cookie&&!!_csrf.param){var _query=encodeURIComponent(_csrf.param)+"="+encodeURIComponent(_j._$cookie(_csrf.cookie)||""),_split=this.__request.url.indexOf("?")<0?"?":"&";this.__request.url+=_split+_query}this.__headers=_options.headers||{};var _content=this.__headers[_g._$HEAD_CT];if(_content==null)this.__headers[_g._$HEAD_CT]=_g._$HEAD_CT_FORM};_pro.__destroy=function(){this.__supDestroy();delete this.__rkey;delete this.__request;delete this.__headers};_pro.__onLoadRequest=function(_event){var _status=_event.status;if(_status==-1){this._$dispatchEvent("onerror",{code:_g._$CODE_TIMEOUT,message:"请求["+this.__request.url+"]超时！"});return}if((""+_status).indexOf("2")!=0){this._$dispatchEvent("onerror",{data:_status,code:_g._$CODE_ERRSERV,message:"服务器返回异常状态["+_status+"]!"});return}this._$dispatchEvent("onload",_e._$text2type(_event.result,this.__request.type))};_pro.__doSendRequest=_f;_pro._$send=function(_data){var _url=this.__request.url;if(!_url){this._$dispatchEvent("onerror",{code:_g._$CODE_NOTASGN,message:"没有输入请求地址！"});return this}try{this.__request.data=_data==null?null:_data;var _event={request:this.__request,headers:this.__headers};try{this._$dispatchEvent("onbeforerequest",_event)}catch(ex){console.error(ex.message);console.error(ex.stack)}this.__doSendRequest(_event)}catch(e){this._$dispatchEvent("onerror",{code:_g._$CODE_ERRSERV,message:"请求["+_url+"]失败:"+e.message+"！"})}return this};_pro._$abort=_f})();
(function(){var _=NEJ.P,_f=NEJ.F,_h=_("nej.h"),_g=_("nej.g"),_u=_("nej.u"),_p=_("nej.ut.j"),_cache={},_proXHRProxy;if(!!_p._$$XHRProxy)return;_p._$$XHRProxy=NEJ.C();_proXHRProxy=_p._$$XHRProxy._$extend(_p._$$Proxy);_proXHRProxy.__destroy=function(){this.__supDestroy();window.clearTimeout(this.__timer);delete this.__timer;try{this.__xhr.onreadystatechange=_f;this.__xhr.abort()}catch(e){}delete this.__xhr};_proXHRProxy.__doSendRequest=function(){var _doSetHeader=function(_value,_key){this.__xhr.setRequestHeader(_key,_value)};return function(_options){var _request=_options.request,_headers=_options.headers;this.__xhr=_h.__getXMLHttpRequest();if(_headers[_g._$HEAD_CT]===_g._$HEAD_CT_FILE){delete _headers[_g._$HEAD_CT];this.__xhr.upload.onprogress=this.__onStateChange._$bind(this,1);if(_request.data.tagName==="FORM")_request.data=new FormData(_request.data)}this.__xhr.onreadystatechange=this.__onStateChange._$bind(this,2);if(_request.timeout!=0){this.__timer=window.setTimeout(this.__onStateChange._$bind(this,3),_request.timeout)}this.__xhr.open(_request.method,_request.url,!_request.sync);_u._$forIn(_headers,_doSetHeader,this);if(!!this.__request.cookie&&"withCredentials"in this.__xhr)this.__xhr.withCredentials=!0;this.__xhr.send(_request.data)}}();_proXHRProxy.__onStateChange=function(_type){switch(_type){case 1:this._$dispatchEvent("onuploading",arguments[1]);break;case 2:if(this.__xhr.readyState==4)this.__onLoadRequest({status:this.__xhr.status,result:this.__xhr.responseText||""});break;case 3:this.__onLoadRequest({status:-1});break}};_proXHRProxy._$abort=function(){this.__onLoadRequest({status:0});return this}})();
(function(){var _b=NEJ.P("nej.p"),_p=window,_is=_b._$IS,_es=_is.ipad||_is.iphone;if(!_es&&!!_p.requestAnimationFrame&&!!_p.cancelRequestAnimationFrame)return;var _prefix=_b._$KERNEL.prefix.pro;if(!_es&&!!_p[_prefix+"RequestAnimationFrame"]&&!!_p[_prefix+"CancelRequestAnimationFrame"]){_p.requestAnimationFrame=_p[_prefix+"RequestAnimationFrame"];_p.cancelRequestAnimationFrame=_p[_prefix+"CancelRequestAnimationFrame"];return}var _fps=_is.desktop?80:_is.ios?50:30;_p.requestAnimationFrame=function(_callback){return window.setTimeout(function(){try{_callback(+(new Date))}catch(ex){}},1e3/_fps)};_p.cancelRequestAnimationFrame=function(_id){window.clearTimeout(_id);return this}})();
(function(){var _=NEJ.P,_f=NEJ.F,_u=_("nej.u"),_e=_("nej.e"),_v=_("nej.v"),_h=_("nej.h"),_x=_("nej.x"),_w=_("nej.ut.j.cb"),_seed_html;if(!!_e._$flash)return;_e._$flash=_x._$flash=function(){var _cache={},_reg0=/^(?:mouse.*|(?:dbl)?click)$/i;window.onflashevent=function(_event){var _id=decodeURIComponent(_event.target),_type=_event.type.toLowerCase();var _handler=_cache[_id+"-on"+_type];if(!!_handler){try{_handler(_event)}catch(e){}return}var _target=_cache[_id+"-tgt"];if(!!_target&&_reg0.test(_type)){_doMouseEventBubble(_target,_event)}};var _doInitDOM=function(_options){var _parent=_e._$get(_options.parent)||document.body,_html=_e._$getHtmlTemplate(_seed_html,_options);_parent.insertAdjacentHTML(!_options.hidden?"beforeEnd":"afterBegin",_html)};var _doMouseEventBubble=function(_id,_event){var _type=_event.type.toLowerCase();requestAnimationFrame(function(){_v._$dispatchEvent(_id,_type)})};var _doCheckFlashInit=function(_flash){return!!_flash&&!!_flash.inited&&!!_flash.inited()};var _doCheckFlash=function(_id){var _arr=[document.embeds[_id],_e._$get(_id),document[_id],window[_id]],_index=_u._$forIn(_arr,_doCheckFlashInit),_flash=_arr[_index],_ctkey=_id+"-count";_cache[_ctkey]++;if(!!_flash||_cache[_ctkey]>100){_cache[_id](_flash);delete _cache[_id];delete _cache[_ctkey];return}window.setTimeout(_doCheckFlash._$bind(null,_id),300)};var _doInitFlashEvent=function(_options){var _id=_options.id,_params=_options.params;if(!_params){_params={};_options.params=_params}var _vars=_params.flashvars||"";_vars+=(!_vars?"":"&")+("id="+_id);if(!_options.hidden&&(!!_options.target||_h.__canFlashEventBubble(_params.wmode))){var _tid=_e._$id(_options.target)||_e._$id(_options.parent),_cid=_u._$uniqueID();_w["cb"+_cid]=_doMouseEventBubble._$bind(null,_tid);_vars+="&onevent=nej.ut.j.cb.cb"+_cid;_cache[_id+"-tgt"]=_tid}_params.flashvars=_vars;_u._$forIn(_options,function(_value,_key){if(_u._$isFunction(_value)&&_key!="onready"){_cache[_id+"-"+_key]=_value}})};return function(_options){_options=NEJ.X({},_options);if(!_options.src)return;var _id="flash_"+_u._$uniqueID();_options.id=_id;_doInitFlashEvent(_options);_doInitDOM(_options);if(!_options.onready)return;_cache[_id]=_options.onready;_cache[_id+"-count"]=0;_doCheckFlash(_id)}}();_seed_html=_e._$addHtmlTemplate('{var hide  = defined("hidden")&&!!hidden}{var param = defined("params")&&params||NEJ.O}{var width = !hide?width:"1px",height = !hide?height:"1px"}{if hide}<div style="position:absolute;top:0;left:0;width:1px;height:1px;z-index:10000;overflow:hidden;">{/if}<object classid = "clsid:d27cdb6e-ae6d-11cf-96b8-444553540000"codebase = "http://fpdownload.macromedia.com/get/flashplayer/current/swflash.cab"width = "${width|default:"100px"}"height = "${height|default:"100px"}" id="${id}"><param value="${src}" name="movie">{for x in param}<param value="${x}" name="${x_key}"/>{/for}<embed src="${src}" name="${id}"width="${width|default:"100px"}"height="${height|default:"100px"}"pluginspage="http://www.adobe.com/go/getflashplayer"type="application/x-shockwave-flash"{for x in param}${x_key}="${x}" {/for}></embed></object>{if hide}</div>{/if}');_x.isChange=!0})();
(function(){var _=NEJ.P,_c=_("nej.c"),_e=_("nej.e"),_u=_("nej.u"),_p=_("nej.ut.j"),_w=_("nej.ut.j.cb"),_cache={},_seed=+(new Date),_proFlashProxy;if(!!_p._$$FlashProxy)return;_w["ld"+_seed]=function(_key,_text){var _proxy=_cache[_key];if(!_proxy)return;delete _cache[_key];_proxy.__onLoadRequest({status:200,result:_text})};_w["er"+_seed]=function(_key,_status){var _proxy=_cache[_key];if(!_proxy)return;delete _cache[_key];_proxy.__onLoadRequest({status:_status||0})};_p._$$FlashProxy=NEJ.C();_proFlashProxy=_p._$$FlashProxy._$extend(_p._$$Proxy);_proFlashProxy.__doSendRequest=function(_options){var _flash=_cache.flash;if(_u._$isArray(_flash)){_flash.push(this.__doSendRequest._$bind(this,_options));return}if(!_flash){_cache.flash=[this.__doSendRequest._$bind(this,_options)];_e._$flash({hidden:!0,src:_c._$get("ajax.swf"),onready:function(_flash){if(!_flash)return;var _list=_cache.flash;_cache.flash=_flash;_u._$reverseEach(_list,function(_handler){try{_handler()}catch(e){}})}});return}this.__rkey="swf-"+_u._$randNumberString();_cache[this.__rkey]=this;var _data=NEJ.EX({url:"",data:null,method:"GET"},_options.request);_data.key=this.__rkey;_data.headers=_options.headers;_data.onerror="nej.ut.j.cb.er"+_seed;_data.onloaded="nej.ut.j.cb.ld"+_seed;var _policy=_c._$getFlashProxy(_data.url);if(!!_policy)_data.policyURL=_policy;_flash.request(_data)};_proFlashProxy._$abort=function(){delete _cache[this.__rkey];this.__onLoadRequest({status:0});return this}})();
(function(){var _=NEJ.P,_o=NEJ.O,_h=_("nej.h");_h.__formatOrigin=function(){var _reg=/^([\w]+?:\/\/.*?(?=\/|$))/i;return function(_origin){_origin=_origin||"";if(_reg.test(_origin))return RegExp.$1;return"*"}}();_h.__formatPassData=function(_data){return _data};_h.__postMessage=function(_window,_options){if(!_window.postMessage)return;_options=_options||_o;_window.postMessage(_h.__formatPassData(_options.data),_h.__formatOrigin(_options.origin))}})();
(function(){var _=NEJ.P,_p=_("nej.p"),_h=_("nej.h"),_u=_("nej.u"),_v=_("nej.v"),_t=_("nej.ut");if(_p._$NOT_PATCH.trident)return;if(!!window.postMessage){_h.__formatPassData=_h.__formatPassData._$aop(function(_event){_event.stopped=!0;_event.value=JSON.stringify(_event.args[0])});return}var _key="MSG|",_queue=[];var _doCheckWindowName=function(){var _name=unescape(window.name||"").trim();if(!_name||_name.indexOf(_key)!=0)return;window.name="";var _result=_u._$string2object(_name.replace(_key,""),"|"),_origin=(_result.origin||"").toLowerCase();if(!!_origin&&_origin!="*"&&location.href.toLowerCase().indexOf(_origin)!=0)return;_v._$dispatchEvent(window,"message",{data:JSON.parse(_result.data||"null"),source:window.frames[_result.self]||_result.self,origin:_h.__formatOrigin(_result.ref||document.referrer)})};var _doCheckNameQueue=function(){var _checklist;var _doSetWindowName=function(_map,_index,_list){if(_u._$indexOf(_checklist,_map.w)<0){_checklist.push(_map.w);_list.splice(_index,1);_map.w.name=_map.d}};return function(){_checklist=[];_u._$reverseEach(_queue,_doSetWindowName);_checklist=null}}();_h.__postMessage=function(){var _doSerialize=function(_data){var _result={};_data=_data||_o;_result.origin=_data.origin||"";_result.ref=location.href;_result.self=_data.source;_result.data=JSON.stringify(_data.data);return _key+_u._$object2string(_result,"|",!0)};return _h.__postMessage._$aop(function(_event){_event.stopped=!0;var _args=_event.args;_queue.unshift({w:_args[0],d:escape(_doSerialize(_args[1]))})})}();_t._$$CustomEvent._$allocate({element:window,event:"message"});window.setInterval(_doCheckNameQueue,100);window.setInterval(_doCheckWindowName,20)})();
(function(){var _=NEJ.P,_h=_("nej.h"),_e=_("nej.e"),_j=_("nej.j");_j._$postMessage=function(){var _self=window.name||"_parent",_wmap={_top:window.top,_self:window,_parent:window.parent};return function(_target,_options){if(typeof _target=="string"){_target=_wmap[_target]||window.frames[_target];if(!_target)return this}var _data=NEJ.X({origin:"*",source:_self},_options);_h.__postMessage(_target,_data);return this}}()})();
(function(){var _=NEJ.P,_c=_("nej.c"),_e=_("nej.e"),_v=_("nej.v"),_u=_("nej.u"),_j=_("nej.j"),_p=_("nej.ut.j"),_cache={},_proFrameProxy;if(!!_p._$$FrameProxy)return;_p._$$FrameProxy=NEJ.C();_proFrameProxy=_p._$$FrameProxy._$extend(_p._$$Proxy);_proFrameProxy.__init=function(){var _flag="NEJ-AJAX-DATA:",_init=!1;var _doReceiveMessage=function(_event){var _data=_event.data;if(_data.indexOf(_flag)!=0)return;_data=JSON.parse(_data.replace(_flag,""));var _proxy=_cache[_data.key];if(!_proxy)return;delete _cache[_data.key];_data.result=decodeURIComponent(_data.result||"");_proxy.__onLoadRequest(_data)};var _doInitMessage=function(){if(!_init){_init=!0;_v._$addEvent(window,"message",_doReceiveMessage)}};return function(){this.__supInit();_doInitMessage()}}();_proFrameProxy.__doSendRequest=function(_options){var _request=_options.request,_proxy=_c._$getFrameProxy(_request.url),_frame=_cache[_proxy];if(_u._$isArray(_frame)){_frame.push(this.__doSendRequest._$bind(this,_options));return}if(!_frame){_cache[_proxy]=[this.__doSendRequest._$bind(this,_options)];_e._$createXFrame({src:_proxy,visible:!1,onload:function(_event){var _list=_cache[_proxy];_cache[_proxy]=_v._$getElement(_event).contentWindow;_u._$reverseEach(_list,function(_handler){try{_handler()}catch(e){}})}});return}this.__rkey="frm-"+_u._$randNumberString();_cache[this.__rkey]=this;var _data=NEJ.EX({url:"",data:null,timeout:0,method:"GET"},_request);_data.key=this.__rkey;_data.headers=_options.headers;_j._$postMessage(_cache[_proxy],{data:_data})};_proFrameProxy._$abort=function(){delete _cache[this.__rkey];this.__onLoadRequest({status:0});return this}})();
(function(){var _=NEJ.P,_o=NEJ.O,_g=_("nej.g"),_e=_("nej.e"),_v=_("nej.v"),_u=_("nej.u"),_j=_("nej.j"),_p=_("nej.ut.j"),_cache={},_proUploadProxy;if(!!_p._$$UploadProxy)return;_p._$$UploadProxy=NEJ.C();_proUploadProxy=_p._$$UploadProxy._$extend(_p._$$Proxy);_proUploadProxy.__init=function(){var _flag="NEJ-UPLOAD-RESULT:",_init=!1;var _doReceiveMessage=function(_event){var _data=_event.data;if(_data.indexOf(_flag)!=0)return;_data=JSON.parse(_data.replace(_flag,""));var _proxy=_cache[_data.key];if(!_proxy)return;delete _cache[_data.key];_proxy.__onLoadRequest(decodeURIComponent(_data.result))};var _doInitMessage=function(){if(!_init){_init=!0;_v._$addEvent(window,"message",_doReceiveMessage)}};return function(){this.__supInit();_doInitMessage()}}();_proUploadProxy.__destroy=function(){this.__supDestroy();_e._$remove(this.__frame);delete this.__frame;window.clearTimeout(this.__timer);delete this.__timer};_proUploadProxy.__onLoadRequest=function(_text){var _json;try{_json=JSON.parse(_text);this._$dispatchEvent("onload",_json)}catch(e){this._$dispatchEvent("onerror",{code:_g._$CODE_ERREVAL,message:_text})}};_proUploadProxy.__doSendRequest=function(){var _doCheckResult=function(){var _body,_text;try{var _body=this.__frame.contentWindow.document.body,_text=_body.innerText||_body.textContent}catch(e){return}this.__onLoadRequest(_text)};var _doProgress=function(_url,_mode,_cookie){_j._$request(_url,{type:"json",method:"POST",cookie:_cookie,mode:parseInt(_mode)||0,onload:function(_data){if(!this.__timer)return;this._$dispatchEvent("onuploading",_data);this.__timer=window.setTimeout(_doProgress._$bind(this,_url,_mode,_cookie),1e3)}._$bind(this),onerror:function(_error){if(!this.__timer)return;this.__timer=window.setTimeout(_doProgress._$bind(this,_url,_mode,_cookie),1e3)}._$bind(this)})};return function(_options){var _request=_options.request,_headers=_options.headers,_form=_request.data,_name="fom-"+_u._$randNumberString();_cache[_name]=this;_form.target=_name;_form.method="POST";_form.enctype=_g._$HEAD_CT_FILE;_form.encoding=_g._$HEAD_CT_FILE;var _url=_form.action||"",_sep=_url.indexOf("?")<=0?"?":"&";_form.action=_url+_sep+"_proxy_=form";this.__frame=_e._$createXFrame({name:_name,onload:function(_event){var _frame=_v._$getElement(_event);_v._$addEvent(_frame,"load",_doCheckResult._$bind(this));_form.submit();var _qurl=(_form.nej_query||_o).value;if(!_qurl)return;var _mode=(_form.nej_mode||_o).value,_cookie=(_form.nej_cookie||_o).value=="true";this.__timer=window.setTimeout(_doProgress._$bind(this,_qurl,_mode,_cookie),100)}._$bind(this)})}}();_proUploadProxy._$abort=function(){this._$dispatchEvent("onerror",{code:_g._$CODE_ERRABRT,message:"客户端终止文件上传"});return this}})();
(function(){var _=NEJ.P,_o=NEJ.O,_h=_("nej.h"),_p=_("nej.ut.j");_h.__getXMLHttpRequest=function(){return new XMLHttpRequest};_h.__getProxyByMode=function(_mode,_upload,_options){var _map=!!_upload?{2:_p._$$UploadProxy}:{2:_p._$$FrameProxy,3:_p._$$FlashProxy};return(_map[_mode]||_p._$$XHRProxy)._$allocate(_options)}})();
(function(){var _=NEJ.P,_p=_("nej.p"),_h=_("nej.h");if(_p._$NOT_PATCH.trident)return;_h.__getXMLHttpRequest=function(){var _msxml=["Msxml2.XMLHTTP.6.0","Msxml2.XMLHTTP.3.0","Msxml2.XMLHTTP.4.0","Msxml2.XMLHTTP.5.0","MSXML2.XMLHTTP","Microsoft.XMLHTTP"];var _getXHR=function(){for(var i=0,l=_msxml.length;i<l;i++){try{return new ActiveXObject(_msxml[i])}catch(e){}}return null};return _h.__getXMLHttpRequest._$aop(function(_event){if(!!window.XMLHttpRequest)return;_event.stopped=!0;_event.value=_getXHR()})}();_h.__getProxyByMode=function(){var _pmap={0:2,1:3};return _h.__getProxyByMode._$aop(function(_event){var _args=_event.args,_mode=_args[0]||0;_args[0]=!!_args[1]?2:_pmap[_mode]||_mode})}()})();
(function(){var _=NEJ.P,_o=NEJ.O,_f=NEJ.F,_h=_("nej.h"),_g=_("nej.g"),_u=_("nej.u"),_j=_("nej.j"),_p=_("nej.ut.j"),_xcache={},_doFilter=_f;_j._$abort=function(_sn){var _cache=_xcache[_sn];if(!_cache)return this;_cache.req._$abort();return this};_j._$filter=function(_filter){_doFilter=_filter||_f;return this};_j._$request=function(){var _location=(location.protocol+"//"+location.host).toLowerCase();var _isXDomain=function(_url){var _origin=_u._$url2origin(_url);return!!_origin&&_origin!=_location};var _isUpload=function(_headers){return(_headers||_o)[_g._$HEAD_CT]==_g._$HEAD_CT_FILE};var _getProxy=function(_options){var _upload=_isUpload(_options.headers);if(!_isXDomain(_options.url)&&!_upload)return _p._$$XHRProxy._$allocate(_options);return _h.__getProxyByMode(_options.mode,_upload,_options)};var _doClear=function(_sn){var _cache=_xcache[_sn];if(!_cache)return;if(!!_cache.req)_cache.req._$recycle();delete _xcache[_sn]};var _doCallback=function(_sn,_type){var _cache=_xcache[_sn];if(!_cache)return;_doClear(_sn);try{var _event={type:_type,result:arguments[2]};_doFilter(_event);if(!_event.stopped)(_cache[_type]||_f)(_event.result)}catch(ex){console.error(ex.message);console.error(ex)}};var _onLoad=function(_sn,_data){_doCallback(_sn,"onload",_data)};var _onError=function(_sn,_error){_doCallback(_sn,"onerror",_error)};return function(_url,_options){_options=_options||{};var _sn=_u._$randNumberString(),_cache={onload:_options.onload||_f,onerror:_options.onerror||_f};_xcache[_sn]=_cache;_options.onload=_onLoad._$bind(null,_sn);_options.onerror=_onError._$bind(null,_sn);if(!!_options.query){var _sep=_url.indexOf("?")<0?"?":"&",_query=_options.query;if(_u._$isObject(_query))_query=_u._$object2query(_query);if(!!_query)_url+=_sep+_query}_options.url=_url;_cache.req=_getProxy(_options);_cache.req._$send(_options.data);return _sn}}();_j._$upload=function(_form,_options){var _option={mode:0,type:"json",query:null,cookie:!1,headers:{},onload:null,onerror:null,onuploading:null,onbeforerequest:null};NEJ.EX(_option,_options);_option.data=_form;_option.method="POST";_option.timeout=0;_option.headers[_g._$HEAD_CT]=_g._$HEAD_CT_FILE;return _j._$request(_form.action,_option)}})();
(function(){var _=NEJ.P,_o=NEJ.O,_e=_("nej.e"),_v=_("nej.v"),_u=_("nej.u"),_j=_("nej.j"),_t=_("nej.ut"),_cache={},_skey=+(new Date)+"-";_e._$parseTemplate=function(){var _count=0;var _doCheckReady=function(){if(_count>0)return;_count=0;_v._$dispatchEvent(document,"templateready");_v._$clearEvent(document,"templateready")};var _doParseSrc=function(_textarea,_options){var _src=_e._$dataset(_textarea,"src");if(!_src)return;_options=_options||_o;var _root=_options.root;if(!_root){_root=_textarea.ownerDocument.location.href}else{_root=_u._$absolute(_root)}_src=_src.split(",");_u._$forEach(_src,function(_value,_index,_list){_list[_index]=_u._$absolute(_value,_root)});return _src};var _doAddStyle=function(_textarea,_options){if(!_textarea)return;var _src=_doParseSrc(_textarea,_options);if(!!_src)_j._$queueStyle(_src,{version:_e._$dataset(_textarea,"version")});_e._$addStyle(_textarea.value)};var _onAddScript=function(_value){_count--;_e._$addScript(_value);_doCheckReady()};var _doAddScript=function(_textarea,_options){if(!_textarea)return;var _src=_doParseSrc(_textarea,_options),_val=_textarea.value;if(!!_src){_count++;var _options={version:_e._$dataset(_textarea,"version"),onloaded:_onAddScript._$bind(null,_val)};window.setTimeout(_j._$queueScript._$bind(_j,_src,_options),0);return}_e._$addScript(_val)};var _onAddHtml=function(_body){_count--;_e._$parseTemplate(_body);_doCheckReady()};var _doAddHtml=function(_textarea,_options){if(!_textarea)return;var _src=_doParseSrc(_textarea,_options)[0];if(!!_src){_count++;var _options={version:_e._$dataset(_textarea,"version"),onloaded:_onAddHtml};window.setTimeout(_j._$loadHtml._$bind(_j,_src,_options),0)}};var _onAddTextResource=function(_id,_text){_count--;_e._$addTextTemplate(_id,_text||"");_doCheckReady()};var _doAddTextResource=function(_textarea,_options){if(!_textarea||!_textarea.id)return;var _id=_textarea.id,_src=_doParseSrc(_textarea,_options)[0];if(!!_src){_count++;var _url=_src+(_src.indexOf("?")<0?"?":"&")+(_e._$dataset(_textarea,"version")||""),_options={type:"text",method:"GET",onload:_onAddTextResource._$bind(null,_id)};window.setTimeout(_j._$request._$bind(_j,_url,_options),0)}};var _doAddTemplate=function(_node,_options){var _type=_node.name.toLowerCase();switch(_type){case"jst":_e._$addHtmlTemplate(_node,!0);return;case"txt":_e._$addTextTemplate(_node.id,_node.value||"");return;case"ntp":_e._$addNodeTemplate(_node.value||"",_node.id);return;case"js":_doAddScript(_node,_options);return;case"css":_doAddStyle(_node,_options);return;case"html":_doAddHtml(_node,_options);return;case"res":_doAddTextResource(_node,_options);return}};_t._$$CustomEvent._$allocate({element:document,event:"templateready",oneventadd:_doCheckReady});return function(_element,_options){_element=_e._$get(_element);if(!!_element){var _list=_element.tagName=="TEXTAREA"?[_element]:_element.getElementsByTagName("textarea");_u._$forEach(_list,function(_node){_doAddTemplate(_node,_options)});_e._$remove(_element,!0)}_doCheckReady();return this}}();_e._$addTextTemplate=function(_key,_value){_cache[_key]=_value||"";return this};_e._$getTextTemplate=function(_key){return _cache[_key]||""};_e._$addNodeTemplate=function(_element,_key){_key=_key||_u._$randNumberString();_element=_e._$get(_element)||_element;_e._$addTextTemplate(_skey+_key,_element);_e._$removeByEC(_element);return _key};_e._$getNodeTemplate=function(_key){if(!_key)return null;_key=_skey+_key;var _value=_e._$getTextTemplate(_key);if(!_value)return null;if(_u._$isString(_value)){_value=_e._$html2node(_value);_e._$addTextTemplate(_key,_value)}return _value.cloneNode(!0)};_e._$getItemTemplate=function(){var _doFilter=function(_value,_key){return _key=="offset"||_key=="limit"};return function(_list,_item,_options){var _arr=[];if(!_list||!_list.length||!_item)return _arr;_options=_options||_o;var _len=_list.length,_beg=parseInt(_options.offset)||0,_end=Math.min(_len,_beg+(parseInt(_options.limit)||_len)),_opt={total:_list.length,range:[_beg,_end]};NEJ.X(_opt,_options,_doFilter);for(var i=_beg,_instance;i<_end;i++){_opt.index=i;_opt.data=_list[i];_instance=_item._$allocate(_opt);var _id=_instance._$getId();_cache[_id]=_instance;_instance._$recycle=_instance._$recycle._$aop(function(_id,_instance){delete _cache[_id];delete _instance._$recycle}._$bind(null,_id,_instance));_arr.push(_instance)}return _arr}}();_e._$getItemById=function(_id){return _cache[_id]};_e._$setup=function(_klass,_options){_options=_options||_o;_e._$parseTemplate(_options.tid||"template-box");_v._$addEvent(document,"templateready",function(){_klass._$allocate()._$dispatchEvent("onshow",_options)})};_("dbg").dumpTC=function(){return _cache}})();
(function(){var _=NEJ.P,_o=NEJ.O,_f=NEJ.F,_e=_("nej.e"),_u=_("nej.u"),_t=_("nej.ut"),_p=_("nej.ui"),_pro;if(!!_p._$$Abstract)return;_p._$$Abstract=NEJ.C();_pro=_p._$$Abstract._$extend(_t._$$Event);_pro.__init=function(){this.__supInit();_e._$dumpCSSText();this.__initXGui();this.__initNode()};_pro.__reset=function(_options){this.__supReset(_options);this.__doInitClass(_options.clazz);this._$appendTo(_options.parent)};_pro.__destroy=function(){this.__supDestroy();this.__doDelParentClass();delete this.__parent;_e._$removeByEC(this.__body);_e._$delClassName(this.__body,this.__class);delete this.__class};_pro.__initXGui=_f;_pro.__initNode=function(){if(!this.__seed_html)this.__initNodeTemplate();this.__body=_e._$getNodeTemplate(this.__seed_html);if(!this.__body)this.__body=_e._$create("div",this.__seed_css);_e._$addClassName(this.__body,this.__seed_css)};_pro.__initNodeTemplate=_f;_pro.__doInitClass=function(_clazz){this.__class=_clazz||"";_e._$addClassName(this.__body,this.__class)};_pro.__doAddParentClass=function(){if(!this.__seed_css)return;_e._$addClassName(this.__parent,this.__seed_css+"-parent")};_pro.__doDelParentClass=function(){if(!this.__seed_css)return;_e._$delClassName(this.__parent,this.__seed_css+"-parent")};_pro._$getBody=function(){return this.__body};_pro._$appendTo=function(_parent){if(!this.__body)return this;this.__doDelParentClass();if(_u._$isFunction(_parent)){this.__parent=_parent(this.__body)}else{this.__parent=_e._$get(_parent);if(!!this.__parent)this.__parent.appendChild(this.__body)}this.__doAddParentClass();return this};_pro._$show=function(){if(!this.__parent||!this.__body||this.__body.parentNode==this.__parent)return this;this.__parent.appendChild(this.__body);return this};_pro._$hide=function(){_e._$removeByEC(this.__body);return this}})();
(function(){var _=NEJ.P,_o=NEJ.O,_f=NEJ.F,_p=_("nej.ui"),_pro;if(!!_p._$$Item)return;_p._$$Item=NEJ.C();_pro=_p._$$Item._$extend(_p._$$Abstract);_pro.__init=function(){this.__id=this.__genId();this.__supInit()};_pro.__reset=function(_options){this.__supReset(_options);this.__index=_options.index;this.__total=_options.total;this.__range=_options.range;this._$refresh(_options.data)};_pro.__destroy=function(){this.__supDestroy();delete this.__data;delete this.__index;delete this.__total;delete this.__range};_pro.__doRefresh=_f;_pro.__genId=function(){var _seed=+(new Date);return function(){return"itm-"+ ++_seed}}();_pro._$getId=function(){return this.__id};_pro._$getData=function(){return this.__data};_pro._$refresh=function(_data){this.__data=_data||{};this.__doRefresh(this.__data)}})();
(function(){var _=NEJ.P,_e=_("nej.e"),_v=_("nej.v"),_p=_("nej.ui"),_pro,_sup;if(!!_p._$$ListItem)return;_p._$$ListItem=NEJ.C();_pro=_p._$$ListItem._$extend(_p._$$Item);_sup=_p._$$ListItem._$supro;_pro.__reset=function(_options){this.__pkey=_options.pkey||"id";this.__prefix=_options.prefix||"";this.__supReset(_options)};_pro.__onDelete=function(_data){this._$dispatchEvent("ondelete",{ext:_data,id:this._$getId(),data:this._$getData(),body:this._$getBody()})};_pro.__onUpdate=function(_data){this._$dispatchEvent("onupdate",{ext:_data,id:this._$getId(),data:this._$getData(),body:this._$getBody()})};_pro._$refresh=function(_data){_sup._$refresh.apply(this,arguments);var _id=this.__data[this.__pkey];this.__id=this.__prefix+_id||this.__genId()}})();
(function(){var _=NEJ.P,_o=NEJ.O,_r=NEJ.R,_e=_("nej.e"),_u=_("nej.u"),_p=_("nej.ui"),_pro,_seed_css,_seed_page;if(!!_p._$$AbstractPager)return;_p._$$AbstractPager=NEJ.C();_pro=_p._$$AbstractPager._$extend(_p._$$Abstract);_pro.__reset=function(_options){this.__bopt=NEJ.X({},_options);this.__popt=NEJ.X({},_options);delete this.__bopt.onchange;this.__popt.onchange=this.__onChange._$bind(this);this.__supReset(_options);this.__doResetNumber({number:_options.number,label:_options.label||_o})};_pro.__destroy=function(){this.__supDestroy();if(!!this.__page){this.__page._$recycle();delete this.__page}delete this.__bopt;delete this.__popt;this._$unbind();this.__body.innerHTML="&nbsp;"};_pro.__initXGui=function(){this.__seed_css=_seed_css};_pro.__doResetNumber=function(_data){_e._$renderHtmlTemplate(this.__body,_seed_page,_data);var _seed=_e._$getHtmlTemplateSeed();this.__popt.list=_e._$getByClassName(this.__body,"js-i-"+_seed);this.__popt.pbtn=(_e._$getByClassName(this.__body,"js-p-"+_seed)||_r)[0];this.__popt.nbtn=(_e._$getByClassName(this.__body,"js-n-"+_seed)||_r)[0]};_pro.__initNode=function(){this.__supInitNode()};_pro.__doGenPageListXhtml=function(_data){return _e._$getHtmlTemplate(_seed_page,_data)};_pro.__onChange=function(_event){if(this.__flag)return;var _index=_event.index,_total=_event.total;this.__flag=!0;this._$updatePage(_index,_total);_u._$forEach(this.__binders,function(_pager){_pager._$updatePage(_index,_total)});this.__flag=!1;this._$dispatchEvent("onchange",_event)};_pro._$bind=function(_parent){_parent=_e._$get(_parent);if(!_parent)return this;var _opt=NEJ.X({},this.__bopt);_opt.parent=_parent;_opt.index=this._$getIndex();_opt.total=this._$getTotal();var _pager=this.constructor._$allocate(_opt);_pager._$setEvent("onchange",this.__popt.onchange);if(!this.__binders)this.__binders=[];this.__binders.push(_pager);return this};_pro._$unbind=function(){var _doRemove=function(_pager,_index,_list){_pager._$recycle();_list.splice(_index,1)};return function(){_u._$reverseEach(this.__binders,_doRemove)}}();_pro._$setIndex=function(_index){if(!this.__page)return;this.__page._$setIndex(_index)};_pro._$getIndex=function(){if(!this.__page)return 1;return this.__page._$getIndex()};_pro._$getTotal=function(){if(!this.__page)return 1;return this.__page._$getTotal()};_pro._$updatePage=function(_index,_total){if(!this.__page)return;this.__page._$updatePage(_index,_total)};_pro._$updateTotal=function(_total){if(!this.__page)return;this.__page._$updateTotal(_total)};_seed_css=_e._$pushCSSText(".#<uispace>{font-size:12px;line-height:160%;}.#<uispace> a{margin:0 2px;padding:2px 8px;color:#333;border:1px solid #aaa;text-decoration:none;}.#<uispace> .js-disabled{cursor:default;}.#<uispace> .js-selected{cursor:default;background:#bbb;}");_seed_page=_e._$addHtmlTemplate('{trim}{if !defined("noprv")||!noprv}<a href="#" class="zbtn zprv ${\'js-p-\'|seed}">${label.prev||"上一页"}</a>{/if}{list 1..number as x}<a href="#" class="zpgi zpg${x} ${\'js-i-\'|seed}"></a>{/list}{if !defined("nonxt")||!nonxt}<a href="#" class="zbtn znxt ${\'js-n-\'|seed}">${label.next||"下一页"}</a>{/if}{/trim}')})();
(function(){var _=NEJ.P,_o=NEJ.O,_f=NEJ.F,_e=_("nej.e"),_v=_("nej.v"),_u=_("nej.u"),_p=_("nej.ut"),_pro;if(!!_p._$$AbstractPage)return;_p._$$AbstractPage=NEJ.C();_pro=_p._$$AbstractPage._$extend(_p._$$Event);_pro.__reset=function(_options){this.__supReset(_options);this.__pbtn=_options.pbtn;this.__nbtn=_options.nbtn;this.__sbtn=_options.sbtn;this.__ebtn=_options.ebtn;this.__name=_options.event||"click";this.__selected=_options.selected||"js-selected";this.__disabled=_options.disabled||"js-disabled";this.__doPageListCheck(_options.list);this.__limit=_options.limit||Infinity;this._$updatePage(_options.index||1,_options.total||1)};_pro.__destroy=function(){this.__supDestroy();delete this.__list;delete this.__name;delete this.__pbtn;delete this.__nbtn;delete this.__sbtn;delete this.__ebtn;delete this.__last;delete this.__total;delete this.__index;delete this.__extdata;delete this.__selected;delete this.__disabled};_pro.__doPageListCheck=function(){var _doInitDomEvent=function(_node){this.__list.push(_node);this.__doInitDomEvent([[_node,this.__name,this.__onClick._$bind2(this,0)]])};return function(_list){this.__list=[];this.__doInitDomEvent([[this.__pbtn,"click",this.__onClick._$bind2(this,-1)],[this.__nbtn,"click",this.__onClick._$bind2(this,1)],[this.__sbtn,"click",this.__onClick._$bind2(this,-2)],[this.__ebtn,"click",this.__onClick._$bind2(this,2)]]);_u._$forEach(_list,_doInitDomEvent,this)}}();_pro.__doSetNodeIndex=function(_node,_index){if(_index==null){_node.innerText="";_e._$setStyle(_node,"display","none");_e._$delClassName(_node,this.__selected)}else{_node.innerText=_index;_e._$setStyle(_node,"display","");_index==this.__index?_e._$addClassName(_node,this.__selected):_e._$delClassName(_node,this.__selected)}};_pro.__doSyncBtnState=function(){if(this.__index<=1){_e._$addClassName(this.__pbtn,this.__disabled);_e._$addClassName(this.__sbtn,this.__disabled)}else{_e._$delClassName(this.__pbtn,this.__disabled);_e._$delClassName(this.__sbtn,this.__disabled)}if(this.__index>=this.__total){_e._$addClassName(this.__nbtn,this.__disabled);_e._$addClassName(this.__ebtn,this.__disabled)}else{_e._$delClassName(this.__nbtn,this.__disabled);_e._$delClassName(this.__ebtn,this.__disabled)}};_pro.__doRefreshPage=_f;_pro.__doChangeIndex=function(){this.__doRefreshPage();this.__doSyncBtnState();this._$dispatchEvent("onchange",{last:this.__last,total:this.__total,index:this.__index,ext:this.__extdata})};_pro.__doSaveIndex=function(_index){_index=parseInt(_index);if(isNaN(_index)||this.__total==null)return!1;_index=Math.max(1,Math.min(_index,this.__total));this.__last=this.__index;this.__index=_index;return!0};_pro.__doSaveTotal=function(_total){_total=parseInt(_total);if(isNaN(_total)||_total<1)return!1;this.__total=Math.min(_total,this.__limit);return!0};_pro.__onClick=function(_event,_flag){_v._$stopDefault(_event);var _element=_v._$getElement(_event);if(!_element||_e._$hasClassName(_element,this.__selected)||_e._$hasClassName(_element,this.__disabled))return;var _index=_element.innerText;switch(_flag){case 1:case-1:_index=this.__index+_flag;break;case 2:_index=this.__total;break;case-2:_index=1;break}this._$setIndex(_index)};_pro._$getIndex=function(){return this.__index};_pro._$setIndex=function(_index){var _oidx=this.__index;this.__doSaveIndex(_index);if(_oidx!=this.__index)this.__doChangeIndex();return this};_pro._$getTotal=function(){return this.__total};_pro._$setTotal=function(_total){if(this.__doSaveTotal(_total)&&this.__index!=null){this.__index=1;this.__doChangeIndex()}return this};_pro._$updateTotal=function(_total){if(this.__doSaveTotal(_total)){this.__doRefreshPage();this.__doSyncBtnState()}return this};_pro._$updatePage=function(_index,_total){if(!this.__doSaveTotal(_total)||!this.__doSaveIndex(_index))return this;this.__doChangeIndex();return this}})();
(function(){var _=NEJ.P,_o=NEJ.O,_e=_("nej.e"),_u=_("nej.u"),_x=_("nej.x"),_p=_("nej.ut"),_pro;if(!!_p._$$Page)return;_p._$$Page=NEJ.C();_pro=_p._$$Page._$extend(_p._$$AbstractPage);_pro.__init=function(){this.__ndot=[];this.__supInit()};_pro.__destroy=function(){this.__supDestroy();this.__doRecycleDotNode()};_pro.__doRecycleDotNode=function(){var _doRecycle=function(_node,_index,_list){_e._$remove(_node);_list.splice(_index,1)};return function(){_u._$reverseEach(this.__ndot,_doRecycle)}}();_pro.__doRefreshPage=function(){this.__extdata={last:!1,first:!1,list:this.__list};this.__doRecycleDotNode();this.__doSetNodeIndex(this.__list[0],1);var _point=1,_length=this.__list.length;if(this.__total<_length){for(var _page;_point<_length;_point++){_page=_point+1;this.__doSetNodeIndex(this.__list[_point],_page>this.__total?null:_page)}return}if(this.__index>1){var _count=Math.floor((_length-2)/2),_mxbeg=this.__total-_length+2,_start=Math.max(2,this.__index-_count);if(this.__total>=_length){_start=Math.min(_start,_mxbeg)}if(_start>2){var _node=_e._$create("span","zdot");this.__ndot.push(_node);_node.innerText="...";this.__list[0].insertAdjacentElement("afterEnd",_node);this.__extdata.first=!0}for(var _index;;_point++){_index=_start+_point-1;if(_index>this.__index)break;this.__doSetNodeIndex(this.__list[_point],_index)}}if(this.__index<this.__total){var _index,_start=this.__index+1;for(var i=0,l=_length-2;;i++,_point++){_index=_start+i;if(_point>l||_index>this.__total)break;this.__doSetNodeIndex(this.__list[_point],_index)}if(_index<this.__total){var _node=_e._$create("span","zdot");this.__ndot.push(_node);_node.innerText="...";this.__list[_point].insertAdjacentElement("beforeBegin",_node);this.__extdata.last=!0}if(_index<=this.__total){this.__doSetNodeIndex(this.__list[_point++],this.__total)}}for(;_point<_length;_point++){this.__doSetNodeIndex(this.__list[_point])}};_e._$page=_x._$page=function(_parent,_options){var _id=_e._$id(_parent);if(!_id)return null;if(!_p._$api(_id,_p._$$Page)){_options=_options||{};var _list=!_options.clazz?_e._$getChildren(_id):_e._$getByClassName(_id,_options.clazz);_options.pbtn=_list.shift();_options.nbtn=_list.pop();_options.list=_list;delete _options.clazz}return _p._$api(_id,_p._$$Page,_options||_o)};_x.isChange=!0})();
(function(){var _=NEJ.P,_o=NEJ.O,_r=NEJ.R,_e=_("nej.e"),_u=_("nej.u"),_t=_("nej.ut"),_p=_("nej.ui"),_pro,_sup,_seed_html;if(!!_p._$$Pager)return;_p._$$Pager=NEJ.C();_pro=_p._$$Pager._$extend(_p._$$AbstractPager);_sup=_p._$$Pager._$supro;_pro.__reset=function(_options){_options.number=parseInt(_options.number)||9;this.__supReset(_options);this.__page=_t._$$Page._$allocate(this.__popt)};_pro.__onChange=function(_event){if(!!this.__bopt.noend){var _dext=_event.ext||_o,_list=_dext.list||_r;if(_dext.last){_e._$setStyle(_list[_list.length-1],"display","none")}}_sup.__onChange.apply(this,arguments)}})();
(function(){var _=NEJ.P,_r=NEJ.R,_f=NEJ.F,_u=_("nej.u"),_j=_("nej.j"),_p=_("nej.ut"),_ckey="dat-"+ +(new Date),_proCache;if(!!_p._$$Cache)return;_p._$$Cache=NEJ.C();_proCache=_p._$$Cache._$extend(_p._$$Event);_proCache.__init=function(){this.__supInit();this.__cache=this.constructor[_ckey];if(!this.__cache){this.__cache={};this.__cache[_ckey+"-l"]={};this.constructor[_ckey]=this.__cache}};_proCache.__getDataInCache=function(_key){return this.__cache[_key]};_proCache.__setDataInCache=function(_key,_value){this.__cache[_key]=_value};_proCache.__getDataInCacheWithDefault=function(_key,_default){var _data=this.__getDataInCache(_key);if(_data==null){_data=_default;this.__setDataInCache(_key,_data)}return _data};_proCache.__delDataInCache=function(_key){if(_key!=null){delete this.__cache[_key];return}_u._$forIn(this.__cache,function(_item,_key){if(_key==_ckey+"-l")return;this.__delDataInCache(_key)},this)};_proCache.__delDataInStorage=function(_key){if(!!_j._$delDataInStorage)return _j._$delDataInStorage(_key)};_proCache.__getDataInStorage=function(_key){if(!!_j._$getDataInStorage)return _j._$getDataInStorage(_key)};_proCache.__setDataInStorage=function(_key,_value){if(!!_j._$setDataInStorage)_j._$setDataInStorage(_key,_value)};_proCache.__getDataLocalWithDefault=function(_key,_default){var _data=this.__getDataLocal(_key);if(_data==null){_data=_default;this.__setDataLocal(_key,_data)}return _data};_proCache.__getDataLocal=function(_key){var _data=this.__getDataInCache(_key);if(_data!=null)return _data;_data=this.__getDataInStorage(_key);if(_data!=null)this.__setDataInCache(_key,_data);return _data};_proCache.__setDataLocal=function(_key,_value){this.__setDataInStorage(_key,_value);this.__setDataInCache(_key,_value)};_proCache.__delDataLocal=function(_key){if(_key!=null){delete this.__cache[_key];if(!!_j._$delDataInStorage)_j._$delDataInStorage(_key);return}_u._$forIn(this.__cache,function(_item,_key){if(_key==_ckey+"-l")return;this.__delDataLocal(_key)},this)};_proCache._$clearDataLocal=function(){this.__delDataLocal();return this};_proCache.__doCallbackRequest=function(_key){var _data=this.__cache[_ckey+"-l"],_args=_r.slice.call(arguments,1);_u._$forEach(_data[_key],function(_callback){try{_callback.apply(null,_args)}catch(ex){console.error(ex.message);console.error(ex.stack)}});delete _data[_key]};_proCache.__doQueueRequest=function(_key,_callback){_callback=_callback||_f;var _list=this.__cache[_ckey+"-l"][_key];if(!_list){_list=[_callback];this.__cache[_ckey+"-l"][_key]=_list;return!1}_list.push(_callback);return!0};_proCache.__hasFragment=function(_list,_offset,_limit){if(!_list)return!1;_offset=parseInt(_offset)||0;_limit=parseInt(_limit)||0;if(!_limit){if(!_list.loaded)return!1;_limit=_list.length}if(!!_list.loaded)_limit=Math.min(_limit,_list.length-_offset);for(var i=0;i<_limit;i++)if(!_list[_offset+i])return!1;return!0}})();
(function(){var _=NEJ.P,_o=NEJ.O,_f=NEJ.F,_u=_("nej.u"),_p=_("nej.ut"),_pro,_sup;if(!!_p._$$ListCache)return;_p._$$ListCache=NEJ.C();_pro=_p._$$ListCache._$extend(_p._$$Cache);_sup=_p._$$ListCache._$supro;_pro.__reset=function(_options){this.__supReset(_options);this.__key=_options.key||"id";this.__data=_options.data||_o;this.__auto=!!_options.autogc;this.__doSwapCache(_options.id)};_pro.__destroy=function(){this.__supDestroy();if(!!this.__timer){this.__doGCAction()}};_pro.__doSwapCache=function(_id){var _cache;if(!!_id){_cache=this.__cache[_id];if(!_cache){_cache={};this.__cache[_id]=_cache}}_cache=_cache||this.__cache;_cache.hash=_cache.hash||{};this.__lspl=_cache};_pro.__doGCAction=function(){this.__timer=window.clearTimeout(this.__timer);var _map={};_u._$forIn(this.__lspl,function(_list,_key){if(_key=="hash")return;if(!_u._$isArray(_list))return;_u._$forEach(_list,function(_item){if(!_item)return;_map[_item[this.__key]]=!0},this)},this);_u._$forIn(this.__getHash(),function(_item,_id,_hash){if(!_map[_id]){delete _hash[_id]}})};_pro.__doGCSchedule=function(){if(!!this.__timer){this.__timer=window.clearTimeout(this.__timer)}this.__timer=window.setTimeout(this.__doGCAction._$bind(this),150)};_pro.__doSaveItemToCache=function(_item,_lkey){_item=this.__doFormatItem(_item,_lkey)||_item;if(!_item)return null;var _key=_item[this.__key];if(_key!=null){var _itm=this.__getHash()[_key];if(!!_itm)_item=NEJ.X(_itm,_item);this.__getHash()[_key]=_item}delete _item.__dirty__;return _item};_pro.__doRemoveItemFromList=function(_lkey,_id){var _result=null,_pkey=this.__key;if(!_u._$isArray(_id)){var _result=null,_pkey=this.__key;_id=_id[_pkey]||_id;var _list=this._$getListInCache(_lkey),_index=_u._$indexOf(_list,function(_itm){return!!_itm&&_itm[_pkey]==_id});if(_index>=0){_result=_list[_index];_list.splice(_index,1)}return _result}var _result=[];_u._$forEach(_id,function(_item){_result.push(this.__doRemoveItemFromList(_item))},this);return _result};_pro.__doFormatItem=_f;_pro.__doUnshiftToList=function(_key,_item){if(!_item)return;if(!_u._$isArray(_item)){var _list=this._$getListInCache(_key),_item=this.__doSaveItemToCache(_item,_key);if(!!_item)_list.unshift(_item);return}_u._$reverseEach(_item,this.__doUnshiftToList._$bind(this,_key))};_pro._$setTotal=function(_key,_total){var _list=this._$getListInCache(_key);_list.length=Math.max(_list.length,_total);this._$setLoaded(_key);return this};_pro._$getTotal=function(_key){return this._$getListInCache(_key).length};_pro._$setLoaded=function(_key,_loaded){this._$getListInCache(_key).loaded=_loaded!=!1;return this};_pro._$isLoaded=function(_key){return!!this._$getListInCache(_key).loaded};_pro._$setListInCache=function(_key,_list){this._$clearListInCache(_key);this.__getList({key:_key,offset:0,limit:_list.length+1},{list:_list,total:_list.length})};_pro._$getListInCache=function(){var _doFormatKey=function(_key){return(_key||"")+(!_key?"":"-")+"list"};return function(_key){var _key=_doFormatKey(_key),_list=this.__lspl[_key];if(!_list){_list=[];this.__lspl[_key]=_list}return _list}}();_pro.__getHash=function(){var _hash=this.__lspl.hash;if(!_hash){_hash={};this.__lspl.hash=_hash}return _hash};_pro._$pullRefresh=function(){var _doFormatKey=function(_options){return"r-"+_options.key};return function(_options){var _ropt=NEJ.X({},_options),_rkey=_doFormatKey(_ropt);if(!this.__doQueueRequest(_rkey,this._$dispatchEvent._$bind(this))){_ropt.rkey=_rkey;_ropt.onload=this.__pullRefresh._$bind(this,_ropt);this._$dispatchEvent("dopullrefresh",_ropt)}return this}}();_pro.__pullRefresh=function(_options,_list){this.__doUnshiftToList(_options.key,_list);this.__doCallbackRequest(_options.rkey,"onpullrefresh",_options)};_pro._$getList=function(){var _doFormatKey=function(_options){return"r-"+_options.key+"-"+_options.offset+"-"+_options.limit};return function(_options){_options=_options||_o;var _ropt={key:""+_options.key||"",ext:_options.ext||null,data:_options.data||null,offset:parseInt(_options.offset)||0,limit:parseInt(_options.limit)||0},_list=this._$getListInCache(_ropt.key);if(this.__hasFragment(_list,_ropt.offset,_ropt.limit)){this._$dispatchEvent("onlistload",_ropt);return this}var _rkey=_doFormatKey(_ropt);if(!this.__doQueueRequest(_rkey,this._$dispatchEvent._$bind(this))){_ropt.rkey=_rkey;_ropt.onload=this.__getList._$bind(this,_ropt);this._$dispatchEvent("doloadlist",_ropt)}return this}}();_pro.__getList=function(){var _doClear=function(_item,_index,_list){if(!!_item){return!0}_list.splice(_index,1)};return function(_options,_result){_options=_options||_o;var _key=_options.key,_offset=_options.offset,_chlist=this._$getListInCache(_key);var _list=_result||[];if(!_u._$isArray(_list)){_list=_result.result||_result.list||[];var _total=parseInt(_result.total);if(!isNaN(_total)||_total>_list.length){this._$setTotal(_key,_total)}}_u._$forEach(_list,function(_item,_index){_chlist[_offset+_index]=this.__doSaveItemToCache(_item,_key)},this);if(_list.length<_options.limit){this._$setLoaded(_key);_u._$reverseEach(_chlist,_doClear)}this.__doCallbackRequest(_options.rkey,"onlistload",_options)}}();_pro._$clearListInCache=function(){var _doClear=function(_item,_index,_list){_list.splice(_index,1)};return function(_key){if(!!_key){var _list=this._$getListInCache(_key);_u._$reverseEach(_list,_doClear);this._$setLoaded(_key,!1);if(this.__auto){this.__doGCSchedule()}}else{_u._$forIn(this.__lspl,function(_list,_key){if(_key=="hash"||!_u._$isArray(_list))return;_key=_key.substr(0,_key.length-5);this._$clearListInCache(_key)},this)}return this}}();_pro.__doCheckItemValidity=function(_item,_lkey){return!_item.__dirty__};_pro._$getItemInCache=function(_id){return this.__getHash()[_id]};_pro._$clearItemInCache=function(_id){var _item=this._$getItemInCache(_id);if(!!_item)_item.__dirty__=!0};_pro._$getItem=function(){var _doFormatKey=function(_options){return"r-"+_options.key+"-"+_options.id};return function(_options){_options=_options||_o;var _id=_options[this.__key],_ropt={id:_id,ext:_options.ext,data:_options.data||{},key:""+_options.key||""};_item=this._$getItemInCache(_id);_ropt.data[this.__key]=_id;if(!!_item&&this.__doCheckItemValidity(_item,_ropt.key)){this._$dispatchEvent("onitemload",_ropt);return this}var _rkey=_doFormatKey(_ropt);if(!this.__doQueueRequest(_rkey,this._$dispatchEvent._$bind(this))){_ropt.rkey=_rkey;_ropt.onload=this.__getItem._$bind(this,_ropt);this._$dispatchEvent("doloaditem",_ropt)}return this}}();_pro.__getItem=function(_options,_item){_options=_options||_o;this.__doSaveItemToCache(_item,_options.key);this.__doCallbackRequest(_options.rkey,"onitemload",_options)};_pro._$addItem=function(_options){_options=NEJ.X({},_options);_options.onload=this.__addItem._$bind(this,_options);this._$dispatchEvent("doadditem",_options)};_pro.__addItem=function(_options,_item){var _key=_options.key;_item=this.__doSaveItemToCache(_item,_key);if(!!_item){var _flag=0,_list=this._$getListInCache(_key);if(!_options.push){_flag=-1;var _offset=_options.offset||0;_list.splice(_offset,0,_item)}else if(_list.loaded){_flag=1;_list.push(_item)}else{_list.length++}}var _event={key:_key,flag:_flag,data:_item,action:"add",ext:_options.ext};this._$dispatchEvent("onitemadd",_event);return _event};_pro._$deleteItem=function(_options){_options=NEJ.X({},_options);_options.onload=this.__deleteItem._$bind(this,_options);this._$dispatchEvent("dodeleteitem",_options)};_pro.__deleteItem=function(_options,_isok){var _item,_key=_options.key;if(!!_isok){var _id=_options.id;_item=this._$getItemInCache(_id)||null;this.__doRemoveItemFromList(_key,_id)}var _event={key:_key,data:_item,action:"delete",ext:_options.ext};this._$dispatchEvent("onitemdelete",_event);return _event};_pro._$updateItem=function(_options){_options=NEJ.X({},_options);_options.onload=this.__updateItem._$bind(this,_options);this._$dispatchEvent("doupdateitem",_options)};_pro.__updateItem=function(_options,_item){var _key=_options.key;if(!!_item)_item=this.__doSaveItemToCache(_item,_key);var _event={key:_key,data:_item,action:"update",ext:_options.ext};this._$dispatchEvent("onitemupdate",_event);return _event}})();
(function(){var _=NEJ.P,_o=NEJ.O,_f=NEJ.F,_u=_("nej.u"),_p=_("nej.ut"),_pro;if(!!_p._$$AbstractListCache)return;_p._$$AbstractListCache=NEJ.C();_pro=_p._$$AbstractListCache._$extend(_p._$$ListCache);_pro.__reset=function(_options){this.__supReset(_options);this._$batEvent({doloadlist:this.__doLoadList._$bind(this),doloaditem:this.__doLoadItem._$bind(this),doadditem:this.__doAddItem._$bind(this),dodeleteitem:this.__doDeleteItem._$bind(this),doupdateitem:this.__doUpdateItem._$bind(this),dopullrefresh:this.__doPullRefresh._$bind(this)})};_pro.__doLoadList=_f;_pro.__doPullRefresh=_f;_pro.__doLoadItem=_f;_pro.__doAddItem=_f;_pro.__doDeleteItem=_f;_pro.__doUpdateItem=_f})();
(function(){var _=NEJ.P,_o=NEJ.O,_f=NEJ.F,_e=_("nej.e"),_v=_("nej.v"),_u=_("nej.u"),_i=_("nej.ui"),_p=_("nej.ut"),_pro;if(!!_p._$$ListModule)return;_p._$$ListModule=NEJ.C();_pro=_p._$$ListModule._$extend(_p._$$Event);_pro.__reset=function(_options){this.__ropt={};this.__supReset(_options);this.__lbox=_e._$get(_options.parent);this.__iopt={parent:this.__lbox};this.__limit=parseInt(_options.limit)||10;this.__first=parseInt(_options.first)||this.__limit;this.__doResetTemplate(_options.item);this.__doResetCache(_options.cache||_o);this.__doResetPager(_options.pager||_o);this._$refresh()};_pro.__destroy=function(){this._$dispatchEvent("onbeforerecycle");this.__doClearListBox();this.__supDestroy();if(this.__ropt.clear){this.__cache._$clearListInCache(this.__ropt.key)}this.__cache._$recycle();if(!!this.__pager){this.__pager._$recycle();delete this.__pager}delete this.__pkls;delete this.__popt;delete this.__pulling;delete this.__cache;delete this.__lbox;delete this.__ikls;delete this.__iopt;delete this.__ropt};_pro.__getItemBodyId=function(_id){var _prefix=(this.__iopt||_o).prefix||"";return _prefix+_id+_e._$getHtmlTemplateSeed()};_pro.__getPageInfo=function(_point,_offset,_limit,_length){var _result={index:1,total:1};if(_offset>=_point){_result.index=Math.floor((_offset-_point)/_limit)+2}if(_length>_point){_result.total=Math.ceil((_length-_point)/_limit)+1}return _result};_pro.__doResetJSTTemplate=function(_key){delete this.__ikls;this.__ikey=_key;this.__doInitDomEvent([[this.__lbox,"click",this.__onCheckAction._$bind(this)]])};_pro.__doResetTemplate=function(_item){if(_u._$isString(_item)){this.__doResetJSTTemplate(_item);return}NEJ.X(this.__iopt,_item);var _klass=this.__iopt.klass;delete this.__iopt.klass;if(_u._$isString(_klass)){this.__doResetJSTTemplate(_klass);return}delete this.__ikey;this.__ikls=_klass;this.__iopt.ondelete=this._$dispatchEvent._$bind(this,"ondelete");this.__iopt.onupdate=this._$dispatchEvent._$bind(this,"onupdate")};_pro.__doResetCache=function(_cache){var _klass=_cache.klass,_copt=NEJ.X({},_cache);this.__ropt.key=_copt.lkey;this.__ropt.data=_copt.data||{};this.__ropt.clear=!!_copt.clear;this.__iopt.pkey=_copt.key||"id";_copt.onlistload=this.__cbListLoad._$bind(this);_copt.onpullrefresh=this.__cbPullRefresh._$bind(this);if(!!_klass&&"onlistchange"in _klass){this.__doInitDomEvent([[_klass,"listchange",this.__cbListChange._$bind(this)]])}else{_copt.onitemadd=this.__cbItemAdd._$bind(this);_copt.onitemdelete=this.__cbItemDelete._$bind(this);_copt.onitemupdate=this.__cbItemUpdate._$bind(this)}this.__cache=(_klass||_p._$$ListCache)._$allocate(_copt);if(_cache.total!=null){this.__cache._$setTotal(this.__ropt.key,_cache.total)}if(!!_cache.list){this.__cache._$setListInCache(this.__ropt.key,_cache.list)}};_pro.__doResetPager=function(_pager){this.__pkls=_pager.klass||_i._$$Pager;this.__popt=NEJ.X({},_pager);if(_u._$isArray(_pager.parent)){this.__popt.parent=_pager.parent[0];this.__pbid=_pager.parent.slice(1);if(!this.__pbid||!this.__pbid.length){delete this.__pbid}}delete this.__popt.klass};_pro.__doClearListBox=function(){var _reg0=/^(?:table|tr|tbody|ul|ol|select)$/i;return function(){this._$dispatchEvent("onbeforelistclear",{parent:this.__lbox});if(!!this.__items&&this.__items.length>0){this.__items=this.__ikls._$recycle(this.__items);delete this.__items}if(_reg0.test(this.__lbox.tagName)){_e._$clearChildren(this.__lbox)}else{this.__lbox.innerHTML=""}}}();_pro.__doSwitchPagerShow=function(_display){if(!!this.__popt.fixed)return;_e._$setStyle(this.__popt.parent,"display",_display);_u._$forEach(this.__pbid,function(_parent){_e._$setStyle(_parent,"display",_display)},this)};_pro.__doRefreshByPager=function(){var _index=this.__popt.index||1;delete this.__popt.index;if(!!this.__pager){_index=this.__pager._$getIndex()}this.__doChangePage({last:_index,index:_index})};_pro.__doChangePage=function(_event){this._$dispatchEvent("onpagechange",_event)};_pro.__doChangeOffset=function(_offset){this.__ropt.offset=_offset;this.__doLoadList()};_pro.__doGenRequestOpt=function(_options){return _options};_pro.__doLoadList=function(){this.__doBeforeListLoad();var _data=this.__ropt.data;_data.offset=this.__ropt.offset;var _first=_data.offset==0;_data.total=_first;this.__ropt.limit=_first?this.__first:this.__limit;_data.limit=this.__ropt.limit;this.__cache._$getList(this.__doGenRequestOpt(NEJ.X({},this.__ropt)))};_pro.__cbListLoad=function(_options){if(_options.key!=this.__ropt.key||_options.offset!=this.__ropt.offset)return;this.__doBeforeListShow();var _list=this.__cache._$getListInCache(_options.key);if(!_list||!_list.length){this.__doShowEmpty();return}var _limit=_options.limit,_offset=_options.offset;if(this.__doBeforeListRender(_list,_offset,_limit))return;this._$dispatchEvent("onbeforelistrender",{list:_list,offset:_offset,parent:this.__lbox});if(!!this.__ikey){this.__iopt.xlist=_list;this.__iopt.beg=_offset;this.__iopt.end=Math.min(_list.length,_offset+_limit)-1;this.__iopt.act="list";var _html=_e._$getHtmlTemplate(this.__ikey,this.__iopt);this.__doShowListByJST(_html)}else{this.__iopt.limit=_limit;this.__iopt.offset=_offset;var _items=_e._$getItemTemplate(_list,this.__ikls,this.__iopt);this.__doShowListByItem(_items)}this._$dispatchEvent("onafterlistrender",{list:_list,offset:_offset,parent:this.__lbox})};_pro.__cbPullRefresh=function(_options){if(!this.__pulling)return;delete this.__pulling;this.__doBeforeListShow("onafterpullrefresh");this._$refresh()};_pro.__doSyncPager=function(_index,_total){if(!!this.__pager){if((this.__popt||_o).limit>0){_total=Math.min(_total,this.__popt.limit)}var _index2=this.__pager._$getIndex(),_total2=this.__pager._$getTotal();if(_index2>_total||_total!=_total2){this.__pager._$recycle();delete this.__pager;this.__doChangePage({last:_index2,index:Math.min(_index,_total)});return!0}}else{this.__popt.index=_index;this.__popt.total=_total;this.__pager=this.__pkls._$allocate(this.__popt);this.__pager._$setEvent("onchange",this.__doChangePage._$bind(this));_u._$forEach(this.__pbid,function(_parent){this.__pager._$bind(_parent)},this)}};_pro.__doFormatData=function(){var _seed=+(new Date);return function(_data){var _id=_data[this.__iopt.pkey];if(!_id){_data["dirty-data"]=!0;_data[this.__iopt.pkey]="dirty-"+_seed++}return _data}}();_pro.__doSplitDirty=function(_data){var _id=_data[this.__iopt.pkey];if(!!_data["dirty-data"]){delete _data["dirty-data"];delete _data[this.__iopt.pkey]}return _id};_pro.__doInsertOneItem=function(){var _doInsert=function(_pos,_body){this.__lbox.insertAdjacentElement(_pos,_body)};return function(_pos,_data){var _xlist=[_data];if(!!this.__ikey){this.__iopt.xlist=_xlist;this.__iopt.beg=0;this.__iopt.end=0;this.__iopt.act="add";this.__doShowListByJST(_e._$getHtmlTemplate(this.__ikey,this.__iopt),_pos)}else{this.__iopt.limit=1;this.__iopt.offset=0;this.__iopt.parent=_doInsert._$bind(this,_pos);var _items=_e._$getItemTemplate(_xlist,this.__ikls,this.__iopt);this.__iopt.parent=this.__lbox;this.__doShowListByItem(_items)}}}();_pro.__doBeforeListLoad=_f;_pro.__doBeforeListShow=function(_name){var _event={parent:this.__lbox};this._$dispatchEvent(_name||"onafterlistload",_event);if(!_event.stopped){_e._$removeByEC(this.__ntip)}};_pro.__doBeforeListRender=_f;_pro.__doRenderMessage=function(_message,_pos){if(_u._$isString(_message)){if(!this.__ntip)this.__ntip=_e._$create("div");this.__ntip.innerHTML=_message}else{this.__ntip=_message}this.__lbox.insertAdjacentElement(_pos||"beforeEnd",this.__ntip)};_pro.__doShowMessage=function(_name,_default,_pos){var _event={parent:this.__lbox};this._$dispatchEvent(_name,_event);if(!_event.stopped){this.__doRenderMessage(_event.value||_default,_pos)}};_pro.__doShowEmpty=_f;_pro.__doShowListByJST=_f;_pro.__doShowListByItem=_f;_pro.__onCheckAction=function(){var _reg0=/^(?:delete|update)$/;return function(_event){var _node=_v._$getElement(_event,"d:action");if(!_node)return;var _action=_e._$dataset(_node,"action");if(!_reg0.test(_action))return;var _id=_e._$dataset(_node,"id");if(!_id)return;var _item=this.__cache._$getItemInCache(_id);if(!_item)return;_v._$stop(_event);this._$dispatchEvent("on"+_action,{data:_item,id:_item[this.__iopt.pkey],body:_e._$get(this.__getItemBodyId(_id))})}}();_pro.__cbItemAdd=_f;_pro.__doDeleteItem=function(_event){var _data=_event.data||{},_options={data:_data,key:this.__ropt.key,id:_data[this.__iopt.pkey]};this._$dispatchEvent("onbeforedelete",_options);this.__cache._$deleteItem(_options)};_pro.__cbItemDelete=_f;_pro.__doUpdateItem=function(_event){var _data=_event.data||{},_options={data:_data,key:this.__ropt.key};this._$dispatchEvent("onbeforeupdate",_options);this.__cache._$updateItem(_options)};_pro.__cbItemUpdate=function(_event){this.__doCheckResult(_event,"onafterupdate");if(_event.stopped)return;var _id=_event.data[this.__iopt.pkey];if(!!this.__items){var _item=_e._$getItemById(_id);if(!!_item)_item._$refresh(_event.data)}else{var _node=this._$getItemBody(_id);if(!_node)return;var _list=this.__cache._$getListInCache(_event.key),_index=_u._$indexOf(_list,_event.data);if(_index<0)return;this.__iopt.xlist=_list;this.__iopt.beg=_index;this.__iopt.end=_index;this.__iopt.act="update";var _html=_e._$getHtmlTemplate(this.__ikey,this.__iopt);_node.insertAdjacentHTML("afterEnd",_html);_e._$remove(_node)}this._$dispatchEvent("onafterupdaterender",{data:_event.data,parent:this.__lbox})};_pro.__doCheckResult=function(_event,_name){var _item=_event.data;if(!_item||_item[this.__iopt.pkey]==null){this._$dispatchEvent("onerror",_event);_event.stopped=!0}if(!_event.stopped){this._$dispatchEvent(_name,_event)}};_pro.__cbAppendList=_f;_pro.__cbUnshiftList=_f;_pro.__cbListChange=function(_event){if(_event.key!=this.__ropt.key)return;switch(_event.action){case"add":this.__cbItemAdd(_event);break;case"delete":this.__cbItemDelete(_event);break;case"update":this.__cbItemUpdate(_event);break;case"refresh":this._$refresh();break;case"unshift":this.__cbUnshiftList(_event.offset,_event.limit);break;case"append":this.__cbAppendList(_event.offset,_event.limit);break}};_pro._$update=function(_item){this.__doUpdateItem({data:_item})};_pro._$delete=function(_item){this.__doDeleteItem({data:_item})};_pro._$add=function(_item){this.__cache._$addItem({data:_item,key:this.__ropt.key})};_pro._$cache=function(){return this.__cache};_pro._$unshift=function(_data){this.__doInsertOneItem("afterBegin",this.__doFormatData(_data));return this.__doSplitDirty(_data)};_pro._$append=function(_data){this.__doInsertOneItem("beforeEnd",this.__doFormatData(_data));return this.__doSplitDirty(_data)};_pro._$refresh=function(){this.__doClearListBox();this.__doRefreshByPager()};_pro._$pullRefresh=function(){if(!!this.__pulling)return;this.__pulling=!0;this.__doShowMessage("onbeforepullrefresh","列表刷新中...","afterBegin");this.__cache._$pullRefresh({key:this.__ropt.key,data:this.__ropt.data})};_pro._$getTotal=function(){return this.__cache._$getTotal(this.__ropt.key)};_pro._$getPager=function(){return this.__pager};_pro._$getItemBody=function(_id){if(!!this.__ikey){return _e._$get(this.__getItemBodyId(_id))}else{var _item=_e._$getItemById(_id);if(!!_item){return _item._$getBody()}}};_pro._$isLoaded=function(){return this.__cache._$isLoaded(this.__ropt.key)}})();
(function(){var _=NEJ.P,_o=NEJ.O,_r=NEJ.R,_u=_("nej.u"),_e=_("nej.e"),_p=_("nej.ut"),_pro,_sup;if(!!_p._$$ListModulePG)return;_p._$$ListModulePG=NEJ.C();_pro=_p._$$ListModulePG._$extend(_p._$$ListModule);_sup=_p._$$ListModulePG._$supro;_pro.__getPageInfo=function(_offset,_length){return _sup.__getPageInfo.call(this,this.__first,_offset,this.__limit,_length)};_pro.__getOffsetByIndex=function(_index){var _offset=0;if(_index>1)_offset=this.__first+(_index-2)*this.__limit;return _offset};_pro.__doChangePage=function(_event){_sup.__doChangePage.apply(this,arguments);if(!_event.stopped){this.__doChangeOffset(this.__getOffsetByIndex(_event.index))}};_pro.__doBeforeListLoad=function(){this.__doClearListBox();this.__doShowMessage("onbeforelistload","列表加载中...")};_pro.__doBeforeListShow=function(){_sup.__doBeforeListShow.apply(this,arguments);this.__doClearListBox()};_pro.__doBeforeListRender=function(_list,_offset,_limit){var _info=this.__getPageInfo(_offset,_list.length);if(this.__doSyncPager(_info.index,_info.total))return!0;this.__doSwitchPagerShow(_info.total>1?"":"none")};_pro.__doShowEmpty=function(){this.__doShowMessage("onemptylist","没有列表数据！")};_pro.__doRenderMessage=function(_message,_pos){if(!_pos&&_u._$isString(_message)){this.__lbox.innerHTML=_message;return}_sup.__doRenderMessage.apply(this,arguments)};_pro.__doShowListByJST=function(_html){this.__lbox.innerHTML=_html};_pro.__doShowListByItem=function(_items){this.__items=_items};_pro.__cbItemAdd=function(_event){this.__doCheckResult(_event,"onafteradd");if(!_event.stopped)this._$refresh()};_pro.__cbItemDelete=function(_event){this.__doCheckResult(_event,"onafterdelete");if(!_event.stopped)this._$refresh()};_pro.__cbAppendList=function(_offset,_limit){var _index=1;if(!!this.__pager){_index=this.__pager._$getIndex()}var _beg=this.__getOffsetByIndex(_index),_end=_beg+(_index>1?this.__limit:this.__first);if(_offset>=_end&&!!this.__pager){var _info=this.__getPageInfo(0,this._$getTotal());this.__pager._$updateTotal(_info.total);this.__doSwitchPagerShow(_info.total>1?"":"none")}else{this._$refresh()}};_pro.__cbUnshiftList=function(_offset,_limit){var _index=1;if(!!this.__pager){_index=this.__pager._$getIndex()}var _beg=this.__getOffsetByIndex(_index),_info=this.__getPageInfo(_beg,this._$getTotal());this.__doChangePage({last:_index,index:_info.index})}})();
(function(){var using=NEJ.P;var t=using("nej.ut");var d=using("dd.data");var u=using("nej.u");var du=using("dd.util");var proto;d._$$Cache=NEJ.C();proto=d._$$Cache._$extend(t._$$AbstractListCache);proto.__cbLoadList=function(key,callback,json){callback(json&&json.result)};proto.__cbAddItem=function(callback,json){var data=json&&json.result;if(u._$isFunction(callback)&&u._$isObject(data)){callback(data)}};proto.__cbDeleteItem=function(callback,json){var data=json&&json.result;if(u._$isFunction(callback)&&u._$isBoolean(data)){callback(data)}};proto.__cbUpdateItem=function(callback,json){var data=json&&json.result;if(u._$isFunction(callback)){callback(data)}}})();
(function(){var _=NEJ.P,_r=NEJ.R,_o=NEJ.O,_f=NEJ.F,_g=_("nej.g"),_v=_("nej.v"),_u=_("nej.u"),_j=_("nej.j"),_t=_("nej.ut"),_cache={};_j._$requestByREST=function(){var _reg0=/\{(.*?)\}/gi,_reg1=/^get|delete|head$/i,_jsn=/json/i,_xml=/xml/i,_seed=+(new Date);var _doClear=function(_key){var _request=_cache[_key];if(!_request)return;delete _request.s;delete _request.f;delete _cache[_key]};var _doCallback=function(_key,_type){var _request=_cache[_key];if(!_request)return;var _callback=_request[_type],_args=_r.slice.call(arguments,2);try{(_callback||_f).apply(null,_args)}catch(ex){console.error(ex.message);console.error(ex)}_doClear(_key)};var _onLoad=function(_key,_data){_doCallback(_key,"s",_data)};var _onError=function(_key,_error){_error=_error||{};if(_error.code==_g._$CODE_ERRSERV&&_error.data==204){_onLoad(_key,null);return}_v._$dispatchEvent(window,"resterror",_error);if(!!_error.stopped){_doClear(_key);return}_doCallback(_key,"f",_error)};var _doCheckWithDefault=function(_headers,_key,_default){var _value=_headers[_key]||_headers[_key.toLowerCase()];if(!_value){_value=_default;_headers[_key]=_value}return _value};return function(_url,_options){_options=NEJ.X({},_options);var _exist={},_param=_options.param||_o;_url=_url.replace(_reg0,function($1,$2){var _value=_param[$2];if(_value!=null)_exist[$2]=!0;return encodeURIComponent(_value||"")||$1});var _data=_options.data||{};_u._$forIn(_param,function(_value,_key){if(!_exist[_key]){_data[_key]=_value}});var _type="text",_headers=_options.headers||{},_accept=_doCheckWithDefault(_headers,"Accept","application/json"),_content=_doCheckWithDefault(_headers,"Content-Type","application/json");if(_jsn.test(_accept)){_type="json"}else if(_xml.test(_accept)){_type="xml"}var _key="rest-"+_seed++;_cache[_key]={s:_options.onload||_f,f:_options.onerror||_f};_options.method=_options.method||"GET";if(_reg1.test(_options.method.trim())){_options.query=_data;_data=null}else if(_jsn.test(_content)){_data=JSON.stringify(_data)}_options.type=_type;_options.data=_data;_options.headers=_headers;_options.onload=_onLoad._$bind(null,_key);_options.onerror=_onError._$bind(null,_key);_j._$request(_url,_options);return this}}();_t._$$CustomEvent._$allocate({element:window,event:"resterror"})})();
(function(){var using=NEJ.P;var u=using("nej.u");var j=using("nej.j");var t=using("nej.ut");var v=using("nej.v");var dd=using("dd.data");var proto;dd._$$ReplyCache=NEJ.C();proto=dd._$$ReplyCache._$extend(dd._$$Cache);proto.__doLoadList=function(options){var key=options.key;var callback=options.onload;j._$requestByREST("/rest/replyrules",{method:"GET",type:"json",onload:this.__cbLoadList._$bind(this,key,callback)})};proto.__cbLoadList=function(key,callback,json){var result=json&&json.result;var list=result&&result.list;if(json.code==200&&list){callback(list)}};proto._$getReply=function(url){if(!url){return}j._$requestByREST(url,{method:"GET",type:"json",onload:this._$dispatchEvent._$bind(this,"replyload")})};proto._$update=function(data,url){if(!url){return}j._$requestByREST(url,{method:"PUT",type:"json",data:data,onload:this._$dispatchEvent._$bind(this,"update")})};proto._$addRule=function(data){j._$requestByREST("/rest/replyrules",{method:"PUT",type:"json",data:data,onload:this._$dispatchEvent._$bind(this,"add")})};proto._$updateRule=function(data){var obj=data;j._$requestByREST("/rest/replyrules/"+obj.id,{method:"POST",type:"json",data:obj.data,onload:this._$dispatchEvent._$bind(this,"update")})};proto._$deleteRule=function(id){j._$requestByREST("/rest/replyrules/"+id,{method:"DELETE",onload:this._$dispatchEvent._$bind(this,"delete")})};proto.__doAddItem=function(options){var callback=options.onload;var data=options.data;this._$addEvent("add",this.__cbAddItem._$bind(this,callback));this._$addRule(data)};proto.__cbAddItem=function(callback,json){var data=json&&json.result;if(u._$isFunction(callback)&&u._$isObject(data)){callback(data)}else if(json.code!=200){this._$dispatchEvent("onAddFailedLoad",json)}};proto.__doDeleteItem=function(options){var callback=options.onload;var data=options.data;this._$addEvent("delete",this.__cbDeleteItem._$bind(this,callback));this._$deleteRule(data.id)};proto.__doUpdateItem=function(options){var callback=options.onload;var data=options.data;this._$addEvent("update",this.__cbUpdateItem._$bind(this,callback));this._$updateRule(data)};proto.__cbUpdateItem=function(callback,json){var data=json&&json.result;if(u._$isFunction(callback)&&u._$isObject(data)){callback(data)}else if(json.code!=200){this._$dispatchEvent("onUpdateFailedLoad",json)}}})();
(function(){var using=NEJ.P;var o=NEJ.O;var e=using("nej.e");var i=using("nej.ui");var v=using("nej.v");var dw=using("dd.widget");var du=using("dd.util");dw._$$ImageText=NEJ.C();var proto=dw._$$ImageText._$extend(i._$$Abstract);proto.__initXGui=function(){this.__seed_html="ntp-widget-imagetext"};proto.__reset=function(options){options=options||o;var data=options.data;this.__supReset(options);var context=this.__body;du.get("image",context).src=du.transUri(data.uri);var titleNode=du.get("title",context);titleNode.innerText="[ 图文消息 ]"+data.title;titleNode.href="/material/viewImageText?"+(data.mid?"id="+data.mid:"msgId="+data.msgId);du.get("abstract",context).innerText=data.subtitle||""}})();
(function(){var using=NEJ.P;var o=NEJ.O;var e=using("nej.e");var i=using("nej.ui");var v=using("nej.v");var u=using("nej.u");var dw=using("dd.widget");var du=using("dd.util");dw._$$Image=NEJ.C();var proto=dw._$$Image._$extend(i._$$Abstract);proto.__initXGui=function(){this.__seed_html="ntp-widget-image"};proto.__initNode=function(){this.__supInitNode();this.__image=new Image;this.__imgNode=e._$getChildren(this.__body)[0];this.__image.onload=this.__onImageLoad._$bind(this);v._$addEvent(this.__imgNode,"click",this.__onClickImage._$bind(this))};proto.__reset=function(options){options=options||o;var data=options.data;this.__supReset(options);this.__image.src=du.transUri(data.uri)};proto.__onImageLoad=function(){this.__width=this.__image.width;if(this.__isZoom()){this.__imgNode.style.cursor="pointer"}this.__imgNode.style.width=Math.min(this.__width,162)+"px";this.__imgNode.src=this.__image.src};proto.__isZoom=function(){return this.__width&&this.__width>162};proto.__onClickImage=function(event){if(!this.__isZoom()){return}var width=parseInt(this.__imgNode.style.width);if(width>162){e._$delClassName(this.__imgNode.parentNode,"u-image-auto");this.__imgNode.style.width=Math.min(this.__width,162)+"px"}else{e._$addClassName(this.__imgNode.parentNode,"u-image-auto");this.__imgNode.style.width=Math.min(this.__width,400)+"px"}};proto.__destroy=function(){this.__supDestroy();this.__imgNode.src="/res/default/mimg2.png";this.__imgNode.style.cursor="";this.__imgNode.style.width=""}})();
(function(){var using=NEJ.P,o=NEJ.O,e=using("nej.e"),v=using("nej.v"),u=using("nej.u"),t=using("nej.ut"),j=using("nej.j"),dd=using("dd.data"),proto;var du=using("dd.util");dd._$$ContactCache=NEJ.C();proto=dd._$$ContactCache._$extend(dd._$$Cache);proto.__reset=function(options){this.__key="uid";this.__supReset(options)};proto.__doLoadList=function(options){var key=options.key||id,offset=options.offset||0,limit=options.limit||20,callback=options.onload;if(key.indexOf("search-")==0){var searchQuery=key.substr(7);var obj=u._$query2object(searchQuery);j._$requestByREST("/rest/contacts/search",{method:"GET",param:{keyword:obj.keyword,limit:limit,offset:offset},onload:this.__cbLoadList._$bind(this,key,callback),onerror:this.__cbLoadList._$bind(this,key,callback,o)})}else if(key=="bancontactkey"){j._$requestByREST("/rest/contacts/banContact",{method:"GET",type:"json",param:{limit:limit,offset:offset},onload:this.__cbLoadList._$bind(this,key,callback),onerror:this.__cbLoadList._$bind(this,key,callback,o)})}else{j._$requestByREST("/rest/contacts/",{param:{groupId:key.split("_")[0],offset:offset,limit:limit},method:"GET",onload:this.__cbLoadList._$bind(this,key,callback),onerror:this.__cbLoadList._$bind(this,key,callback,o)})}};proto.__doUpdateItem=function(options){var key=options.key||id;var data=options.data;var callback=options.onload;var way=data.way;var gindex=key.split("_")[0];this._$addEvent("update",function(json){if(json&&json.code==200&&way!="changeGroupAll"){callback(json.result)}if(json&&json.code==200&&way!="mdRemark"&&gindex!=-1){v._$dispatchEvent(dd._$$ContactCache,"followcountchange",data)}if(data.onsuccess){data.onsuccess(json)}}._$bind(this));this._$update(data)};proto._$update=function(data){var param;var way=data.way;var remark=data.remark;var uid=data.uid;var gid=data.gid;var gid2=data.gid2;var url="/rest/contacts/"+uid;if(way=="mdRemark"){param={remark:du.mergeSpace(remark)}}if(way=="changeGroup"){param={groupId:gid}}if(way=="changeGroupAll"){param={groupId:gid,contactId:uid};url="/rest/contacts/"}j._$requestByREST(url,{method:"POST",param:param,onload:this._$dispatchEvent._$bind(this,"update")})};proto._$getGroupList=function(){j._$requestByREST("/rest/contacts/groups",{method:"GET",onload:this._$dispatchEvent._$bind(this,"getgrouplist")})};proto._$getNewCount=function(time){j._$requestByREST("/rest/contacts/new/count",{method:"GET",param:{time:time||0},onload:this._$dispatchEvent._$bind(this,"getnewcount")})};proto._$getStatistic=function(days){j._$requestByREST("/rest/contacts/count/statistic",{method:"GET",param:{days:days||7},onload:this._$dispatchEvent._$bind(this,"getstatistic")})};proto._$export=function(data){j._$requestByREST("/rest/contacts/export",{method:"GET",timeout:0,param:data||"",onload:this._$dispatchEvent._$bind(this,"export"),onerror:this._$dispatchEvent._$bind(this,"export")})};proto._$getContactInfo=function(id,callback){j._$requestByREST("/rest/contacts/"+id,{method:"GET",onload:callback||this._$dispatchEvent._$bind(this,"loadContactInfo"),onerror:callback||this._$dispatchEvent._$bind(this,"loadContactInfo")})};proto._$banContact=function(data,callback){j._$requestByREST("/rest/contacts/banContact",{method:"POST",data:data,onload:callback||this._$dispatchEvent._$bind(this,"banContact",data.ids),onerror:callback||this._$dispatchEvent._$bind(this,"banContact",data.ids)})};proto._$clear=function(key){this.__delDataInCache(key)};t._$$CustomEvent._$allocate({element:dd._$$ContactCache,event:"followcountchange"})})();
(function(){var using=NEJ.P;var o=NEJ.O;var u=using("nej.u");var j=using("nej.j");var t=using("nej.ut");var v=using("nej.v");var dd=using("dd.data");var du=using("dd.util");var proto,contactCache;dd._$$MessageCache=NEJ.C();proto=dd._$$MessageCache._$extend(dd._$$Cache);contactCache=dd._$$ContactCache._$allocate();proto._$add=function(data){var message=data.message;var materialId=data.materialId;var contactId=data.contactId;var param;if(materialId){param={contactId:contactId,materialId:materialId}}else{param={contactId:contactId,message:message}}j._$requestByREST("/rest/messages/",{method:"PUT",param:param,onload:this._$dispatchEvent._$bind(this,"add")})};proto._$update=function(data){var star=data.star;j._$requestByREST("/rest/messages/"+data.id,{method:"POST",param:{star:star},onload:this._$dispatchEvent._$bind(this,"update")})};proto._$delete=function(id){j._$requestByREST("/rest/messages/"+id,{method:"DELETE",param:{messageId:id},onload:this._$dispatchEvent._$bind(this,"delete")})};proto._$getNewCount=function(time,contactId){var param={};if(time!=undefined){param.time=time}if(contactId){param.contactId=contactId}j._$requestByREST("/rest/messages/new/count",{method:"GET",param:param,onload:this._$dispatchEvent._$bind(this,"getnewcount")})};proto._$getStatistic=function(days){j._$requestByREST("/rest/messages/count/statistic",{method:"GET",param:{days:days||7},onload:this._$dispatchEvent._$bind(this,"getstatistic")})};proto._$getUri=function(data){j._$requestByREST("/rest/messages/uri",{method:"GET",param:data,onload:this._$dispatchEvent._$bind(this,"geturi")})};proto._$addUri=function(data){j._$requestByREST("/rest/messages/uri",{method:"PUT",param:data,onload:this._$dispatchEvent._$bind(this,"adduri")})};proto._$transcodeMedia=function(data){j._$requestByREST("/rest/media/transcode",{method:"GET",param:data,onload:this.__cbTranscodeMedia._$bind(this)})};proto.__cbTranscodeMedia=function(json){var data=json&&json.result;if(data){this._$dispatchEvent("mediatranscode",{code:200,result:data});return}this._$dispatchEvent("mediatranscode",json)};proto._$clear=function(key){this.__delDataInCache(key)};proto._$getCache=function(key){return this.__cache[key]};proto._$getLastestTime=function(key){var cache=this._$getCache(key);var time=0;if(cache&&cache.length>0){time=cache[0].addTime*1e3}return time};proto.__doLoadList=function(options){var key=options.key;var callback=options.onload;var data=options.data;if(key.indexOf("contact-")==0){var contactId=key.substr(8);j._$requestByREST("/rest/messages",{method:"GET",param:{contactId:contactId,limit:data.limit,offset:data.offset},onload:this.__cbLoadList._$bind(this,key,callback)})}else if(key.indexOf("search-")==0){var searchQuery=key.substr(7);var obj=u._$query2object(searchQuery);j._$requestByREST("/rest/messages/search",{method:"GET",param:{type:obj.type||1,keyword:obj.keyword,limit:data.limit,offset:data.offset},onload:this.__cbLoadList._$bind(this,key,callback),onerror:this.__cbLoadList._$bind(this,key,callback)})}else{if(key!=5){data.day=key-1==-1?3:key-1}else{data.star=true}j._$requestByREST("/rest/messages",{method:"GET",data:data,onload:this.__cbLoadList._$bind(this,key,callback)})}};proto.__cbLoadList=function(key,callback,json){var result=json&&json.result;contactCache._$addEvent("getgrouplist",function(json2){if(result&&result.list&&result.list.length>0){var groups=json2.result.list.sort(function(a,b){return a.gid-b.gid});u._$forEach(result.list,function(item,index,that){item.groups=groups})}callback(result);this._$dispatchEvent("dogetnewcount")}._$bind(this));contactCache._$getGroupList()};proto.__doAddItem=function(options){var callback=options.onload;var data=options.data;this._$addEvent("add",this.__cbAddItem._$bind(this,callback));this._$add(data)};proto.__doDeleteItem=function(options){var keys=["0","1","2","3","4","5"];var callback=options.onload;var data=options.data;this._$addEvent("delete",function(json){var data=json&&json.result;if(u._$isFunction(callback)&&u._$isBoolean(data)){u._$forEach(keys,function(item,index,that){if(item!=options.key){this._$clear(item+"-list")}}._$bind(this));callback(data)}}._$bind(this));this._$delete(data.id)};proto.__doUpdateItem=function(options){var keys=["0","1","2","3","4","5"];var callback=options.onload;var data=options.data;this.__dataData=data.data;this.__extData=data.ext;if(data.ext){contactCache._$addEvent("update",this.__cbUpdateContactItem._$bind(this,callback));contactCache._$update(data.ext)}else{this._$addEvent("update",function(json){var result=json&&json.result;u._$forEach(keys,function(item,index,that){if(item!=options.key){this._$clear(item+"-list")}}._$bind(this));callback(result)}._$bind(this));this._$update(data.data)}};proto.__cbUpdateContactItem=function(callback,json){var data=json&&json.result;if(data){this.__dataData.followInfo.remark=data.remark;this.__dataData.followInfo.gid=data.gid;if(this.__extData.onsuccess)this.__extData.onsuccess(this.__dataData);callback(this.__dataData)}else{if(this.__extData.onsuccess)this.__extData.onsuccess(json)}};t._$$CustomEvent._$allocate({element:dd._$$MessageCache,event:"contactchange"})})();
(function(){var cache={};var ctx=null,usingWebAudio=true,noAudio=false;try{if(typeof AudioContext!=="undefined"){ctx=new AudioContext}else if(typeof webkitAudioContext!=="undefined"){ctx=new webkitAudioContext}else if(typeof Audio!=="undefined"){usingWebAudio=false;try{new Audio}catch(e){noAudio=true}}else{usingWebAudio=false;noAudio=true}}catch(e){return}if(usingWebAudio){var masterGain=typeof ctx.createGain==="undefined"?ctx.createGainNode():ctx.createGain();masterGain.gain.value=1;masterGain.connect(ctx.destination)}var HowlerGlobal=function(){this._volume=1;this._muted=false;this.usingWebAudio=usingWebAudio;this._howls=[]};HowlerGlobal.prototype={volume:function(vol){var self=this;vol=parseFloat(vol);if(vol&&vol>=0&&vol<=1){self._volume=vol;if(usingWebAudio){masterGain.gain.value=vol}for(var key in self._howls){if(self._howls.hasOwnProperty(key)&&self._howls[key]._webAudio===false){for(var i=0;i<self._howls[key]._audioNode.length;i++){self._howls[key]._audioNode[i].volume=self._howls[key]._volume*self._volume}}}return self}return usingWebAudio?masterGain.gain.value:self._volume},mute:function(){this._setMuted(true);return this},unmute:function(){this._setMuted(false);return this},_setMuted:function(muted){var self=this;self._muted=muted;if(usingWebAudio){masterGain.gain.value=muted?0:self._volume}for(var key in self._howls){if(self._howls.hasOwnProperty(key)&&self._howls[key]._webAudio===false){for(var i=0;i<self._howls[key]._audioNode.length;i++){self._howls[key]._audioNode[i].muted=muted}}}}};var Howler=new HowlerGlobal;var audioTest=null;if(!noAudio){audioTest=new Audio;var codecs={mp3:!!audioTest.canPlayType("audio/mpeg;").replace(/^no$/,""),opus:!!audioTest.canPlayType('audio/ogg; codecs="opus"').replace(/^no$/,""),ogg:!!audioTest.canPlayType('audio/ogg; codecs="vorbis"').replace(/^no$/,""),wav:!!audioTest.canPlayType('audio/wav; codecs="1"').replace(/^no$/,""),m4a:!!(audioTest.canPlayType("audio/x-m4a;")||audioTest.canPlayType("audio/aac;")).replace(/^no$/,""),weba:!!audioTest.canPlayType('audio/webm; codecs="vorbis"').replace(/^no$/,"")}}var Howl=function(o){var self=this;self._autoplay=o.autoplay||false;self._buffer=o.buffer||false;self._duration=o.duration||0;self._format=o.format||null;self._loop=o.loop||false;self._loaded=false;self._sprite=o.sprite||{};self._src=o.src||"";self._pos3d=o.pos3d||[0,0,-.5];self._volume=o.volume||1;self._urls=o.urls||[];self._rate=o.rate||1;self._onload=[o.onload||function(){}];self._onloaderror=[o.onloaderror||function(){}];self._onend=[o.onend||function(){}];self._onpause=[o.onpause||function(){}];self._onplay=[o.onplay||function(){}];self._onendTimer=[];self._webAudio=usingWebAudio&&!self._buffer;self._audioNode=[];if(self._webAudio){self._setupAudioNode()}Howler._howls.push(self);self.load()};Howl.prototype={load:function(){var self=this,url=null;if(noAudio){self.on("loaderror");return}for(var i=0;i<self._urls.length;i++){var ext,urlItem;if(self._format){ext=self._format}else{urlItem=self._urls[i].toLowerCase().split("?")[0];ext=urlItem.match(/.+\.([^?]+)(\?|$)/);ext=ext&&ext.length>=2?ext:urlItem.match(/data\:audio\/([^?]+);/);if(ext){ext=ext[1]}else{self.on("loaderror");return}}if(codecs[ext]){url=self._urls[i];break}}if(!url){self.on("loaderror");return}self._src=url;if(self._webAudio){loadBuffer(self,url)}else{var newNode=new Audio;self._audioNode.push(newNode);newNode.src=url;newNode._pos=0;newNode.preload="auto";newNode.volume=Howler._muted?0:self._volume*Howler.volume();cache[url]=self;var listener=function(){self._duration=newNode.duration;if(Object.getOwnPropertyNames(self._sprite).length===0){self._sprite={_default:[0,self._duration*1e3]}}if(!self._loaded){self._loaded=true;self.on("load")}if(self._autoplay){self.play()}newNode.removeEventListener("canplaythrough",listener,false)};newNode.addEventListener("canplaythrough",listener,false);newNode.load()}return self},urls:function(urls){var self=this;if(urls){self.stop();self._urls=typeof urls==="string"?[urls]:urls;self._loaded=false;self.load();return self}else{return self._urls}},play:function(sprite,callback){var self=this;if(typeof sprite==="function"){callback=sprite}if(!sprite||typeof sprite==="function"){sprite="_default"}if(!self._loaded){self.on("load",function(){self.play(sprite,callback)});return self}if(!self._sprite[sprite]){if(typeof callback==="function")callback();return self}self._inactiveNode(function(node){node._sprite=sprite;var pos=node._pos>0?node._pos:self._sprite[sprite][0]/1e3,duration=self._sprite[sprite][1]/1e3-node._pos;var loop=!!(self._loop||self._sprite[sprite][2]);var soundId=typeof callback==="string"?callback:Math.round(Date.now()*Math.random())+"",timerId;(function(){var data={id:soundId,sprite:sprite,loop:loop};timerId=setTimeout(function(){if(!self._webAudio&&loop){self.stop(data.id,data.timer).play(sprite,data.id)}if(self._webAudio&&!loop){self._nodeById(data.id).paused=true}if(!self._webAudio&&!loop){self.stop(data.id,data.timer)}self.on("end",soundId)},duration*1e3);self._onendTimer.push(timerId);data.timer=self._onendTimer[self._onendTimer.length-1]})();if(self._webAudio){var loopStart=self._sprite[sprite][0]/1e3,loopEnd=self._sprite[sprite][1]/1e3;node.id=soundId;node.paused=false;refreshBuffer(self,[loop,loopStart,loopEnd],soundId);self._playStart=ctx.currentTime;node.gain.value=self._volume;if(typeof node.bufferSource.start==="undefined"){node.bufferSource.noteGrainOn(0,pos,duration)}else{node.bufferSource.start(0,pos,duration)}}else{if(node.readyState===4){node.id=soundId;node.currentTime=pos;node.muted=Howler._muted;node.volume=self._volume*Howler.volume();setTimeout(function(){node.play()},0)}else{self._clearEndTimer(timerId);(function(){var sound=self,playSprite=sprite,fn=callback,newNode=node;var listener=function(){sound.play(playSprite,fn);newNode.removeEventListener("canplaythrough",listener,false)};newNode.addEventListener("canplaythrough",listener,false)})();return self}}self.on("play");if(typeof callback==="function")callback(soundId);return self});return self},pause:function(id,timerId){var self=this;if(!self._loaded){self.on("play",function(){self.pause(id)});return self}self._clearEndTimer(timerId||0);var activeNode=id?self._nodeById(id):self._activeNode();if(activeNode){activeNode._pos=self.pos(null,id);if(self._webAudio){if(!activeNode.bufferSource){return self}activeNode.paused=true;if(typeof activeNode.bufferSource.stop==="undefined"){activeNode.bufferSource.noteOff(0)}else{activeNode.bufferSource.stop(0)}}else{activeNode.pause()}}self.on("pause");return self},stop:function(id,timerId){var self=this;if(!self._loaded){self.on("play",function(){self.stop(id)});return self}self._clearEndTimer(timerId||0);var activeNode=id?self._nodeById(id):self._activeNode();if(activeNode){activeNode._pos=0;if(self._webAudio){if(!activeNode.bufferSource){return self}activeNode.paused=true;if(typeof activeNode.bufferSource.stop==="undefined"){activeNode.bufferSource.noteOff(0)}else{activeNode.bufferSource.stop(0)}}else{activeNode.pause();activeNode.currentTime=0}}return self},mute:function(id){var self=this;if(!self._loaded){self.on("play",function(){self.mute(id)});return self}var activeNode=id?self._nodeById(id):self._activeNode();if(activeNode){if(self._webAudio){activeNode.gain.value=0}else{activeNode.volume=0}}return self},unmute:function(id){var self=this;if(!self._loaded){self.on("play",function(){self.unmute(id)});return self}var activeNode=id?self._nodeById(id):self._activeNode();if(activeNode){if(self._webAudio){activeNode.gain.value=self._volume}else{activeNode.volume=self._volume}}return self},volume:function(vol,id){var self=this;vol=parseFloat(vol);if(vol>=0&&vol<=1){self._volume=vol;if(!self._loaded){self.on("play",function(){self.volume(vol,id)});return self}var activeNode=id?self._nodeById(id):self._activeNode();if(activeNode){if(self._webAudio){activeNode.gain.value=vol}else{activeNode.volume=vol*Howler.volume()}}return self}else{return self._volume}},loop:function(loop){var self=this;if(typeof loop==="boolean"){self._loop=loop;return self}else{return self._loop}},sprite:function(sprite){var self=this;if(typeof sprite==="object"){self._sprite=sprite;return self}else{return self._sprite}},pos:function(pos,id){var self=this;if(!self._loaded){self.on("load",function(){self.pos(pos)});return typeof pos==="number"?self:self._pos||0}pos=parseFloat(pos);var activeNode=id?self._nodeById(id):self._activeNode();if(activeNode){if(self._webAudio){if(pos>=0){activeNode._pos=pos;self.pause(id).play(activeNode._sprite,id);return self}else{return activeNode._pos+(ctx.currentTime-self._playStart)}}else{if(pos>=0){activeNode.currentTime=pos;return self}else{return activeNode.currentTime}}}else if(pos>=0){return self}else{for(var i=0;i<self._audioNode.length;i++){if(self._audioNode[i].paused&&self._audioNode[i].readyState===4){return self._webAudio?self._audioNode[i]._pos:self._audioNode[i].currentTime}}}},pos3d:function(x,y,z,id){var self=this;y=typeof y==="undefined"||!y?0:y;z=typeof z==="undefined"||!z?-.5:z;if(!self._loaded){self.on("play",function(){self.pos3d(x,y,z,id)});return self}if(x>=0||x<0){if(self._webAudio){var activeNode=id?self._nodeById(id):self._activeNode();if(activeNode){self._pos3d=[x,y,z];activeNode.panner.setPosition(x,y,z)}}}else{return self._pos3d}return self},fade:function(from,to,len,callback,id){var self=this,diff=Math.abs(from-to),dir=from>to?"down":"up",steps=diff/.01,stepTime=len/steps;if(!self._loaded){self.on("load",function(){self.fade(from,to,len,callback,id)});return self}self.volume(from,id);for(var i=1;i<=steps;i++){(function(){var change=self._volume+(dir==="up"?.01:-.01)*i,vol=Math.round(1e3*change)/1e3,toVol=to;setTimeout(function(){self.volume(vol,id);if(vol===toVol){if(callback)callback()}},stepTime*i)})()}},fadeIn:function(to,len,callback){return this.volume(0).play().fade(0,to,len,callback)},fadeOut:function(to,len,callback,id){var self=this;return self.fade(self._volume,to,len,function(){if(callback)callback();self.pause(id);self.on("end")},id)},_nodeById:function(id){var self=this,node=self._audioNode[0];for(var i=0;i<self._audioNode.length;i++){if(self._audioNode[i].id===id){node=self._audioNode[i];break}}return node},_activeNode:function(){var self=this,node=null;for(var i=0;i<self._audioNode.length;i++){if(!self._audioNode[i].paused){node=self._audioNode[i];break}}self._drainPool();return node},_inactiveNode:function(callback){var self=this,node=null;for(var i=0;i<self._audioNode.length;i++){if(self._audioNode[i].paused&&self._audioNode[i].readyState===4){callback(self._audioNode[i]);node=true;break}}self._drainPool();if(node){return}var newNode;if(self._webAudio){newNode=self._setupAudioNode();callback(newNode)}else{self.load();newNode=self._audioNode[self._audioNode.length-1];newNode.addEventListener("loadedmetadata",function(){callback(newNode)})}},_drainPool:function(){var self=this,inactive=0,i;for(i=0;i<self._audioNode.length;i++){if(self._audioNode[i].paused){inactive++}}for(i=self._audioNode.length-1;i>=0;i--){if(inactive<=5){break}if(self._audioNode[i].paused){if(self._webAudio){self._audioNode[i].disconnect(0)}inactive--;self._audioNode.splice(i,1)}}},_clearEndTimer:function(timerId){var self=this,timer=self._onendTimer.indexOf(timerId);timer=timer>=0?timer:0;if(self._onendTimer[timer]){clearTimeout(self._onendTimer[timer]);self._onendTimer.splice(timer,1)}},_setupAudioNode:function(){var self=this,node=self._audioNode,index=self._audioNode.length;node[index]=typeof ctx.createGain==="undefined"?ctx.createGainNode():ctx.createGain();node[index].gain.value=self._volume;node[index].paused=true;node[index]._pos=0;node[index].readyState=4;node[index].connect(masterGain);node[index].panner=ctx.createPanner();node[index].panner.setPosition(self._pos3d[0],self._pos3d[1],self._pos3d[2]);node[index].panner.connect(node[index]);return node[index]},on:function(event,fn){var self=this,events=self["_on"+event];if(typeof fn==="function"){events.push(fn)}else{for(var i=0;i<events.length;i++){if(fn){events[i].call(self,fn)}else{events[i].call(self)}}}return self},off:function(event,fn){var self=this,events=self["_on"+event],fnString=fn.toString();for(var i=0;i<events.length;i++){if(fnString===events[i].toString()){events.splice(i,1);break}}return self},unload:function(){var self=this;var nodes=self._audioNode;for(var i=0;i<self._audioNode.length;i++){self.stop(nodes[i].id);if(!self._webAudio){nodes[i].src=""}else{nodes[i].disconnect(0)}}var index=Howler._howls.indexOf(self);if(index){Howler._howls.splice(index,1)}delete cache[self._src];self=null}};if(usingWebAudio){var loadBuffer=function(obj,url){if(url in cache){obj._duration=cache[url].duration;loadSound(obj)}else{var xhr=new XMLHttpRequest;xhr.open("GET",url,true);xhr.responseType="arraybuffer";xhr.onload=function(){ctx.decodeAudioData(xhr.response,function(buffer){if(buffer){cache[url]=buffer;loadSound(obj,buffer)}})};xhr.onerror=function(){if(obj._webAudio){obj._buffer=true;obj._webAudio=false;obj._audioNode=[];delete obj._gainNode;obj.load()}};try{xhr.send()}catch(e){xhr.onerror()}}};var loadSound=function(obj,buffer){obj._duration=buffer?buffer.duration:obj._duration;if(Object.getOwnPropertyNames(obj._sprite).length===0){obj._sprite={_default:[0,obj._duration*1e3]}}if(!obj._loaded){obj._loaded=true;obj.on("load")}if(obj._autoplay){obj.play()}};var refreshBuffer=function(obj,loop,id){var node=obj._nodeById(id);node.bufferSource=ctx.createBufferSource();node.bufferSource.buffer=cache[obj._src];node.bufferSource.connect(node.panner);node.bufferSource.loop=loop[0];if(loop[0]){node.bufferSource.loopStart=loop[1];node.bufferSource.loopEnd=loop[1]+loop[2]}node.bufferSource.playbackRate.value=obj._rate}}if(typeof define==="function"&&define.amd){define(function(){return{Howler:Howler,Howl:Howl}})}window.Howler=Howler;window.Howl=Howl})();
(function(){var using=NEJ.P;var o=NEJ.O;var e=using("nej.e");var u=using("nej.u");var i=using("nej.ui");var j=using("nej.j");var v=using("nej.v");var t=using("nej.ut");var dd=using("dd.data");var dw=using("dd.widget");var du=using("dd.util");var $=du.$;dw._$$Audio=NEJ.C();var proto=dw._$$Audio._$extend(i._$$Abstract);proto.__initXGui=function(){this.__seed_html="ntp-widget-audio"};proto.__initNode=function(){this.__supInitNode();v._$addEvent(this.__body,"click",this.__onClickPlay._$bind(this));v._$addEvent(this.constructor,"beforeplay",function(event){if(v._$getElement(event)!==this){this.__stop()}}._$bind(this));this.__cache=dd._$$MessageCache._$allocate();this.__cache._$addEvent("geturi",this.__cbGetUri._$bind(this));this.__cache._$addEvent("mediatranscode",this.__cbMediaTranscode._$bind(this))};proto.__reset=function(options){options=options||o;var data=options.data;this.__supReset(options);this.__skip=options.skip;this.type=options.type||1;this.__viewDuration(data.duration);this.__data=data};proto.__viewDuration=function(duration){du.get("duration",this.__body).innerText=duration>0?Math.round(duration/1e3)+'"':""};proto.__onClickPlay=function(event){if(this.__isPlaying()){this.__stop()}else{v._$dispatchEvent(this.constructor,"beforeplay",{target:this});if(this.__canPlay()){this.__play()}else{this.__cache._$getUri({messageId:this.__data.msgId})}}};proto.__canPlay=function(){return/\.mp3$/.test(this.__data.fileName)||this.__tansUri||this.__skip};proto.__cbGetUri=function(json){if(json&&json.result){this.__tansUri=json.result;this.__play()}else{var obj=du.uriToObject(this.__data.uri);du.showHint({message:"正在转码...",autoDisappear:false});this.__cache._$transcodeMedia({bucket:obj.bucket,object:obj.object,type:this.__data.type})}};proto.__cbMediaTranscode=function(json){if(json&&json.code===200){var obj=du.uriToObject(this.__data.uri);this.__queryTrans({bucket:obj.bucket,object:obj.object})}else{du.showError("转码失败, 不能收听")}};proto.__queryTrans=function(data){j._$requestByREST("/rest/querytrans",{method:"GET",type:"json",data:{bucket:data.bucket,object:data.object},onload:this.__cbQueryTrans._$bind(this,data)})};proto.__cbQueryTrans=function(data,json){var result=json&&json.result;if(result){du.showSuccess("转码成功，开始播放");this.__cache._$addUri({messageId:this.__data.msgId,uri:result.uri});this.__tansUri=result.uri;this.__play()}else{this.__startQueryTrans(data)}};proto.__startQueryTrans=function(data){this.__timer=window.setTimeout(this.__queryTrans._$bind(this,data),3e3)};proto.__isPlaying=function(){return e._$hasClassName(this.__body,"u-audio-play")};proto.__play=function(){var context=this.__body;e._$addClassName(context,"u-audio-play");var arr=(this.__tansUri||this.__data.fileName).match(/\.([^.]+)$/)||"";this.__audioUtil=(this.type==2?du._$$Audio2:du._$$Audio)._$getInstanceWithReset({parent:context,src:du.transUri(this.__tansUri||this.__data.uri),type:arr[1],onended:this.__onEnded._$bind(this)},true)};proto.__stop=function(){e._$delClassName(this.__body,"u-audio-play");if(this.__audioUtil){this.__audioUtil._$recycle()}};proto.__onEnded=function(event){this.__stop()};proto.__destroy=function(){this.__supDestroy();this.__stop()};t._$$CustomEvent._$allocate({element:dw._$$Audio,event:"beforeplay"});du._$$Audio=NEJ.C();var proto1=du._$$Audio._$extend(t._$$Event);proto1.__init=function(){this.__supInit();this.__iframe=document.createElement("iframe");this.__listenerName="listener"+u._$randNumberString();window[this.__listenerName]=this.__listenerProxy._$bind(this)};proto1.__reset=function(options){this.__supReset();options=options||o;var src=options.src;var type=options.type||"";var parent=e._$get(options.parent);this.__onEnded=options.onended;if(src){this.__iframe.src="/res/videoplayer/assets/index.html?src="+encodeURIComponent(src)+"&isAudio=true&autoplay=true&type="+encodeURIComponent(type)+"&listener="+this.__listenerName}if(parent){parent.appendChild(this.__iframe)}};proto1.__listenerProxy=function(event){if(event.type==="success"){this.__player=event.data.element;this.__player.addEventListener("ended",this.__onEnded)}};proto1.__destroy=function(){this.__supDestroy();if(this.__player){this.__player.stop();delete this.__player}this.__iframe.src="";e._$remove(this.__iframe)};du._$$Audio2=NEJ.C();var proto2=du._$$Audio2._$extend(t._$$Event);proto2.__reset=function(options){var src=options.src;src=src.replace("https://nos.163.com","http://nos-yx.netease.com");var type=options.type||"";var parent=e._$get(options.parent);var self=this;this.parent=options.parent;if(!/\.mp3$/.test(src))src=src+".mp3";if(NEJ.P("nej.p")._$IS.android&&Howl){this.sound=new Howl({urls:[src],buffer:true,onend:options.onended});this.sound.play()}else{this.audio=$('<audio><source src="'+src+'" type="audio/mpeg"></source></audio>')[0];this.audio.load();this.audio.play();this.audio.addEventListener("canplay",function(){if(!self.audio.currentTime){self.audio.play()}});this.audio.addEventListener("ended",options.onended)}};proto2.__destroy=function(){if(this.sound){this.sound.unload();delete this.sound}else if(this.audio){this.audio.pause();delete this.audio}this.__supDestroy()}})();
(function(){var using=NEJ.P;var o=NEJ.O;var e=using("nej.e");var i=using("nej.ui");var v=using("nej.v");var u=using("nej.u");var t=using("nej.ut");var dd=using("dd.data");var dw=using("dd.widget");var du=using("dd.util");dw._$$Video=NEJ.C();var proto=dw._$$Video._$extend(i._$$Abstract);proto.__initXGui=function(){this.__seed_html="ntp-widget-video"};proto.__initNode=function(){this.__supInitNode();var context=this.__body;v._$addEvent(du.get("play",context),"click",this.__onClickPlay._$bind(this));v._$addEvent(du.get("fold",context),"click",this.__onClickFold._$bind(this));this.__cache=dd._$$MessageCache._$allocate();this.__cache._$addEvent("mediatranscode",this.__cbMediaTranscode._$bind(this))};proto.__reset=function(options){options=options||o;var data=options.data;this.__supReset(options);var context=this.__body;this.__viewDuration(data.duration);du.get("image",context).src=du.transUri(data.uri)+"?vframe=1";this.__data=data};proto.__viewDuration=function(duration){du.get("duration",this.__body).innerText=duration>0?Math.round(duration/1e3)+'"':""};proto.__onClickPlay=function(event){if(this.__canPlay()){this.__play()}else{this.__cache._$getUri({messageId:this.__data.msgId})}};proto.__canPlay=function(){return/\.mp4$/.test(this.__data.fileName)||this.__tansUri};proto.__cbGetUri=function(json){if(json&&json.result){this.__tansUri=json.result;this.__play()}else{var obj=du.uriToObject(this.__data.uri);du.showHint({message:"正在转码...",autoDisappear:false});this.__cache._$transcodeMedia({bucket:obj.bucket,object:obj.object,type:this.__data.type})}};proto.__play=function(){var context=this.__body;e._$addClassName(context,"u-video-play");var arr=(this.__tansUri||this.__data.fileName).match(/\.([^.]+)$/);this.__videoUtil=du._$$Video._$allocate({parent:du.get("player",context),src:du.transUri(this.__tansUri||this.__data.uri),type:arr[1]},true)};proto.__cbMediaTranscode=function(json){if(json&&json.code===200){var obj=du.uriToObject(this.__data.uri);this.__queryTrans({bucket:obj.bucket,object:obj.object})}else{du.showError("转码失败, 不能收听")}};proto.__queryTrans=function(data){j._$requestByREST("/rest/querytrans",{method:"GET",type:"json",data:{bucket:data.bucket,object:data.object},onload:this.__cbQueryTrans._$bind(this,data)})};proto.__cbQueryTrans=function(data,json){var result=json&&json.result;if(result){du.showSuccess("转码成功，开始播放");this.__cache._$addUri({messageId:this.__data.msgId,uri:result.uri});this.__tansUri=result.uri;this.__play()}else{this.__startQueryTrans(data)}};proto.__startQueryTrans=function(data){this.__timer=window.setTimeout(this.__queryTrans._$bind(this,data),3e3)};proto.__onClickFold=function(event){this.__stop()};proto.__stop=function(){e._$delClassName(this.__body,"u-video-play");if(this.__videoUtil){this.__videoUtil._$recycle()}};proto.__destroy=function(){this.__supDestroy();this.__stop()};du._$$Video=NEJ.C();var proto1=du._$$Video._$extend(t._$$Event);proto1.__init=function(){this.__supInit();this.__iframe=document.createElement("iframe");this.__listenerName="listener"+u._$randNumberString();window[this.__listenerName]=this.__listenerProxy._$bind(this)};proto1.__reset=function(options){this.__supReset();options=options||o;var src=options.src;var type=options.type||"";var parent=e._$get(options.parent);if(src){this.__iframe.src="/res/videoplayer/assets/index.html?src="+encodeURIComponent(src)+"&type="+encodeURIComponent(type)+"&listener="+this.__listenerName+"&alwaysFlash=1&autoplay=1"}if(parent){parent.appendChild(this.__iframe)}};proto1.__listenerProxy=function(event){if(event.type==="success"){this.__player=event.data.element}};proto1.__destroy=function(){this.__supDestroy();this.__iframe.src="";e._$remove(this.__iframe)}})();
(function(){var using=NEJ.P;var o=NEJ.O;var e=using("nej.e");var i=using("nej.ui");var v=using("nej.v");var dw=using("dd.widget");var du=using("dd.util");dw._$$Activity=NEJ.C();var proto=dw._$$Activity._$extend(i._$$Abstract);proto.__initXGui=function(){this.__seed_html="ntp-widget-activity"};proto.__reset=function(options){options=options||o;var data=options.data;this.__supReset(options);var context=this.__body;du.get("image",context).src=du.transUri(data.uri);var subtitleNode=du.get("subtitle",context);subtitleNode.innerText="[ 活动消息 ]"+data.subtitle;subtitleNode.href="/material/viewActivity?"+(data.mid?"id="+data.mid:"msgId="+data.msgId);}})();
(function(){var using=NEJ.P;var o=NEJ.O;var e=using("nej.e");var i=using("nej.ui");var v=using("nej.v");var dw=using("dd.widget");var du=using("dd.util");dw._$$Lottery=NEJ.C();var proto=dw._$$Lottery._$extend(i._$$Abstract);proto.__initXGui=function(){this.__seed_html="ntp-widget-activity"};proto.__reset=function(options){options=options||o;var data=options.data;this.__supReset(options);var context=this.__body;du.get("image",context).src=du.transUri(data.uri);var subtitleNode=du.get("subtitle",context);subtitleNode.innerText="[ 抽奖消息 ]"+(data.subtitle||"");var extract=/[\?&]id=(\d+)/.exec(data.url);if(extract&&extract[1]){var id=extract[1];subtitleNode.href="http://service.plus.yixin.im/lottery/result?id="+id+"&pid="+data.pid}}})();
(function(){var using=NEJ.P;var o=NEJ.O;var e=using("nej.e");var i=using("nej.ui");var v=using("nej.v");var dw=using("dd.widget");var du=using("dd.util");dw._$$Card=NEJ.C();var proto=dw._$$Card._$extend(i._$$Abstract);proto.__initXGui=function(){this.__seed_html="ntp-widget-card"};proto.__reset=function(options){options=options||o;var data=options.data;this.__supReset(options);var context=this.__body;du.get("icon",context).src=data.icon&&data.icon!=="null"?du.transUri(data.icon):"/res/default/icon.png";var titleNode=du.get("title",context);du.get("nick",context).innerText=data.nick||data.name;du.get("yid",context).innerText=data.yid?"易信号："+data.yid:""}})();
(function(){var using=NEJ.P;var o=NEJ.O;var e=using("nej.e");var i=using("nej.ui");var v=using("nej.v");var dw=using("dd.widget");var du=using("dd.util");dw._$$UnkownMaterial=NEJ.C();var proto=dw._$$UnkownMaterial._$extend(i._$$Abstract);proto.__initXGui=function(){this.__seed_html="ntp-widget-card"};proto.__reset=function(options){options=options||o;var data=options.data;this.__supReset(options);e._$addClassName(this.__body,"u-card-unkown");var context=this.__body;du.get("icon",context).src="/res/defaults/err_head.png";du.get("nick",context).innerText="此消息体暂不支持"}})();
(function(){var using=NEJ.P;var o=NEJ.O;var e=using("nej.e");var i=using("nej.ui");var v=using("nej.v");var dw=using("dd.widget");var du=using("dd.util");dw._$$Media={_$allocate:function(options){options=options||o;var data=options.data;var type=data&&data.type;switch(type){case 101:case 102:type=0;break;case 1e3:type=4;break;case 2e3:type=5;break;case 6:type=6;break}if(type==null||type>6||type<0){type=7}var medisClasses=[dw._$$ImageText,dw._$$Image,dw._$$Audio,dw._$$Video,dw._$$Activity,dw._$$Lottery,dw._$$Card,dw._$$UnkownMaterial];return medisClasses[type]._$allocate(options)},_$recycle:function(widget){return widget.constructor._$recycle(widget)}}})();
(function(){var using=NEJ.P;var e=using("nej.e");var v=using("nej.v");var i=using("nej.ui");var u=using("nej.u");var di=using("dd.ui");var du=using("dd.util");var dw=using("dd.widget");var proto;di._$$MaterialItemBase=NEJ.C();proto=di._$$MaterialItemBase._$extend(i._$$ListItem);proto.__initNode=function(){this.__supInitNode();this.__nameNode=du.get("name",this.__body)};proto.__doRefresh=function(data){this.__restoreUI();var context=this.__body;var type=data.type;data.title=data.title||data.fileName;this.__nameNode.getElementsByTagName("span")[0].innerText=data.title;this.__nameNode.getElementsByTagName("span")[0].title=data.title;du.get("size",context).innerText=du.format(data.fileSize);du.get("time",context).innerText=u._$format(new Date(data.createTime),"yyyy-MM-dd");this.__media=dw._$$Media._$allocate({data:data,parent:du.get("media",context)})};proto.__restoreUI=function(){e._$delClassName(this.__nameNode,"edit");if(this.__media){this.__media._$recycle();delete this.__media}};proto.__destroy=function(){this.__supDestroy();this.__restoreUI()}})();
(function(){var using=NEJ.P;var o=NEJ.O;var e=using("nej.e");var v=using("nej.v");var u=using("nej.u");var i=using("nej.ui");var di=using("dd.ui");var du=using("dd.util");var randomStr=u._$randNumberString();var proto;di._$$MaterialItem1=NEJ.C();proto=di._$$MaterialItem1._$extend(di._$$MaterialItemBase);proto.__initXGui=function(){this.__seed_html="ntp-material-item-1"};proto.__reset=function(options){options=options||o;this.__readonly=options.readonly;this.__supReset(options)};proto.__doRefresh=function(data){this.constructor._$supro.__doRefresh.apply(this,arguments);var context=this.__body;var radio=du.get("radio",context);var radioArea=radio.parentNode;if(this.__readonly){radioArea.style.display="none"}else{radio.name="radio"+randomStr;e._$dataset(radio,"id",data.mid)}};proto.__destroy=function(){this.__supDestroy();var context=this.__body;var radio=du.get("radio",context);radio.checked=false;var radioArea=radio.parentNode;radioArea.style.display=""}})();
(function(){var using=NEJ.P;var e=using("nej.e");var v=using("nej.v");var i=using("nej.ui");var p=using("dd.ui");var du=using("dd.util");var dw=using("dd.widget");var proto;p._$$KeywordItem=NEJ.C();proto=p._$$KeywordItem._$extend(i._$$ListItem);proto.__initXGui=function(){this.__seed_html="ntp-kw-item"};proto.__initNode=function(){this.__supInitNode();var context=this.__body;this.__titleNode=du.get("mtitle",context);this.__mediaNode=du.get("reply",context);this.__editNode=du.get("edit",context);this.__delNode=du.get("delete",context)};proto.__doRefresh=function(data){this.constructor._$supro.__doRefresh.apply(this,arguments);if(data){var type=data.type;e._$dataset(this.__body,"type",type);if(type==0){e._$dataset(this.__titleNode,"value",data.article);this.__titleNode.innerHTML=du.toEmot(data.article);e._$attr(this.__titleNode,"data-type",0);v._$addEvent(this.__editNode,"click",this.__onEditClick._$bind(this));v._$addEvent(this.__delNode,"click",this.__onDeleteClick._$bind(this));return}this.__titleNode.innerText=data.title||data.fileName;e._$dataset(this.__titleNode,"value",this.__titleNode.innerText);if(this.__media){this.__media=this.__media._$recycle()}this.__media=dw._$$Media._$allocate({parent:this.__mediaNode,data:data});e._$attr(this.__mediaNode,"data-mid",data.mid);e._$remove(this.__editNode);v._$addEvent(this.__delNode,"click",this.__onDeleteClick._$bind(this))}};proto.__onEditClick=function(event){v._$stopDefault(event);this._$dispatchEvent("oneditreply",event)};proto.__onDeleteClick=function(event){v._$stopDefault(event);var elem=v._$getElement(event);var node=elem.parentNode.parentNode;if(this.__media){this.__media=this.__media._$recycle()}e._$remove(node)};proto.__destroy=function(){this.__supDestroy();if(this.__media){this.__media=this.__media._$recycle()}this.__mediaNode.innerHTML="";this.__titleNode.innerHTML=""}})();
(function(){var _=NEJ.P,_o=NEJ.O,_f=NEJ.F,_e=_("nej.e"),_u=_("nej.u"),_h=_("nej.h"),_p=_("nej.ui"),_proLayer,_supLayer;if(!!_p._$$Layer)return;_p._$$Layer=NEJ.C();_proLayer=_p._$$Layer._$extend(_p._$$Abstract);_supLayer=_p._$$Layer._$supro;_proLayer.__reset=function(_options){this.__supReset(_options);this._$setEvent("oncontentready",_options.oncontentready||this.__doInitContent._$bind(this));this.__nohack=!!_options.nohack;this.__destroyable=!!_options.destroyable;this._$setContent(_options.content)};_proLayer.__destroy=function(){this._$dispatchEvent("onbeforerecycle");this.__supDestroy();this.__doHide();this._$setContent("");_e._$style(this.__body,{top:"",left:""})};_proLayer.__doInitContent=_f;_proLayer.__doPositionAlign=_f;_proLayer.__doHide=function(){_e._$removeByEC(this.__body);if(!!this.__mask){this.__mask=_h.__unmask(this.__body);delete this.__mask}};_proLayer._$setContent=function(_content){if(!this.__body||!this.__ncnt||_content==null)return this;_content=_content||"";_u._$isString(_content)?this.__ncnt.innerHTML=_content:this.__ncnt.appendChild(_content);this._$dispatchEvent("oncontentready",this.__ncnt);return this};_proLayer._$setPosition=function(_offset){var _value=_offset.top;if(_value!=null){_value+="px";_e._$setStyle(this.__body,"top",_value);_e._$setStyle(this.__mask,"top",_value)}var _value=_offset.left;if(_value!=null){_value+="px";_e._$setStyle(this.__body,"left",_value);_e._$setStyle(this.__mask,"left",_value)}return this};_proLayer._$show=function(){_e._$setStyle(this.__body,"visibility","hidden");_supLayer._$show.apply(this,arguments);this.__doPositionAlign();_e._$setStyle(this.__body,"visibility","");if(!this.__nohack){this.__mask=_h.__mask(this.__body)}return this};_proLayer._$hide=function(){this.__destroyable?this._$recycle():this.__doHide();return this}})();
(function(){var using=NEJ.P;var o=NEJ.O;var u=using("nej.u");var j=using("nej.j");var t=using("nej.ut");var v=using("nej.v");var dd=using("dd.data");var du=using("dd.util");var proto;dd._$$MaterialCache=NEJ.C();proto=dd._$$MaterialCache._$extend(dd._$$Cache);proto.__init=function(options){this.__supInit(options);this.added=false;this.adds=[]};proto._$get=function(id){j._$requestByREST("/rest/materials/"+id,{method:"GET",type:"json",data:data,onload:this._$dispatchEvent._$bind(this,"get")})};proto._$add=function(data){var self=this;if(this.added){this.adds.push(data);return}else{this.added=true}this.__add(data)};proto.__add=function(data){var self=this;j._$requestByREST("/rest/materials",{method:"PUT",type:"json",data:data,onload:function(data){self._$dispatchEvent("add",data);if(self.adds.length){self.__add(self.adds.shift())}else{self.added=false}},onerror:function(){if(self.adds.length){self.__add(self.adds.shift())}else{self.added=false}}})};proto._$update=function(data){j._$requestByREST("/rest/materials/"+data.mid,{method:"POST",type:"json",data:data,onload:this._$dispatchEvent._$bind(this,"update")})};proto._$delete=function(id){j._$requestByREST("/rest/materials/"+id,{method:"DELETE",type:"json",onload:this._$dispatchEvent._$bind(this,"delete")})};proto._$addImageText=function(data){j._$requestByREST("/rest/materials/imagetexts",{method:"PUT",type:"json",data:data,onload:this._$dispatchEvent._$bind(this,"addimagetext")})};proto._$updateImageText=function(data){j._$requestByREST("/rest/materials/imagetexts/"+data[0].mid,{method:"POST",type:"json",data:data,onload:this._$dispatchEvent._$bind(this,"updateimagetext")})};proto._$getGroupsCounts=function(){j._$requestByREST("/rest/materials/groups/counts",{method:"GET",type:"json",onload:this._$dispatchEvent._$bind(this,"groupscountschange")})};proto._$sendPreview=function(accountName,data){j._$requestByREST("/rest/materials/preview?accountName="+accountName,{method:"PUT",type:"json",data:data,onload:this._$dispatchEvent._$bind(this,"sendpreview")})};proto.__doLoadList=function(options){var key=options.key;var callback=options.onload;var data=options.data;data.type=parseInt(key);j._$requestByREST("/rest/materials",{method:"GET",type:"json",data:data,onload:this.__cbLoadList._$bind(this,key,callback)})};proto.__cbLoadList=function(key,callback,json){var result=json&&json.result;var list=result&&result.list;callback(result)};proto.__doAddItem=function(options){var key=options.key;var callback=options.onload;var data=options.data;data.type=parseInt(key);this._$addEvent("add",this.__cbAddItem._$bind(this,callback));this._$add(data)};proto.__doDeleteItem=function(options){var callback=options.onload;var data=options.data;this._$addEvent("delete",this.__cbDeleteItem._$bind(this,callback));this._$delete(data.mid)};proto.__doUpdateItem=function(options){var callback=options.onload;var data=options.data;this._$addEvent("update",this.__cbUpdateItem._$bind(this,callback));this._$update(data)}})();
(function(){var _=NEJ.P,_f=NEJ.F,_u=_("nej.u"),_e=_("nej.e"),_p=_("nej.ui"),_proLayerWrapper;if(!!_p._$$LayerWrapper)return;_p._$$LayerWrapper=NEJ.C();_proLayerWrapper=_p._$$LayerWrapper._$extend(_p._$$Abstract);_proLayerWrapper.__reset=function(_options){this.__doInitLayerOptions();this.__supReset(this.__doFilterOptions(_options));this.__lopt.onbeforerecycle=this._$recycle._$bind(this);this.__layer=this.__getLayerInstance()};_proLayerWrapper.__destroy=function(){this._$dispatchEvent("onbeforerecycle");this.__supDestroy();delete this.__lopt;_e._$removeByEC(this.__body);var _layer=this.__layer;if(!!_layer){delete this.__layer;_layer._$recycle()}};_proLayerWrapper.__getLayerInstance=_f;_proLayerWrapper.__doFilterOptions=function(_options){var _result={};_u._$forIn(_options,function(_item,_key){this.__lopt.hasOwnProperty(_key)?this.__lopt[_key]=_item:_result[_key]=_item},this);return _result};_proLayerWrapper.__doInitLayerOptions=function(){this.__lopt={clazz:"",parent:null,content:this.__body,destroyable:!1,oncontentready:null,nohack:!1}};_proLayerWrapper._$show=function(){if(!!this.__layer)this.__layer._$show();this._$dispatchEvent("onaftershow");return this};_proLayerWrapper._$hide=function(){if(!!this.__layer)this.__layer._$hide();return this}})();
(function(){var _=NEJ.P,_g=_("nej.g"),_h=_("nej.h"),_e=_("nej.e"),_u=_("nej.u"),_v=_("nej.v"),_p=_("nej.ui"),_proMask,_supMask;if(!!_p._$$Mask)return;var _seed_css=_e._$pushCSSText(".#<uispace>{position:fixed;_position:absolute;z-index:100;top:0;bottom:0;left:0;right:0;width:100%;height:100%;background-image:url("+_g._$BLANK_IMAGE+");}");_p._$$Mask=NEJ.C();_proMask=_p._$$Mask._$extend(_p._$$Abstract);_supMask=_p._$$Mask._$supro;_proMask.__reset=function(_options){this.__supReset(_options);var _content=_options.content||"&nbsp;";_u._$isString(_content)?this.__body.innerHTML=_content:this.__body.appendChild(_content)};_proMask.__destroy=function(){this.__supDestroy();this.__body.innerHTML="&nbsp;"};_proMask.__initXGui=function(){this.__seed_css=_seed_css};_proMask._$show=function(){_h.__fullScreen(this.__body);_supMask._$show.apply(this,arguments);return this}})();
(function(){var _=NEJ.P,_o=NEJ.O,_e=_("nej.e"),_v=_("nej.v"),_p=_("nej.ut"),_pro;if(!!_p._$$Dragger)return;_p._$$Dragger=NEJ.C();_pro=_p._$$Dragger._$extend(_p._$$Event);_pro.__reset=function(_options){this.__supReset(_options);this.__overflow=!!_options.overflow;this.__body=_e._$get(_options.body);this.__view=_e._$get(_options.view)||_e._$getScrollViewPort(this.__body);this.__mbar=_e._$get(_options.mbar)||this.__body;this.__direction=parseInt(_options.direction)||0;this.__doInitDomEvent([[document,"mouseup",this.__onDragEnd._$bind(this)],[document,"mousemove",this.__onDragging._$bind(this)],[this.__mbar,"mousedown",this.__onDragStart._$bind(this)]])};_pro.__destroy=function(){this.__supDestroy();delete this.__body;delete this.__mbar;delete this.__view};_pro.__getMaxRange=function(){return{x:Math.max(this.__view.clientWidth,this.__view.scrollWidth)-this.__body.offsetWidth,y:Math.max(this.__view.clientHeight,this.__view.scrollHeight)-this.__body.offsetHeight}};_pro.__onDragStart=function(_event){_v._$stop(_event);if(!!this.__offset)return;this.__offset={x:_v._$pageX(_event),y:_v._$pageY(_event)};this.__maxbox=this.__getMaxRange()};_pro.__onDragging=function(_event){if(!this.__offset)return;var _offset={x:_v._$pageX(_event),y:_v._$pageY(_event)};var _deltax=_offset.x-this.__offset.x,_deltay=_offset.y-this.__offset.y,_top=parseInt(_e._$getStyle(this.__body,"top"))||0,_left=parseInt(_e._$getStyle(this.__body,"left"))||0,_value={top:_top+_deltay,left:_left+_deltax};this.__offset=_offset;this._$setPosition(_value)};_pro.__onDragEnd=function(_event){if(!this.__offset)return;delete this.__maxbox;delete this.__offset;this._$dispatchEvent("ondragend",this._$getPosition())};_pro._$setPosition=function(_event){if(!this.__overflow){var _maxbox=this.__maxbox||this.__getMaxRange();_event.top=Math.min(_maxbox.y,Math.max(0,_event.top));_event.left=Math.min(_maxbox.x,Math.max(0,_event.left))}this._$dispatchEvent("onbeforechange",_event);var _style=this.__body.style;if(this.__direction==0||this.__direction==2)_style.top=_event.top+"px";if(this.__direction==0||this.__direction==1)_style.left=_event.left+"px";this._$dispatchEvent("onchange",_event);return this};_pro._$getPosition=function(){return{left:parseInt(_e._$getStyle(this.__body,"left"))||0,top:parseInt(_e._$getStyle(this.__body,"top"))||0}}})();
(function(){var _=NEJ.P,_o=NEJ.O,_e=NEJ.P("nej.e"),_v=NEJ.P("nej.v"),_u=NEJ.P("nej.u"),_t=NEJ.P("nej.ut"),_p=NEJ.P("nej.ui"),_seed_css,_seed_html,_pro,_sup;if(!!_p._$$Window)return;_p._$$Window=NEJ.C();_pro=_p._$$Window._$extend(_p._$$Layer);_sup=_p._$$Window._$supro;_pro.__init=function(){this.__mopt={};this.__dopt={onchange:this.__onDragging._$bind(this)};this.__supInit()};_pro.__reset=function(_options){this.__supReset(_options);this.__setMask(_options.mask);this._$setAlign(_options.align);this._$setTitle(_options.title);if(!_options.draggable)return;this.__dragger=_t._$$Dragger._$allocate(this.__dopt)};_pro.__destroy=function(){this.__supDestroy();delete this.__align;delete this.__mclz;if(!!this.__imask){this.__imask._$recycle();delete this.__imask}if(!!this.__dragger){this.__dragger._$recycle();delete this.__dragger}};_pro.__initXGui=function(){this.__seed_css=_seed_css;this.__seed_html=_seed_html};_pro.__initNode=function(){this.__supInitNode();var _list=_e._$getChildren(this.__body);this.__ncnt=_list[1];this.__dopt.mbar=_list[0];this.__dopt.body=this.__body;_v._$addEvent(_list[2],"mousedown",this.__onClose._$bind(this));_v._$addEvent(this.__dopt.mbar,"mousedown",this.__onDragStart._$bind(this));this.__nttl=_e._$getChildren(this.__dopt.mbar)[0]};_pro.__onClose=function(_event){_v._$stop(_event);this._$dispatchEvent("onclose");this._$hide()};_pro.__onDragStart=function(_event){_v._$dispatchEvent(document,"click")};_pro.__onDragging=function(_event){if(!this.__mask)return;_e._$style(this.__mask,{top:_event.top+"px",left:_event.left+"px"})};_pro.__doPositionAlign=function(){var _func=[function(){return 0},function(_scroll,_delta,_key){return Math.max(0,_scroll[_key]+_delta[_key]/2)},function(_scroll,_delta,_key){return _scroll[_key]+_delta[_key]}],_keys=["left","top"];return function(){var _value={},_style=this.__body.style,_view=_e._$getPageBox(),_scroll={left:_view.scrollLeft,top:_view.scrollTop},_delta={left:_view.clientWidth-this.__body.offsetWidth,top:_view.clientHeight-this.__body.offsetHeight};_u._$forEach(_keys,function(_key,_index){var _handler=_func[this.__align[_index]];if(!_handler)return;_value[_key]=_handler(_scroll,_delta,_key)},this);this._$setPosition(_value)}}();_pro.__doShowMask=function(){if(!this.__imask){if(!this.__mclz)return;this.__mopt.parent=this.__parent;this.__imask=this.__mclz._$allocate(this.__mopt)}this.__imask._$show()};_pro.__doHide=function(){if(!!this.__imask)this.__imask._$hide();_sup.__doHide.apply(this,arguments)};_pro.__setMask=function(_mask){if(!!_mask){if(_mask instanceof _p._$$Mask){this.__imask=_mask;return}if(_u._$isFunction(_mask)){this.__mclz=_mask;return}this.__mclz=_p._$$Mask;if(_u._$isString(_mask))this.__mopt.clazz=_mask;return}this.__mclz=null};_pro._$setTitle=function(_title,_html){if(!!this.__nttl){var _method=!_html?"innerText":"innerHTML";this.__nttl[_method]=_title||"标题"}return this};_pro._$setAlign=function(){var _reg=/\s+/,_halign={left:0,center:1,right:2,auto:3},_valign={top:0,middle:1,bottom:2,auto:3};return function(_align){this.__align=(_align||"").split(_reg);var _tmp=_halign[this.__align[0]];if(_tmp==null)_tmp=1;this.__align[0]=_tmp;var _tmp=_valign[this.__align[1]];if(_tmp==null)_tmp=1;this.__align[1]=_tmp;return this}}();_pro._$show=function(){_sup._$show.apply(this,arguments);this.__doShowMask();return this};_seed_css=_e._$pushCSSText(".#<uispace>{position:absolute;z-index:1000;border:1px solid #aaa;background:#fff;}.#<uispace> .zbar{line-height:30px;background:#8098E7;border-bottom:1px solid #aaa;}.#<uispace> .zcnt{padding:10px 5px;}.#<uispace> .zttl{margin-right:20px;text-align:left;}.#<uispace> .zcls{position:absolute;top:5px;right:0;width:20px;height:20px;line-height:20px;cursor:pointer;}");_seed_html=_e._$addNodeTemplate('<div class="'+_seed_css+'"><div class="zbar"><div class="zttl">标题</div></div><div class="zcnt"></div><span class="zcls" title="关闭窗体">×</span></div>')})();
(function(){var _=NEJ.P,_u=_("nej.u"),_p=_("nej.ui"),_proWindowWrapper;if(!!_p._$$WindowWrapper)return;_p._$$WindowWrapper=NEJ.C();_proWindowWrapper=_p._$$WindowWrapper._$extend(_p._$$LayerWrapper);_proWindowWrapper.__getLayerInstance=function(){return _p._$$Window._$allocate(this.__lopt)};_proWindowWrapper.__doInitLayerOptions=function(){_p._$$WindowWrapper._$supro.__doInitLayerOptions.apply(this,arguments);this.__lopt.mask=null;this.__lopt.title="标题";this.__lopt.align="";this.__lopt.draggable=!1;this.__lopt.onclose=null}})();
(function(){var using=NEJ.P;var f=NEJ.F;var i=using("nej.ui");var e=using("nej.e");var dw=using("dd.widget");var o=NEJ.O;var v=using("nej.v");var du=using("dd.util");var proto;dw._$$Window=NEJ.C();proto=dw._$$Window._$extend(i._$$WindowWrapper);proto.__initNode=function(){this.__supInitNode();this.__confirmNode=du.get("confirm",this.__body);this.__cancelNode=du.get("cancel",this.__body);v._$addEvent(this.__confirmNode,"click",this.__doClickConfirm._$bind(this));v._$addEvent(this.__cancelNode,"click",this.__onClickCancel._$bind(this))};proto.__reset=function(options){options=options||o;options.parent=options.parent||document.body;options.clazz="m-layer "+(!!options.clazz?options.clazz:"");options.draggable=!0;options.mask="m-mask";this.__autoDisable=options.autoDisable;this.__supReset(options);this._$addEvent("confirm",options.onconfirm);this._$addEvent("cancel",options.oncancel)};proto.__doClickConfirm=function(event){v._$stopDefault(event);if(this.__autoDisable){if(e._$hasClassName(this.__confirmNode,"z-dis")){return}e._$addClassName(this.__confirmNode,"z-dis")}this.__onClickConfirm(event)};proto.__onClickConfirm=function(event){this._$dispatchEvent("confirm");this._$hide()};proto._$enableConfirm=function(event){e._$delClassName(this.__confirmNode,"z-dis")};proto.__onClickCancel=function(event){v._$stopDefault(event);this._$dispatchEvent("cancel");this._$hide()}})();
(function(){var using=NEJ.P;var i=using("nej.ui");var dw=using("dd.widget");var du=using("dd.util");var e=using("nej.e");var $=du.$;var proto;dw._$$Pager=NEJ.C();var MAX_MESSAGES=1e5/20;proto=dw._$$Pager._$extend(i._$$Pager);proto.__reset=function(_options){this.__supReset(_options);var self=this;this.$search=$('<span class="search">跳到<input class="u-ipt"type="text" />页 <button class="u-btn u-btn-c1 u-btn-s0">GO</button> </span>');var $input=this.$search._$find(".u-ipt");this.$search._$insert2(this.__body)._$on(["keydown input","click button"],function(e){var value=$input._$val();if(e.type=="click"||e.which==13){if(!/\d+/.test(value))return du.showError("只能输入数字");value=parseInt(value,10);var max=Math.min(MAX_MESSAGES,self.__page.__total);if(value>max){du.showError("跳转页数不能超过"+max)}else{if(value<1){du.showError("跳转页数不能小于1")}else{self._$setIndex(value);$input._$val("")}}}})};proto.__destroy=function(){this.__supDestroy();this.$search._$off()}})();
(function(){var using=NEJ.P;var v=using("nej.v");var e=using("nej.e");var i=using("nej.ui");var u=using("nej.u");var di=using("dd.ui");var du=using("dd.util");var dw=using("dd.widget");var proto;di._$$LotteryItem=NEJ.C();proto=di._$$LotteryItem._$extend(i._$$ListItem);proto.__init=function(){this.__supInit();du.$(this.__body)._$on({"click .j-delete":this.__onDelete._$bind(this)})};proto.__reset=function(options){this.__operatable=options.operatable;this.__selectable=options.selectable;this.__supReset(options)};proto.__doRefresh=function(data){this.constructor._$supro.__doRefresh.apply(this,arguments);var node=e._$getHtmlTemplate("jst-lottery",{lottery:data,operatable:this.__operatable,selectable:this.__selectable},{transUri:du.transUri,transTime:du.transTime});this.__body.innerHTML=node};proto.__destroy=function(){this.__supDestroy()}})();
(function(){var using=NEJ.P;var v=using("nej.v");var e=using("nej.e");var i=using("nej.ui");var u=using("nej.u");var di=using("dd.ui");var du=using("dd.util");var dw=using("dd.widget");var proto;di._$$ImageTextItem=NEJ.C();proto=di._$$ImageTextItem._$extend(i._$$ListItem);proto.__reset=function(options){this.__operatable=options.operatable;this.__selectable=options.selectable;this.__supReset(options)};proto.__doRefresh=function(data){this.constructor._$supro.__doRefresh.apply(this,arguments);this.__body.className="tw-wrap f-cb";var node=e._$html2node(e._$getHtmlTemplate("jst-imagetext",{material:data,operatable:this.__operatable,selectable:this.__selectable},{transUri:du.transUri,transTime:du.transTime}));this.__onClickDeleteProxy=this.__onClickDelete._$bind(this);this.__deleteNode=du.get("delete",node);v._$addEvent(this.__deleteNode,"click",this.__onClickDeleteProxy);this.__body.appendChild(node);this.__contentNode=node};proto.__onClickDelete=function(id){this.__onDelete()};proto.__destroy=function(){this.__supDestroy();v._$delEvent(this.__deleteNode,"click",this.__onClickDeleteProxy);e._$remove(this.__contentNode);delete this.__contentNode}})();
(function(){var using=NEJ.P;var v=using("nej.v");var e=using("nej.e");var i=using("nej.ui");var u=using("nej.u");var di=using("dd.ui");var du=using("dd.util");var dw=using("dd.widget");var proto;di._$$ActivityItem=NEJ.C();proto=di._$$ActivityItem._$extend(i._$$ListItem);proto.__initXGui=function(){this.__seed_html="ntp-activity"};proto.__initNode=function(){this.__supInitNode();v._$addEvent(du.get("delete",this.__body),"click",this.__onClickDelete._$bind(this))};proto.__reset=function(options){this.__supReset(options)};proto.__doRefresh=function(data){this.constructor._$supro.__doRefresh.apply(this,arguments);var context=this.__body;e._$dataset(context,"id",data.mid);du.get("createTime",context).innerText=u._$format(data.createTime,"M月d日");du.get("uri",context).src=du.transUri(data.uri);var subtitleNode=du.get("subtitle",context);subtitleNode.innerText=data.subtitle;subtitleNode.href="/material/viewActivity?id="+data.mid;du.get("startTime",context).innerText=u._$format(data.startTime,"yyyy/M/d");du.get("endTime",context).innerText=u._$format(data.endTime,"yyyy/M/d");var btn=du.get("btnTxt",context);btn.innerText=data.btnTxt;btn.href=data.url;du.get("edit",context).href="/material/updateActivity?id="+data.mid};proto.__onClickDelete=function(id){this.__onDelete()};proto.__destroy=function(){this.__supDestroy()}})();
(function(){var using=NEJ.P;var o=NEJ.O;var e=using("nej.e");var i=using("nej.ui");var v=using("nej.v");var dw=using("dd.widget");var du=using("dd.util");dw._$$Tip=NEJ.C();var proto=dw._$$Tip._$extend(i._$$Abstract);proto.__initXGui=function(){this.__seed_html="ntp-tip"};proto.__reset=function(options){e._$one("body").appendChild(this.__body)};proto._$attach=function(node,html){var parent=typeof node=="object"?node:e._$one(node);var offset=e._$offset(parent,e._$one("body"));var left=offset.x+parseInt(e._$getStyle(parent,"width"))+4;var top=offset.y;var content=e._$one(".content",this.__body);if(content){content.innerHTML=html}e._$setStyle(this.__body,"left",left+"px");e._$setStyle(this.__body,"top",top-10+"px");this._$show()};proto._$show=function(){this.__body.style.display="block"};proto._$hide=function(){this.__body.style.display="none"};proto.__destroy=function(){e._$one("body").removeChild(this.__body);this.__supDestroy()}})();
(function(){var using=NEJ.P;var o=NEJ.O;var e=using("nej.e");var v=using("nej.v");var u=using("nej.u");var t=using("nej.ut");var $=using("nej.$");var dw=using("dd.widget");var du=using("dd.util");var uid=+(new Date);dw._$$FUploader=NEJ.C();var proto=dw._$$FUploader._$extend(t._$$Event);proto.__init=function(options){this.__listeners={};this.__globalname=this.__createGlobal();this.__btnTpl=du.tpl('<div id="upload" class="m-fuploader"><div class="trigger"><div class="u-btn"><span class="wrap" hidefocus="true"><span class="icn u-icn u-icn-upload"></span><span>{btnTxt}</span></span></div></div><div class="container"></div></div>');this.__tpl=du.tpl('<embed src="/res/swf/upLoadImg'+(options.multiSelect?"":"1")+'.swf?v1.4" flashvars="multiSelect={multiSelect}&&onevent={callback}&&zipMaxSize={zipMaxSize}&&saveUrl={action}&&width={imageWidth}&&maxSize={maxSize}" wmode="transparent" allowscriptaccess="always" width="{width}" height="{height}" type="application/x-shockwave-flash">');this.__initEvent();if(window.addEventListener){window.addEventListener("offline",function(){this.__proxy("offline")}._$bind(this))}};proto.__reset=function(options){this.__extension=options.extension;if(options.onmessage){this.__listener=options.onmessage}this.$body=$(e._$get(options.parent));this.__maxSizeStr=options.zipMaxSize||"5M";this.$body._$html(this.__btnTpl({btnTxt:options.btnTxt||"上传图片"}))._$children(".container",true)._$html(this.__tpl({callback:this.__globalname,zipMaxSize:parseSize(this.__maxSizeStr)/1024/1024,maxSize:parseSize(options.maxSize||"10M")/1024/1024,action:(options.action||"/upload")+"?callback="+this.__globalname,width:options.width||100,height:options.height||28,multiSelect:options.multiSelect==true,imageWidth:options.imageWidth||1e3}))};proto._$on=function(event,callback){if(typeof event=="object"){for(var i in event){this._$on(i,event[i])}return this}callbacks=this.__listeners[event]||(this.__listeners[event]=[]);callbacks.push(callback);return this};proto.__initEvent=function(){var extension=this.__extension;var self=this;this._$on({refresh:function(data){if(this.progress){var value=e._$one(".progress-value",this.progress);var text=e._$one(".j-text",this.progress);current.innerText=data.current;total.innerText=data.total;value.style.width=Math.floor(data.current/data.total*100)+"%";if(data.total==data.current){this.__proxy("com")}}},openFile:function(data){var extname=data.fileName.split(".")[1];if(extname&&extension&&!~extension.indexOf(extname)){this.__proxy("validated",1,"错误的文件类型  "+(extension?"支持 "+extension.join(",")+extension.length+"种文件类型":""));this.__stop()}else{this.__proxy("uploading");if(self.progress){e._$setStyle(self.progress,"display","block")}}},error:function(data){this.__proxy("validated",4)},ioerror:function(){this.__proxy("error",1,"网络获服务器异常，请稍后再试")},upload:function(res){var data=res.data;if(typeof data==="string"&&/\<script\>/.test(data)){data=data.match(/\{.*\}/);if(data){data=eval("("+data[0]+")")}if(data){this.__proxy("uploaded",200,data)}else{this.__proxy("uploaded",400,"数据返回错误")}}else{var data=JSON.parse(data);this.__proxy("uploaded",data.code,data.result||data.message)}},uploadProgress:function(){},zip:function(){this.__proxy("uploading");if(self.progress){$self.progress._$style("display","block")}},zipProgress:function(data){this.__totalSize=data.bytesTotal},cancel:function(data){this.__proxy("validated",0,"请选择要上传的图片")}})};proto.__stop=function(){};proto.__proxy=function(type,code,result){if(this.__listener)this.__listener({type:type,data:{code:code,result:result}})};proto.__dispatch=function(type,data){var self=this,len;if((callbacks=this.__listeners[type])&&(len=callbacks.length)){for(var i=0;i<len;i++){var res=callbacks[i].call(self,data);if(res===false)break}}};proto.__getUID=function(){return uid++};proto.__close=function(){var embed=e._$one("embed",this.$body[0]);if(embed){embed.close()}else{setTimeout(function(){this.__close()}._$bind(this),50)}};proto.__createGlobal=function(){name="callback"+"_"+this.__getUID();window[name]=function(data){this.__dispatch(data.type,data)}._$bind(this);return name};proto.__destroy=function(){this.$body._$html("")};function parseSize(sizeStr){var type=typeof sizeStr;if(type==="number")sizeStr=String(sizeStr);if(type!=="string"||sizeStr.length===0){return}var units=["B","K","M","G","T"];var value=parseFloat(sizeStr);var unit=sizeStr.slice(-1);unit=unit.toUpperCase();if(units.join("").indexOf(unit)===-1){unit="B"}for(var i=0;x=units[i];i++){if(unit===x){break}value*=1024}return value}dw._$$MUploader=NEJ.C();var proto=dw._$$MUploader._$extend(dw._$$FUploader);proto.__init=function(options){this.__supInit(options);this.errors=[];this.fails=[];this.uploads=[];this.total=[];this.tip=dw._$$Tip._$allocate({});var self=this;$(options.area)._$on({"mouseover .u-icnq":function(){var content="";if($(this)._$hasClassName("j-info-error")){content="<h3>以下图片上传失败</h3>";content+="<p>"+(self.errors.join("</p><p>")||"无")+"</p>"}else{content="<h3>以下图片由于大小限制或文件类型不合法未上传</h3>";content+="<p>"+(self.fails.join("</p><p>")||"无")+"</p>"}self.tip._$attach(this,content)},"mouseout .u-icnq":function(){self.tip._$hide()},"click .j-close":function(){e._$delClassName(self.$(".j-progress"),"z-show")}})};proto.__reset=function(options){this.__supReset(options);if(options.area){this.area=options.area;e._$one(".tip",this.area).innerText=options.tip||"";this.progress=e._$one(".progress-wrap",options.area);e._$addClassName(this.area,"m-uparea-mult")}var self=this;if(this.progress){this.progress.appendChild(e._$getNodeTemplate("ntp-progress"))}};proto.__destroy=function(){this.__supDestroy();$(this.progress)._$html("");e._$delClassName(this.area,"m-uparea-mult");window.onbeforeunload=null};proto.__error=function(filename){this.errors.push(filename);this.$(".info-error .num").innerText=this.errors.length};proto.__fail=function(filename){if(typeof filename=="string"){this.fails.push(filename)}else{this.fails=this.fails.concat(filename)}this.$(".info-fail .num").innerText=this.fails.length};proto.__upload=function(filename){this.uploads.push(filename);this.$(".info-success .num").innerText=this.uploads.length};proto.$=function(sl){return e._$one(sl,this.progress)};proto.__refresh=function(current,total){var value=this.$(".progress-value");value.style.width=current/total*100+"%";var text=this.$(".text")};proto.__begin=function(data){this.started=true;this.__resetState();this.total=data.list;this.$(".j-text").innerText="准备上传...";e._$attr(this.$(".j-text"),"title","");e._$addClassName(this.$(".j-progress"),"z-show");e._$addClassName(e._$one(".m-fuploader"),"z-dis");window.onbeforeunload=function(){return"正在上传图片，确定要离开此页？"}};proto.__resetState=function(){this.$(".info-fail .num").innerText=0;this.$(".info-success .num").innerText=0;this.$(".info-error .num").innerText=0;this.$(".warn").innerText="上传过程中，请不要进行其它操作";this.$(".progress-value").style.width="0%";this.$(".j-text").innerText="";e._$attr(this.$(".j-text"),"title","");e._$delClassName(this.area,"z-end");e._$delClassName(this.$(".m-progress"),"z-dis");e._$delClassName(this.$(".j-close"),"bounceIn");this.total=[];this.errors=[];this.uploads=[];this.fails=[]};proto.__end=function(){this.started=false;this.__progress("100%");var self=this;this.$(".j-text").innerText="";e._$attr(this.$(".j-text"),"title","");this.$(".warn").innerText="上传结束!";e._$addClassName(this.area,"z-end");e._$delClassName(e._$one(".m-fuploader"),"z-dis");e._$addClassName(this.$(".j-close"),"bounceIn");e._$addClassName(self.$(".m-progress"),"z-dis");window.onbeforeunload=null};proto._$close=function(){$(this.progress)._$find(".j-progress")._$delClassName("z-show")};proto.__getPercentage=function(){return(this.errors.length+this.uploads.length+this.fails.length)/this.total.length*100+"%"};proto.__progress=function(val){var value=this.$(".progress-value");value.style.width=val||this.__getPercentage()};proto.__initEvent=function(){var extension=this.__extension;this._$on({error:function(data){var errorID=parseInt(data.errorID,10)||1e3;if(errorID==1002||errorID==1004){this.__error(data.name)}else{this.__fail(data.name)}this.__progress();if(this.errors.length+this.fails.length+this.uploads.length===this.total.length){this.__proxy("complete");this.__end()}},success:function(res){var data=res.data;if(typeof data==="string"&&/\<script\>/.test(data)){data=data.match(/\{.*\}/);if(data){try{data=eval("("+data[0]+")")}catch(e){data=null}}if(data){this.__proxy("upload",200,data);this.__upload(data.name)}else{this.__proxy("error",400,"服务器数据返回数据失败");this.__error("未知文件")}}else{}this.__progress()},complete:function(data){this.__proxy("complete");this.__end()},select:function(data){this.__begin(data);if(data.errors){this.__fail(data.errors)}if(!data.list||!data.list.length){this.__end()}},progress:function(data){this.$(".j-text").innerHTML="正在上传"+data.name;e._$attr(this.$(".j-text"),"title","正在上传"+data.name)},refresh:function(data){this.__refresh(data.current,data.total);this.__proxy("refresh",data)},cancel:function(data){}})}})();
var FlashDetect=new function(){var self=this;self.installed=false;self.raw="";self.major=-1;self.minor=-1;self.revision=-1;self.revisionStr="";var activeXDetectRules=[{name:"ShockwaveFlash.ShockwaveFlash.7",version:function(obj){return getActiveXVersion(obj)}},{name:"ShockwaveFlash.ShockwaveFlash.6",version:function(obj){var version="6,0,21";try{obj.AllowScriptAccess="always";version=getActiveXVersion(obj)}catch(err){}return version}},{name:"ShockwaveFlash.ShockwaveFlash",version:function(obj){return getActiveXVersion(obj)}}];var getActiveXVersion=function(activeXObj){var version=-1;try{version=activeXObj.GetVariable("$version")}catch(err){}return version};var getActiveXObject=function(name){var obj=-1;try{obj=new ActiveXObject(name)}catch(err){obj={activeXError:true}}return obj};var parseActiveXVersion=function(str){var versionArray=str.split(",");return{raw:str,major:parseInt(versionArray[0].split(" ")[1],10),minor:parseInt(versionArray[1],10),revision:parseInt(versionArray[2],10),revisionStr:versionArray[2]}};var parseStandardVersion=function(str){var descParts=str.split(/ +/);var majorMinor=descParts[2].split(/\./);var revisionStr=descParts[3];return{raw:str,major:parseInt(majorMinor[0],10),minor:parseInt(majorMinor[1],10),revisionStr:revisionStr,revision:parseRevisionStrToInt(revisionStr)}};var parseRevisionStrToInt=function(str){return parseInt(str.replace(/[a-zA-Z]/g,""),10)||self.revision};self.majorAtLeast=function(version){return self.major>=version};self.minorAtLeast=function(version){return self.minor>=version};self.revisionAtLeast=function(version){return self.revision>=version};self.versionAtLeast=function(major){var properties=[self.major,self.minor,self.revision];var len=Math.min(properties.length,arguments.length);for(i=0;i<len;i++){if(properties[i]>=arguments[i]){if(i+1<len&&properties[i]==arguments[i]){continue}else{return true}}else{return false}}};self.FlashDetect=function(){if(navigator.plugins&&navigator.plugins.length>0){var type="application/x-shockwave-flash";var mimeTypes=navigator.mimeTypes;if(mimeTypes&&mimeTypes[type]&&mimeTypes[type].enabledPlugin&&mimeTypes[type].enabledPlugin.description){var version=mimeTypes[type].enabledPlugin.description;var versionObj=parseStandardVersion(version);self.raw=versionObj.raw;self.major=versionObj.major;self.minor=versionObj.minor;self.revisionStr=versionObj.revisionStr;self.revision=versionObj.revision;self.installed=true}}else if(navigator.appVersion.indexOf("Mac")==-1&&window.execScript){var version=-1;for(var i=0;i<activeXDetectRules.length&&version==-1;i++){var obj=getActiveXObject(activeXDetectRules[i].name);if(!obj.activeXError){self.installed=true;version=activeXDetectRules[i].version(obj);if(version!=-1){var versionObj=parseActiveXVersion(version);self.raw=versionObj.raw;self.major=versionObj.major;self.minor=versionObj.minor;self.revision=versionObj.revision;self.revisionStr=versionObj.revisionStr}}}}}()};FlashDetect.JS_RELEASE="1.0.4";
(function(){var using=NEJ.P;var o=NEJ.O;var p=using("nej.j");var e=using("nej.e");var v=using("nej.v");var u=using("nej.u");var t=using("nej.ut");var dw=using("dd.widget");dw._$$Upload=NEJ.C();var proto=dw._$$Upload._$extend(t._$$Event);proto.__init=function(options){this.__supInit();if(this.__goFlash(options)){this.__iframe=document.createElement("iframe");this.__iframe.frameborder="0";this.__iframe.setAttribute("frameborder","0",0);this.__iframe.className="u-upload";this.__listenerName="listener"+u._$randNumberString();window[this.__listenerName]=this.__listenerProxy._$bind(this)}else{}};proto.__reset=function(options){this.__supReset();options=options||o;this.__listener=options.onmessage;this.__retry=options.retry;if(this.__goFlash(options)){var obj={type:options.type,size:options.size,duration:options.duration,extension:options.extension,dimension:options.dimension,action:options.action,retry:options.retry,btnTxt:options.btnTxt};for(var p in obj){if(obj[p]===undefined){delete obj[p]}}var query=u._$object2query(obj);this.__iframe.src="./upload.html?listener="+this.__listenerName+"&"+query;var parent=e._$get(options.parent);if(parent){parent.appendChild(this.__iframe)}}else{this.__resetFUploader(options)}};proto.__goFlash=function(options){return!options.flash||!FlashDetect.installed};proto.__resetFUploader=function(options){this.__flash=true;this.__fuploader=dw._$$FUploader._$allocate({type:1,action:options.action,parent:options.parent,btnTxt:options.btnTxt||"上传图片",zipMaxSize:options.size||"5M",maxSize:options.maxSize||"10M",imageWidth:options.imageWidth,imageHeight:options.imageHeight,onmessage:options.onmessage})};proto.__listenerProxy=function(event){if(this.__listener){this.__listener(event);if(this.__retry&&event&&event.data&&event.data.result){if(this.__retry==true){e._$addClassName(this.__iframe,"u-upload-retry")}else{e._$one("#btnTxt",this.__iframe.contentDocument).innerText=this.__retry}}}};proto.__destroy=function(){if(!this.__flash){this.__supDestroy();this.__iframe.src="";e._$remove(this.__iframe)}else{this.__fuploader&&this.__fuploader._$recycle()}}})();
(function(){var using=NEJ.P;var merge=NEJ.X;var o=NEJ.O;var f=NEJ.F;var e=using("nej.e");var v=using("nej.v");var u=using("nej.u");var t=using("nej.ut");var j=using("nej.j");var dd=using("dd.data");var di=using("dd.ui");var dm=using("dd.module");var dw=using("dd.widget");var du=using("dd.util");var types=using("dd.const").TYPES;dw._$$SelectMaterial={_$allocate:function(options){options=options||o;var type=options.type;switch(type){case 101:return dw._$$SelectImageText._$allocate(options);case 1e3:return dw._$$SelectActivity._$allocate(options);break;case 2e3:return dw._$$SelectLottery._$allocate(options);break;default:return dw._$$SelectAtom._$allocate(options)}},_$recyle:function(widget){if(widget&&widget.constructor){return widget._$recycle()}}};dw._$$SelectComposite=NEJ.C();var compositeProto=dw._$$SelectComposite._$extend(dw._$$Window);compositeProto.__initNode=function(){this.__supInitNode();var context=this.__body;this.__listNode=du.get("list",context);v._$addEvent(this.__listNode,"click",this.__onClickList._$bind(this));v._$addEvent(this.__listNode,"dblclick",this.__onDblClickList._$bind(this));this.__mopt={limit:6,parent:this.__listNode,item:{selectable:true,klass:this.__item},cache:{key:"mid",klass:dd._$$MaterialCache},pager:{klass:dw._$$Pager,clazz:"",label:{prev:"<",next:">"},parent:du.get("page",context),noend:true},onerror:du.showListError,onbeforelistload:du.showListLoading,onemptylist:du.showListMessage._$bind(null,"暂无素材！")}};compositeProto.__reset=function(options){this.__supReset(options);options=options||o;var id=options.type;var type=du.getType(id);this.__layer._$setTitle("选择"+type.title);if(this.__listModule){this.__listModule._$recycle()}this.__mopt.cache.lkey=""+id;this.__listModule=t._$$ListModulePG._$allocate(this.__mopt)};compositeProto.__getClickItem=function(event){return du.findAncestor(v._$getElement(event),function(node){return e._$hasClassName(node,du.nameToClass("item"))},this.__listNode)};compositeProto.__onClickList=function(event){var itemNode=this.__getClickItem(event);if(itemNode){this.__toggleItem(itemNode)}};compositeProto.__onDblClickList=function(event){var itemNode=this.__getClickItem(event);if(itemNode){this.__onClickConfirm()}};compositeProto.__toggleItem=function(itemNode){if(!itemNode||this.__currentItemNode===itemNode){return}if(this.__currentItemNode){e._$delClassName(this.__currentItemNode,"z-cur")}this.__currentItemNode=itemNode;e._$addClassName(this.__currentItemNode,"z-cur")};compositeProto.__onClickConfirm=function(event){if(this.__currentItemNode){var id=e._$dataset(this.__currentItemNode,"id");var data=this.__listModule._$cache()._$getItemInCache(id)}this._$dispatchEvent("confirm",data);this._$hide()};compositeProto.__destroy=function(){this.__supDestroy();if(this.__currentItemNode){e._$delClassName(this.__currentItemNode,"z-cur");this.__currentItemNode=null}};dw._$$SelectImageText=NEJ.C();var imageTextProto=dw._$$SelectImageText._$extend(dw._$$SelectComposite);imageTextProto.__initXGui=function(){this.__seed_html="widget-selectImageText"};imageTextProto.__initNode=function(){this.__item=di._$$ImageTextItem;this.__supInitNode()};dw._$$SelectActivity=NEJ.C();var activityProto=dw._$$SelectActivity._$extend(dw._$$SelectComposite);activityProto.__initXGui=function(){this.__seed_html="widget-selectActivity"};activityProto.__initNode=function(){this.__item=di._$$ActivityItem;this.__supInitNode()};dw._$$SelectLottery=NEJ.C();var lotteryProto=dw._$$SelectLottery._$extend(dw._$$SelectComposite);lotteryProto.__initXGui=function(){this.__seed_html="widget-selectLottery"};lotteryProto.__initNode=function(){this.__item=di._$$LotteryItem;this.__supInitNode()};dw._$$SelectAtom=NEJ.C();var atomProto=dw._$$SelectAtom._$extend(dw._$$Window);atomProto.__initXGui=function(){this.__seed_html="widget-selectAtom"};atomProto.__initNode=function(){this.__supInitNode();var context=this.__body;this.__tipNode=du.get("tip",context);this.__mopt={limit:5,parent:du.get("list",context),item:{klass:di._$$MaterialItem1},cache:{key:"mid",klass:dd._$$MaterialCache},pager:{klass:dw._$$Pager,clazz:"",label:{prev:"<",next:">"},parent:du.get("page",context),noend:true},onbeforelistload:du.showListLoading,onemptylist:du.showListMessage._$bind(null,"暂无素材！")}};atomProto.__reset=function(options){options.onclose=(options.onclose||f)._$aop(this.__restoreUI._$bind(this));this.__supReset(options);options=options||o;var index=options.type||0;var context=this.__body;var type=types[index];this.__layer._$setTitle("选择"+type.title);var param={type:type.id,size:type.limit.size+"M",duration:type.limit.duration,extension:type.limit.extension};if(this.__upload){this.__upload._$recycle()}var multi=type.id==1&&!using("nej.p")._$IS.ios&&FlashDetect.installed;var Uploader=multi?dw._$$MUploader:dw._$$Upload;if(multi){this.__upload=Uploader._$allocate({type:type.id,maxSize:"20M",zipMaxSize:"2M",tip:"按住Ctrl可选择多张照片",extension:type.limit.extension,area:e._$one(".m-uparea",context),parent:du.get("upload",context),multiSelect:true,onmessage:this.__listener2._$bind(this,param)})}else{if(type.id==1){e._$one(".m-uparea .tip",context).innerText="平台支持多图上传(需flash插件支持)"}else{e._$one(".m-uparea .tip",context).innerText=""}this.__upload=Uploader._$allocate(merge({type:type.id,size:type.limit.size+"M",duration:type.limit.duration,extension:type.limit.extension,parent:du.get("upload",context),onmessage:this.__listener._$bind(this,param)},param))}if(index==options.tiptype){this.__tipNode.innerText=options.tip||""}else{this.__tipNode.innerText=""}var limit=type.limit;var str="";if(limit){if(limit.size){str+="，大小限制："+limit.size+"M"}if(limit.duration){str+="，长度限制："+limit.duration+"s"}if(limit.extension&&limit.extension.length){str+="，格式限制："+limit.extension.join(",")}}if(str.indexOf("，")==0){str=str.substr(1)}du.get("limit",context).innerText=str;if(this.__listModule){this.__listModule._$recycle()}this.__mopt.cache.lkey=""+index;this.__listModule=t._$$ListModulePG._$allocate(this.__mopt)};atomProto.__onClickConfirm=function(event){var radios=du.getAll("radio",this.__body);var id,data;for(var i=0,radio;radio=radios[i];i++){if(radio.checked){id=e._$dataset(radio,"id");break}}if(id!==undefined){data=this.__listModule._$cache()._$getItemInCache(id)}this._$dispatchEvent("confirm",data);this._$hide()};atomProto.__onClickCancel=function(event){this._$dispatchEvent("cancel");this._$hide()};atomProto._$hide=function(){this.__restoreUI();this.constructor._$supro._$hide.apply(this,arguments)};atomProto.__restoreUI=function(){du.hideMessage();if(this.__timer){window.clearTimeout(this.__timer);this.__timer=undefined}};atomProto.__listener=function(param,event){du.onUploaderMessage(event,param);if(event.type==="uploaded"&&event.data.code===200){this.__onUpload(event.data)}};atomProto.__listener2=function(param,event){if(event.type=="upload"&&event.data&&event.data.result){this.__listModule._$add(event.data.result)}};atomProto.__listener=function(param,event){du.onUploaderMessage(event,param);if(event.type==="uploaded"&&event.data.code===200){this.__onUpload(event.data,param)}};atomProto.__onUpload=function(data,param){var result=data&&data.result;if(result){if(param.type===2&&result.duration>param.duration*1e3){du.showError("音频长度不能超过120s")}else{if(param.type===2||param.type===3){du.showHint({message:"正在转码...",autoDisappear:false});this.__queryTrans(result)}else{du.showSuccess("上传成功");this.__listModule._$add(result)}}}else{du.showError(data.message||"上传失败")}};atomProto.__startQueryTrans=function(data){this.__timer=window.setTimeout(this.__queryTrans._$bind(this,data),3e3)};atomProto.__queryTrans=function(data){j._$requestByREST("/rest/querytrans",{method:"GET",type:"json",data:{bucket:data.bucket,object:data.object},onload:this.__cbQueryTrans._$bind(this,data)})};atomProto.__cbQueryTrans=function(data,json){var result=json&&json.result;if(result){du.showSuccess("转码成功");var arr=result.object.match(/\.[^\.]+$/);data.fileName=data.fileName.replace(/\.[^\.]+$/,arr[0]);this.__listModule._$add(merge(data,result))}else{this.__startQueryTrans(data)}}})();
(function(){var _=NEJ.P,_o=NEJ.O,_e=_("nej.e"),_u=_("nej.u"),_v=_("nej.v"),_x=_("nej.x"),_p=_("nej.ut"),_pro;if(!!_p._$$Tab)return;_p._$$Tab=NEJ.C();_pro=_p._$$Tab._$extend(_p._$$Event);_pro.__reset=function(_options){this.__supReset(_options);this.__name=_options.event||"click";this.__selected=_options.selected||"js-selected";this.__disabled=_options.disabled||"js-disabled";this.__inversed=!!_options.inverse;this.__doTabListCheck(_options.list);this._$go(_options.index||0)};_pro.__destroy=function(){var _doResetSelect=function(_node){this.__doTabItemSelect(_node,!1)};return function(){this.__supDestroy();_u._$forEach(this.__list,_doResetSelect,this);delete this.__list;delete this.__name;delete this.__index;delete this.__disabled;delete this.__selected;delete this.__inversed}}();_pro.__doTabListCheck=function(){var _doInitDomEvent=function(_item){if(!_item)return;this.__list.push(_item);var _index=this.__list.length-1,_handler=this.__cblist[_index];if(!_handler){_handler=this._$go._$bind(this,_index);this.__cblist[_index]=_handler}this.__doInitDomEvent([[_item,this.__name,_handler]])};return function(_list){this.__list=[];if(!this.__cblist)this.__cblist=[];_u._$forEach(_list,_doInitDomEvent,this)}}();_pro.__doTabItemSelect=function(_element,_selected){!!_selected&&!this.__inversed?_e._$addClassName(_element,this.__selected):_e._$delClassName(_element,this.__selected)};_pro._$go=function(_index,_force){var _element=this.__list[_index];if(_force!=!0&&(_index==this.__index||!_element||_e._$hasClassName(_element,this.__disabled))){_v._$stopDefault(arguments[1]);return this}var _event={index:_index,last:this.__index,list:this._$getList(),data:_e._$dataset(_element,"value")};this.__index=_index;_element=this.__list[_event.last];if(!!_element)this.__doTabItemSelect(_element,!1);_element=this.__list[this.__index];this.__doTabItemSelect(_element,!0);this._$dispatchEvent("onchange",_event);if(!_event.nostop)_v._$stopDefault(arguments[1]);return this};_pro._$getIndex=function(){return this.__index};_pro._$getList=function(){return this.__list};_e._$tab=_x._$tab=function(_parent,_options){var _id=_e._$id(_parent);if(!_id)return null;if(!_p._$api(_id,_p._$$Tab)){_options=_options||{};_options.list=!_options.clazz?_e._$getChildren(_id):_e._$getByClassName(_id,_options.clazz);delete _options.clazz}return _p._$api(_id,_p._$$Tab,_options||_o)};_x.isChange=!0})();
(function(){var using=NEJ.P;var i=using("nej.ui");var dw=using("dd.widget");var o=NEJ.O;var v=using("nej.v");var e=using("nej.e");var du=using("dd.util");var proto;dw._$$Prompt=NEJ.C();proto=dw._$$Prompt._$extend(dw._$$Window);proto.__initXGui=function(){this.__seed_html="window-prompt"};proto.__initNode=function(){this.__supInitNode();var nodes=du.getAll("flag",this.__body);this.__caption=nodes[0];this.__label=nodes[1];this.__input=nodes[2];this.__error=nodes[3];v._$addEvent(this.__input,"keyup",this.__onInputChange._$bind(this))};proto.__reset=function(options){this.__supReset(options);options=options||o;this.__enterDisable=options.enterDisable;this.__labeltag=options.label?true:false;this.__caption.innerText=options.caption||"";this.__label.innerText=options.label||"";this.__input.value=options.input||"";this.__input.placeholder=options.placeholder||"";this.__cancelNode.style.display=options.nocancel?"none":"";if(this.__input.value!=""){e._$addClassName(this.__label,"f-dn")}};proto.__onClickConfirm=function(evt){if(this.__enterDisable){if(e._$hasClassName(this.__confirmNode,"z-dis")){return}e._$addClassName(this.__confirmNode,"z-dis")}this._$dispatchEvent("confirm",this.__input.value.trim())};proto._$show=function(){dw._$$Prompt._$supro._$show.apply(this,arguments);e._$addClassName(this.__error,"f-dn");this.__input.focus()};proto._$showTip=function(msg){if(msg){this.__showTip(true,msg);this.__input.focus()}};proto.__onInputChange=function(event){var val=this.__input.value.trim();if(event.keyCode===13&&this.__crtVal==val){this.__onClickConfirm();return}this.__crtVal=val;if(!!val){this.__showTip(false);if(this.__labeltag){e._$addClassName(this.__label,"f-dn")}}else{if(this.__labeltag){e._$delClassName(this.__label,"f-dn")}}};proto._$enableBtn=function(){e._$delClassName(this.__confirmNode,"z-dis")};proto.__showTip=function(visible,tip){if(!!tip){this.__error.innerHTML=tip}if(!!visible){e._$delClassName(this.__error,"f-dn")}else{e._$addClassName(this.__error,"f-dn")}};proto.__destroy=function(){this.__supDestroy();e._$delClassName(this.__confirmNode,"z-dis");e._$delClassName(this.__label,"f-dn")}})();
(function(){var _=NEJ.P,_o=NEJ.O,_v=_("nej.v"),_e=_("nej.e"),_p=_("nej.ui"),_pro;if(!!_p._$$Card)return;var _seed_css=_e._$pushCSSText(".#<uispace>{position:absolute;background:#fff;}");_p._$$Card=NEJ.C();_pro=_p._$$Card._$extend(_p._$$Layer);_pro.__reset=function(_options){this.__supReset(_options);this.__doInitDomEvent([[document,"click",this.__onDocClick._$bind(this)]]);this.__nostop=!!_options.nostop;this.__position={top:_options.top,left:_options.left}};_pro.__destroy=function(){delete this.__pbox;delete this.__fbox;delete this.__align;delete this.__fitable;delete this.__byPoint;delete this.__position;this.__supDestroy()};_pro.__initXGui=function(){this.__seed_css=_seed_css};_pro.__initNode=function(){this.__supInitNode();this.__ncnt=this.__body;_v._$addEvent(this.__body,"click",this.__doCheckStop._$bind(this))};_pro.__onDocClick=function(_event){if(_event.button!=2)this._$hide()};_pro.__doCheckStop=function(_event){if(this.__nostop)return;_v._$stopBubble(_event);var _element=_v._$getElement(_event);if(_element.tagName=="A")_v._$stopDefault(_event)};_pro.__setAlign=function(){var _reg=/\s+/i;return function(_align){_align=(_align||"").trim().toLowerCase().split(_reg);_align[0]=_align[0]||"bottom";_align[1]=_align[1]||"left";this.__align=_align}}();_pro.__doCalPosition=function(_align){var _result={},_fbox=this.__fbox,_pbox=_e._$getPageBox(),_width=this.__body.offsetWidth,_height=this.__body.offsetHeight;switch(_align[0]){case"top":_result.top=_fbox.top-_height;_result.left=_align[1]=="right"?_fbox.left+_fbox.width-_width:_fbox.left;break;case"left":_result.left=_fbox.left-_width;_result.top=_align[1]=="bottom"?_fbox.top+_fbox.height-_height:_fbox.top;break;case"right":_result.left=_fbox.left+_fbox.width;_result.top=_align[1]=="bottom"?_fbox.top+_fbox.height-_height:_fbox.top;break;default:_result.top=_fbox.top+_fbox.height;_result.left=_align[1]=="right"?_fbox.left+_fbox.width-_width:_fbox.left;break}return _result};_pro.__doPositionAlign=function(){if(!this.__fitable){this._$setPosition(this.__position);return}if(!!this.__byPoint){this._$setPosition(this.__pbox);return}if(!!this.__fbox)this._$setPosition(this.__doCalPosition(this.__align))};_pro.__doFindPosition=function(_element,_delta,_event){_delta=_delta||_o;var _pageBox=_e._$getPageBox(),_x=_v._$pageX(_event)+(_delta.left||0),_y=_v._$pageY(_event)+(_delta.top||0),_width=_element.offsetWidth+(_delta.right||0),_height=_element.offsetHeight+(_delta.bottom||0),_pageWidth=_pageBox.scrollWidth,_pageHeight=_pageBox.scrollHeight,_temp0=_x+_width,_temp1=_y+_height;switch(this.__align[0]){case"top":_y=_temp1>_pageHeight?_y-_height:_y;if(this.__align[1]=="right"){_x=_x-_width<0?0:_x-_width}else{_x=_temp0>_pageWidth?_pageWidth-_width:_x}break;case"left":_x=_temp0>_pageWidth?_pageWidth-_width:_x;if(this.__align[1]=="top"){_y=_temp1>_pageHeight?_y-_height:_y}else{_y=_y-_height<0?_y:_y-_height}break;case"right":_x=_x-_width<0?0:_x-_width;if(this.__align[1]=="top"){_y=_temp1>_pageHeight?_y-_height:_y}else{_y=_y-_height<0?_y:_y-_height}break;default:_y=_y-_height<0?_y:_y-_height;if(this.__align[1]=="left"){_x=_temp0>_pageWidth?_pageWidth-_width:_x}else{_x=_x-_width<0?0:_x-_width}break}return{top:_y,left:_x}};_pro._$showByReference=function(){var _doCalTargetBox=function(_element,_delta){_element=_e._$get(_element);if(!_element)return;_delta=_delta||_o;var _offset=_e._$offset(_element);return{top:_offset.y-(_delta.top||0),left:_offset.x-(_delta.left||0),width:_element.offsetWidth+(_delta.right||0),height:_element.offsetHeight+(_delta.bottom||0)}};return function(_options){_options=_options||_o;this.__byPoint=_options.event;this.__setAlign(_options.align);if(!!this.__byPoint)this.__pbox=this.__doFindPosition(_options.target,_options.delta,this.__byPoint);this.__fbox=_doCalTargetBox(_options.target,_options.delta);this.__fitable=!!_options.fitable;this._$show();return this}}()})();
(function(){var _=NEJ.P,_o=NEJ.O,_e=_("nej.e"),_v=_("nej.v"),_u=_("nej.u"),_p=_("nej.ui"),_pro,_sup;if(!!_p._$$CardWrapper)return;_p._$$CardWrapper=NEJ.C();_pro=_p._$$CardWrapper._$extend(_p._$$LayerWrapper);_sup=_p._$$CardWrapper._$supro;_p._$$CardWrapper._$attach=function(){var _doShowCard=function(_event,_id,_class,_copt,_sopt){var _instance,_key=_id+"-i",_cache=_class.__cdpol,_noclear=!!_copt.noclear,_toggled=!!_copt.toggled;if(_u._$isFunction(_copt.onbeforeclick)){var _oldc=_copt.noclear,_oldt=_copt.toggled;try{_copt.onbeforeclick(_copt)}catch(e){}_noclear=!!_copt.noclear;_toggled=!!_copt.toggled;_copt.toggled=_oldt;_copt.noclear=_oldc}var _inst=_cache[_key];if(_toggled&&!!_inst){_inst._$hide();return}_v._$stop(_event);if(!_noclear){_v._$dispatchEvent(document,"click");_instance=_class._$allocate(_copt)}else{_instance=_class._$getInstanceWithReset(_copt,!0)}_cache[_key]=_instance;_instance._$setEvent("onbeforerecycle",function(){delete _cache[_key]});_instance._$showByReference(_sopt)};return function(_node,_options){_node=_e._$get(_node);if(!_node)return this;if(!this.__cdpol)this.__cdpol={};var _id=_e._$id(_node);if(!!this.__cdpol[_id])return this;_options=NEJ.X({},_options);var _sopt=NEJ.EX({align:"",delta:null,fitable:!1},_options);_sopt.target=_id;_options.destroyable=!0;if(!_options.fixed){_sopt.fitable=!0;_options.parent=document.body}this.__cdpol[_id]=[_id,_options.event||"click",_doShowCard._$bind2(null,_id,this,_options,_sopt)];_v._$addEvent.apply(_v,this.__cdpol[_id]);return this}}();_p._$$CardWrapper._$detach=function(_node){if(!this.__cdpol)return this;var _id=_e._$id(_node),_event=this.__cdpol[_id];if(!_event)return this;delete this.__cdpol[_id];_v._$delEvent.apply(_v,_event);var _instance=this.__cdpol[_id+"-i"];if(!!_instance)_instance._$hide();return this};_pro.__getLayerInstance=function(){return _p._$$Card._$allocate(this.__lopt)};_pro.__doInitLayerOptions=function(){_sup.__doInitLayerOptions.apply(this,arguments);this.__lopt.top=null;this.__lopt.left=null;this.__lopt.nostop=!1};_pro._$showByReference=function(_options){if(!!this.__layer)this.__layer._$showByReference(_options);return this}})();
(function(){var using=NEJ.P;var o=NEJ.O;var e=using("nej.e");var i=using("nej.ui");var u=using("nej.u");var v=using("nej.v");var dw=using("dd.widget");var du=using("dd.util");var dc=using("dd.const");var proto;dw._$$Emot=NEJ.C();proto=dw._$$Emot._$extend(i._$$CardWrapper);proto.__reset=function(options){options.parent=document.body;options.destroyable=true;this.__autoHide=options.autoHide!=false?true:false;options.clazz="m-emot";options.align=options.align||"top left";this.__supReset(options)};proto.__initXGui=function(){this.__seed_html="card-emot"};proto.__initNode=function(){this.__supInitNode();var wrap=du.get("wrap",this.__body);e._$renderHtmlTemplate(wrap,"card-emot-item",{emot:dc.EMOTS});v._$addEvent(this.__body,"click",this.__onItemClick._$bind(this));v._$addEvent(document.body,"click",function(){this.__destroy()}._$bind(this))};proto.__onItemClick=function(event){var ele=v._$getElement(event);var tagname=ele.tagName.toLowerCase();if(tagname=="img"){this._$dispatchEvent("select",ele.title);if(this.__autoHide){this.__destroy()}}}})();
(function(){var using=NEJ.P;var u=using("nej.u");var j=using("nej.j");var t=using("nej.ut");var v=using("nej.v");var dd=using("dd.data");var proto;dd._$$MassCache=NEJ.C();proto=dd._$$MassCache._$extend(dd._$$Cache);proto.__doLoadList=function(options){var key=options.key;var callback=options.onload;var data=options.data;j._$requestByREST("/rest/masses",{method:"GET",type:"json",data:data,onload:this.__cbLoadList._$bind(this,key,callback)})};proto.__cbLoadList=function(key,callback,json){var result=json&&json.result;var list=result&&result.list;var state=["已发送",,"失败",,,,"发送中"];if(list&&list.length){for(var i=0,length=list.length;i<length;i++){list[i].createTimeStr=u._$format(list[i].createTime,"yyyy/M/d");list[i].createTimeStr+="\n"+u._$format(list[i].createTime,"HH:mm:ss");list[i].stateStr=state[list[i].state]}}callback(result)};proto._$getGroup=function(param){j._$requestByREST("/rest/contacts/groups",{method:"GET",type:"json",onload:this._$dispatchEvent._$bind(this,"groupload")})};proto._$getCard=function(param){j._$requestByREST("/rest/getcard",{method:"GET",type:"json",data:param,onload:this._$dispatchEvent._$bind(this,"cardload")})};proto._$add=function(param){j._$requestByREST("/rest/masses",{method:"PUT",type:"json",data:param,onload:this._$dispatchEvent._$bind(this,"add")})};proto._$resend=function(data){var param={};param.massId=data.id;j._$requestByREST("/rest/masses",{method:"PUT",type:"json",data:param,onload:this._$dispatchEvent._$bind(this,"resend")})};proto._$sendSms=function(obj){j._$requestByREST("/rest/sms",{method:"POST",type:"json",data:obj,onload:this._$dispatchEvent._$bind(this,"smsload")})};proto._$verify=function(param){j._$requestByREST("/rest/masses/verify",{method:"POST",type:"json",data:param,onload:this._$dispatchEvent._$bind(this,"verifyload")})}})();
(function(){var using=NEJ.P,o=NEJ.O,e=using("nej.e"),u=using("nej.u"),v=using("nej.v"),i=using("nej.ui"),dd=using("dd.data"),du=using("dd.util"),dw=using("dd.widget"),di=using("dd.ui"),proto;dw._$$MessageSender=NEJ.C();proto=dw._$$MessageSender._$extend(i._$$Abstract);proto.__initXGui=function(){this.__seed_html="ntp-msgsender"};proto.__initNode=function(){this.__supInitNode();var ntmp=e._$getByClassName(this.__body,"j-ztag"),btns=e._$getByClassName(this.__body,"j-btn");this.__moreBtn=du.get("more",this.__body);this.__nTab=ntmp[0];this.__nWrap=ntmp[1];this.__nEmotion=ntmp[2];this.__nTip=ntmp[3];this.__nWord=ntmp[4];this.__nTxtarea=ntmp[5];this.__textArea=ntmp[6];this.__nMediaarea=ntmp[7];this.__testBtn=btns[0];this.__isendBtn=btns[1];this.__sendBtn=btns[2];this.__onClickTabProxy=this.__onClickTab._$bind(this);this.__massCache=dd._$$MassCache._$allocate();this.__massCache._$addEvent("cardload",this.__onCardLoad._$bind(this));v._$addEvent(this.__moreBtn,"click",this.__onClickMore._$bind(this))};proto.__reset=function(_options){_options=_options||o;if(!du.isAuthen()){du.$("li.lottery",this.__body)._$style("display","none");this.__moreBtn.style.display="none"}this.__type=_options.type||-1;this.__limit=_options.limit||600;this.__crtIndex=0;if(_options.btnname){this.__sendBtn.innerHTML=_options.btnname}if(!_options.cardTag){e._$getChildren(this.__nTab)[6].style.display="none"}if(_options.noLotteryTag){e._$getChildren(this.__nTab)[7].style.display="none"}if(!_options.showToggle){this.__moreBtn.style.display="none"}this.__supReset(_options);this.__bindEvent();this.__bindTab()};proto.__initState=function(){this.__nTip.innerText="还可以输入";this.__nWord.innerText=this.__limit;this.__textArea.value="";this.__nMediaarea.innerHTML="";this.__msg={};this.__msgData={};this._$goTab(0)};proto._$refresh=function(num){if(this.__materialItem){this.__materialItem._$recycle();delete this.__materialItem}this.__initState();if(num==0){this.__detachEvent()}};proto._$showTabs=function(index){var lis=e._$getChildren(this.__nTab);for(var i=0,l=lis.length;i<l;i++){lis[i].style.display="none"}lis[index].style.display=""};proto._$showAllTabs=function(){var lis=e._$getChildren(this.__nTab);for(var i=0,l=lis.length;i<l;i++){lis[i].style.display=""}};proto._$setMsg=function(data){var type=data.type;this.__msg={};if(this.__materialItem){this.__materialItem._$recycle();delete this.__materialItem}switch(type){case 0:{this._$goTab(0);this.__textArea.value=data.article;v._$dispatchEvent(this.__textArea,"keyup");this.__msg.text=data.article;this.__msgData.data={type:0,article:data.article}}break;case 101:{this._$goTab(4);this.__materialItem=di._$$ImageTextItem._$allocate({parent:this.__nMediaarea,data:data});this.__msg.mid=data.mid;this.__msgData.data=data}break;case 1e3:{this._$goTab(5);this.__materialItem=di._$$ActivityItem._$allocate({parent:this.__nMediaarea,data:data});this.__msg.mid=data.mid;this.__msgData.data=data}break;case 2e3:{this._$goTab(6);this.__materialItem=di._$$LotteryItem._$allocate({parent:this.__nMediaarea,data:data});this.__msg.mid=data.mid;this.__msgData.data=data};default:{this._$goTab(type);this.__materialItem=di._$$MaterialItem1._$allocate({parent:this.__nMediaarea,readonly:true,data:data});this.__msg.mid=data.mid;this.__msgData.data=data}}};proto._$getMsg=function(){return this.__msgData};proto.__bindEvent=function(){v._$addEvent(this.__textArea,"keyup",this.__onTextChange._$bind(this));dw._$$Emot._$attach(this.__nEmotion,{destroyable:true,select:this.__onEmotionClick._$bind(this),onbeforeclick:function(){this.__pos=e._$cursor(this.__textArea)}._$bind(this)});if(this.__type==1){v._$addEvent(this.__testBtn,"click",this.__onTestSendClick._$bind(this));v._$addEvent(this.__isendBtn,"click",this.__onImmedSendClick._$bind(this))}else if(this.__type==2){v._$addEvent(this.__sendBtn,"click",this.__onSendClick._$bind(this))}else{e._$addClassName(this.__isendBtn,"z-dis");v._$addEvent(this.__testBtn,"click",this.__onTestSendClick._$bind(this))}};proto.__detachEvent=function(){if(this.__type==1){e._$addClassName(this.__isendBtn,"z-dis");v._$clearEvent(this.__isendBtn)}};proto.__bindTab=function(){v._$clearEvent(this.__nTab);this.__crtTab=e._$getChildren(this.__nTab)[0];e._$addClassName(this.__crtTab,"z-crt");this.__crtIndex=0;v._$addEvent(this.__nTab,"click",this.__onClickTabProxy)};proto.__onClickMore=function(event){v._$stopDefault(event);var node=v._$getElement(event).parentNode;if(e._$hasClassName(node,"z-showmore")){e._$delClassName(node,"z-showmore")}else{e._$addClassName(node,"z-showmore")}};proto.__onClickTab=function(event){v._$stopDefault(event);var node=v._$getElement(event);var tag=node.tagName.toLowerCase();if(tag=="b"||tag=="a"){if(tag=="b"){node=node.parentNode}this.__lastIndex=this.__crtIndex;this.__crtIndex=parseInt(e._$attr(node,"data-index"));if(this.__crtIndex==6){this.__showCardWin()}else if(this.__crtIndex==0){this._$goTab(0)}else{this.__showMaterial()}}};proto.__showCardWin=function(){this.__cardWin=dw._$$Prompt._$allocate({title:"发送名片",caption:"请输入易信号",nocancel:true,enterDisable:true,onconfirm:this.__onConfirmCard._$bind(this)});this.__cardWin._$show()};proto.__onConfirmCard=function(val){var len=u._$length(val);if(len>20||len<4||!/^\w+$/.test(val)){this.__cardWin._$enableBtn();this.__cardWin._$showTip("易信号应该为4~20位字母或数字")}else{this.__massCache._$getCard({accountName:val})}};proto.__onCardLoad=function(data){this.__cardWin._$enableBtn();if(data.code==200){var obj=data.result;if(this.__materialItem){this.__materialItem=this.__materialItem._$recycle()}if(this.__cardItem){this.__cardItem=this.__cardItem._$recycle()}this.__cardItem=dw._$$Card._$allocate({data:obj,parent:this.__nMediaarea});this.__cardWin._$hide();this._$goTab(6);this.__msg.yid=obj.yid;this.__msgData.data=data}else{if(!!data.message){this.__cardWin._$showTip(data.message)}else{this.__cardWin._$hide();du.showError("获取名片信息错误，请稍后再试！")}}};proto._$goTab=function(index){var tabindex=index;e._$delClassName(this.__crtTab,"z-crt");this.__crtTab=e._$getChildren(this.__nTab)[tabindex];e._$addClassName(this.__crtTab,"z-crt");this.__crtIndex=tabindex;this.__showTabDetail(tabindex)};proto.__showMaterial=function(){var crtTab=e._$getChildren(this.__nTab)[this.__crtIndex];var id=parseInt(e._$dataset(crtTab,"id"));dw._$$SelectMaterial._$allocate({type:id,title:"选择",destroyable:true,clazz:"m-layer-sm",confirm:this.__onConfirmMaterial._$bind(this),oncancel:this.__onCancelMaterial._$bind(this),onclose:this.__onCancelMaterial._$bind(this)})._$show()};proto.__showTabDetail=function(tabindex){if(tabindex!=0){this.__nWrap.style.display="none";this.__textArea.style.display="none";this.__nMediaarea.style.display="block"}else{this.__nWrap.style.display="block";this.__textArea.style.display="block";this.__nMediaarea.style.display="none"}};proto.__onConfirmMaterial=function(data){if(!!data){this._$goTab(this.__crtIndex);if(this.__materialItem){this.__materialItem._$recycle();delete this.__materialItem}if(this.__cardItem){this.__cardItem=this.__cardItem._$recycle()}switch(data.type){case 101:this.__materialItem=di._$$ImageTextItem._$allocate({parent:this.__nMediaarea,data:data});break;case 1e3:this.__materialItem=di._$$ActivityItem._$allocate({parent:this.__nMediaarea,data:data});break;case 2e3:this.__materialItem=di._$$LotteryItem._$allocate({parent:this.__nMediaarea,data:data});break;default:this.__materialItem=di._$$MaterialItem1._$allocate({parent:this.__nMediaarea,readonly:true,data:data})}this.__msg.mid=data.mid;this.__msgData.data=data}else{this._$goTab(this.__lastIndex)}};proto.__onCancelMaterial=function(event){this._$goTab(this.__lastIndex)};proto.__onTextChange=function(event){if(this.__type==2){if(event.keyCode==13&&event.ctrlKey){this.__onSendClick(event);return}}var str=this.__textArea.value.trim();str=str.replace(/\n/g,"");var num=this.__limit-str.length;if(num>=0){this.__nTip.innerText="还可以输入";e._$delClassName(this.__nWord,"u-err")}else{this.__nTip.innerText="已超出";e._$addClassName(this.__nWord,"u-err");num=-num}this.__nWord.innerText=num};proto.__onEmotionClick=function(data){var emot="/"+data;var pos=this.__pos.start;var val=this.__textArea.value;this.__textArea.value=val.substr(0,pos)+emot+val.substr(pos,val.length);v._$dispatchEvent(this.__textArea,"keyup");e._$cursor(this.__textArea,pos+emot.length)};proto.__onTestSendClick=function(event){v._$stopDefault(event);this.__onCheckData("ontestsend")};proto.__onImmedSendClick=function(event){v._$stopDefault(event);if(e._$hasClassName(this.__isendBtn,"z-dis")){return}this.__onCheckData("onimmedsend",this.__isendBtn)};proto.__onSendClick=function(event){v._$stopDefault(event);if(e._$hasClassName(this.__sendBtn,"z-dis")){return}this.__onCheckData("onsend",this.__sendBtn)};proto.__onCheckData=function(eventname,node){if(this.__crtIndex==0){var text=this.__textArea.value.trim();text=text.replace(/\n/g,"");var length=text.length;if(0<length&&length<=this.__limit){this.__msg.text=this.__textArea.value.trim();this.__msgData.data={type:0,article:this.__msg.text}}else{du.showHint("文字必须为1到"+this.__limit+"个字符！");this.__textArea.focus();return}this.__msg.mid=null;this.__msg.yid=null}else if(this.__crtIndex==6){this.__msg.mid=null;this.__msg.text=null}else{this.__msg.text=null;this.__msg.yid=null}this._$dispatchEvent(eventname,this.__msg);e._$addClassName(node,"z-dis")};proto._$enableBtn=function(){e._$delClassName(this.__sendBtn,"z-dis");e._$delClassName(this.__isendBtn,"z-dis")};proto.__destroy=function(){this.__supDestroy();if(this.__materialItem){this.__materialItem._$recycle();delete this.__materialItem}if(this.__cardItem){this.__cardItem=this.__cardItem._$recycle()}this._$enableBtn();e._$delClassName(this.__crtTab,"z-crt");v._$delEvent(this.__nTab,"click",this.__onClickTabProxy);v._$clearEvent(this.__sendBtn,"click");this.__textArea.value="";this.__nMediaarea.innerHTML="";this._$showAllTabs();delete this.__type;delete this.__limit;delete this.__crtIndex;delete this.__crtTab;delete this.__msgData}})();
(function(){var using=NEJ.P,e=using("nej.e"),v=using("nej.v"),i=using("nej.ui"),du=using("dd.util"),dw=using("dd.widget"),di=using("dd.ui"),proto;dw._$$MsgSenderLayer=NEJ.C();proto=dw._$$MsgSenderLayer._$extend(i._$$Layer);supro=dw._$$MsgSenderLayer._$supro;proto.__initXGui=function(){this.__seed_html="window-msgsenderlayer"};proto.__initNode=function(){this.__supInitNode();this.__msgBox=du.get("msgLayer",this.__body);this.__close=du.get("close",this.__body);this.__quit=du.get("quit",this.__body)};proto.__reset=function(options){this.__supReset(options);this.__msgData=options.data||null;this.__doInitDomEvent([[this.__close,"click",this.__onCloseClick._$bind(this)],[this.__quit,"click",this.__onCloseClick._$bind(this)]]);this.__msgSender=dw._$$MessageSender._$allocate({parent:this.__msgBox,type:2,clazz:"m-msgbox-1",limit:300,btnname:"添　加",onsend:this.__onAddClick._$bind(this)});this.__msgSender._$refresh();if(this.__msgData){this.__msgSender._$setMsg(this.__msgData);this.__msgSender._$showTabs(0)}};proto._$setData=function(data){if(data){this.__msgSender._$setMsg(data)}};proto.__onAddClick=function(){var obj=this.__msgSender._$getMsg();this._$dispatchEvent("onAddReply",obj)};proto.__onCloseClick=function(event){v._$stopDefault(event);this._$close()};proto._$show=function(){supro._$show.apply(this,arguments);setTimeout(function(){e._$addClassName(this.__body,"z-show")}._$bind(this),1)};proto._$close=function(){e._$delClassName(this.__body,"z-show");setTimeout(function(){this._$hide()}._$bind(this),500)};proto.__destroy=function(){this.__supDestroy();if(this.__msgSender){this.__msgSender=this.__msgSender._$recycle()}delete this.__msgData}})();
(function(){var using=NEJ.P;var f=NEJ.F;var i=using("nej.ui");var dw=using("dd.widget");var o=NEJ.O;var v=using("nej.v");var du=using("dd.util");var dc=using("dd.const");var proto;dw._$$Alert=NEJ.C();proto=dw._$$Alert._$extend(dw._$$Window);proto.__initXGui=function(){this.__seed_html="window-alert"};proto.__initNode=function(){this.__supInitNode();this.__message=du.get("message",this.__body);this.__tipwrap=du.get("tipwrap",this.__body);this.__sel=du.get("sel",this.__body);this.__lab=du.get("lab",this.__body)};proto.__reset=function(options){options.message=options.message||"提示信息";options.btnname=options.btnname||"确 认";this.__supReset(options);this.__message.innerHTML=options.message;this.__confirmNode.innerText=options.btnname;this.__tipwrap.style.display=options.hasTipsel?"":"none";this.__hasTipsel=options.hasTipsel;this.__cancelNode.style.display=options.hasCancel?"":"none"};proto.__onClickConfirm=function(evt){var checked=false;if(this.__hasTipsel){checked=this.__sel.checked}this._$dispatchEvent("confirm",checked)};proto._$show=function(){dw._$$Alert._$supro._$show.apply(this,arguments);return this};du.showAlert=function(options){return dw._$$Alert._$allocate(options)._$show()};proto.__destroy=function(){this.__supDestroy();this.__sel.checked=false}})();
(function(){var using=NEJ.P,o=NEJ.O,e=using("nej.e"),u=using("nej.u"),v=using("nej.v"),j=using("nej.j"),i=using("nej.ui"),di=using("dd.ui"),du=using("dd.util"),dw=using("dd.widget"),proto;dw._$$ReplySetter=NEJ.C();proto=dw._$$ReplySetter._$extend(i._$$Abstract);proto.__initXGui=function(){this.__seed_html="ntp-reply"};proto.__initNode=function(){this.__supInitNode();this.__selAll=du.get("checkall",this.__body);this.__selLab=du.get("checklab",this.__body);this.__replyBox=du.get("replybox",this.__body);this.__msgBox=du.get("msgbox",this.__body);this.__addReply=du.get("addbtn",this.__body);this.__save=du.get("savebtn",this.__body)};proto.__reset=function(_options){var evts=[];_options=_options||o;this.__replyLimit=_options.replylimit||5;this.__minLimit=_options.minLimit==0?0:1;this.__supReset(_options);if(!!_options.selLab){this.__selLab.innerHTML=_options.selLab}if(!_options.hasSave){e._$remove(this.__save.parentNode)}else{evts.push([this.__save,"click",this.__saveClick._$bind(this)])}if(!!_options.showTipTag){evts.push([this.__selAll,"click",this.__selectAllClick._$bind(this,_options.showTipTag)])}evts.push([this.__addReply,"click",this.__addReplyClick._$bind(this)]);this.__doInitDomEvent(evts)};proto._$setReply=function(data){if(data){this.__selAll.checked=data.isAllReply?true:false;var replyInfo=JSON.parse(data.replyList);var replys=replyInfo.replyMessageList;for(var j=0,l=replys.length;j<l;j++){var obj=JSON.parse(replys[j].contentInfo);this.__addReplyItem(obj)}}};proto.__addReplyClick=function(event){v._$stopDefault(event);this.__editReplyTag=false;if(this.__checkLimit(this.__replyBox,this.__replyLimit)){du.showError("最多"+this.__replyLimit+"个回复");return}this.__showMsgLayer();this._$hideDirect()};proto.__checkLimit=function(node,limit){var linode=e._$getChildren(node);return linode.length<limit?false:true};proto.__showMsgLayer=function(data){this.__msgLayer=dw._$$MsgSenderLayer._$allocate({parent:this.__msgBox,destroyable:true,data:data||null,clazz:"n-layer",onAddReply:this.__onAddReply._$bind(this)});this.__msgLayer._$show()};proto.__onAddReply=function(data){var obj=data.data;if(obj){this.__addReplyItem(obj);this.__msgLayer._$close()}};proto.__addReplyItem=function(data){if(this.__editReplyTag==true){e._$dataset(this.__crtEditReply,"value",data.article);this.__crtEditReply.innerHTML=du.toEmot(data.article);return}var replyitem=di._$$KeywordItem._$allocate({parent:this.__replyBox,data:data});if(data.type==0){replyitem._$addEvent("oneditreply",this.__onEditReply._$bind(this))}};proto.__onEditReply=function(event){var node=v._$getElement(event).parentNode.parentNode;this.__crtEditReply=du.get("mtitle",node);var val=e._$dataset(this.__crtEditReply,"value");var data={};data.type=0;data.article=val;this.__editReplyTag=true;this.__showMsgLayer(data)};proto.__saveClick=function(event){if(e._$hasClassName(this.__save,"z-dis")){return}this._$hideDirect();var data=this._$getReply();if(this.__minLimit==1){if(data.replyList.length==0){du.showHint("请至少输入一条回复");return}}e._$addClassName(this.__save,"z-dis");this._$dispatchEvent("onsave",data)};proto._$getReply=function(){var data={};data.isAllReply=!!this.__selAll.checked;data.replyList=this.__getRuleList();return data};proto.__getRuleList=function(){var list=[];var nodes=e._$getChildren(this.__replyBox);for(var i=0,l=nodes.length;i<l;i++){var obj={};var linode=nodes[i];var title=du.get("mtitle",linode);var type=parseInt(e._$attr(title,"data-type"));if(type==0){obj.message=e._$dataset(title,"value")}else{obj.materialId=parseInt(e._$attr(du.get("reply",linode),"data-mid"))}list.push(obj)}return list};proto.__selectAllClick=function(tag,event){var msg="";if(tag==1){if(j._$cookie("replySelAllTips")==1)return;msg='<p class="tipitm">勾选“发送全部内容”，则将已设置的所有回复一次性全发送；</p> <p class="tipitm">若不勾选“发送全部内容”，则随机从设置的回复里挑选一条发送。</p>'}else if(tag==2){if(j._$cookie("ruleSelAllTips")==1)return;msg='<p class="tipitm">勾选“发送全部内容”，则用户在输入关键字时，将已设置的所有回复一次性全发送；</p> <p class="tipitm">若不勾选“发送全部内容”，则用户在输入关键字时，随机从设置的回复里挑选一条发送。</p>'}this.__tipWin=dw._$$Alert._$allocate({message:msg,btnname:"确 定",destroyable:true,hasTipsel:true,clazz:"m-tipWin",onconfirm:this.__onConfirmTip._$bind(this,tag)});this.__tipWin._$show()};proto.__onConfirmTip=function(tag,checked){if(!!checked){if(tag==1){j._$cookie("replySelAllTips",{value:1,expires:100})}else if(tag==2){j._$cookie("ruleSelAllTips",{value:1,expires:100})}}this.__tipWin._$hide()};proto._$enableBtn=function(){e._$delClassName(this.__save,"z-dis")};proto._$showDirect=function(){e._$addClassName(this.__body,"z-direct")};proto._$hideDirect=function(){e._$delClassName(this.__body,"z-direct")};proto.__destroy=function(){this.__supDestroy();if(this.__msgLayer){this.__msgLayer._$close()}this._$enableBtn();this._$hideDirect();this.__replyBox.innerHTML="";delete this.__editReplyTag;this.__selAll.checked=false}})();
(function(){var _=NEJ.P,_o=NEJ.O,_f=NEJ.F,_e=_("nej.e"),_p=_("nej.ut"),_proModule;if(!!_p._$$Module)return;_p._$$Module=NEJ.C();_proModule=_p._$$Module._$extend(_p._$$Event);_proModule.__init=function(){this.__export={};this.__supInit();this.__doBuild()};_proModule.__reset=function(_options){this.__supReset(_options);this.__umi=_options.umi||"";this.__dispatcher=_options.dispatcher;this.__composites=_options.composite||_o;this._$batEvent({onshow:this.__onShow._$bind(this),onhide:this.__onHide._$bind(this),onrefresh:this.__onRefresh._$bind(this),onmessage:this.__onMessage._$bind(this),onbeforehide:this.__onBeforeHide._$bind(this)})};_proModule.__destroy=function(){delete this.__umi;this.__export={};this.__supDestroy()};_proModule.__stop=function(_event){if(!!_event)_event.stopped=!0};_proModule.__doBuild=_f;_proModule.__onShow=_f;_proModule.__onHide=_f;_proModule.__onRefresh=_f;_proModule.__onMessage=_f;_proModule.__onBeforeHide=_f;_proModule.__doSendMessage=function(_to,_message,_mode){this.__dispatcher._$message({to:_to,mode:_mode||0,data:_message,from:this.__umi})};_proModule.__doPublishMessage=function(_type,_data){this.__dispatcher._$publish(_type,{from:this.__umi,data:_data})};_proModule.__doSubscribeMessage=function(){this.__dispatcher._$subscribe.apply(this.__dispatcher,arguments)};_proModule._$getExportData=function(){return this.__export};_e._$regist=function(){if(!!window.dispatcher){dispatcher._$loaded.apply(dispatcher,arguments)}}})();
(function(){var _=NEJ.P,_f=NEJ.F,_o=NEJ.O,_e=_("nej.e"),_u=_("nej.u"),_p=_("nej.ut"),_proAbstractModule;if(!!_p._$$AbstractModule)return;_p._$$AbstractModule=NEJ.C();_proAbstractModule=_p._$$AbstractModule._$extend(_p._$$Module);_proAbstractModule.__doParseParent=function(_options){var _parent;if(!_parent){var _data=_options.input||_o;_parent=_e._$get(_data.parent)}if(!_parent){var _data=_options.data||_o;_parent=_e._$get(_data.parent)}if(!_parent){_parent=_e._$get(_options.parent)}return _parent};_proAbstractModule.__onShow=function(_options){var _parent=this.__doParseParent(_options);if(!!_parent&&!!this.__body)_parent.appendChild(this.__body);this.__supOnShow(_options);this.__doApplyComposite("onshow",_options);this.__onRefresh(_options)};_proAbstractModule.__onRefresh=function(_options){this.__supOnRefresh(_options);this.__doApplyComposite("onrefresh",_options)};_proAbstractModule.__onHide=function(){this.__supOnHide();this.__doHideComposite();_e._$removeByEC(this.__body)};_proAbstractModule.__isEscapedComposite=function(){var _reg0=/^onshow|onrefresh|delay$/;return function(_umi){return _reg0.test(_umi)}}();_proAbstractModule.__doGenCompositeParam=_f;_proAbstractModule.__doApplyComposite=function(){var _doRedirect=function(_query,_options,_umi,_pid){if(this.__isEscapedComposite(_pid))return;if(!!_query)_umi+=(_umi.indexOf("?")>1?"&":"?")+_query;var _input=this.__doGenCompositeParam(_pid,_options)||{};_input.location=_options;_input.parent=this.__export[_pid];this.__dispatcher._$redirect(_umi,{input:_input})};return function(_type,_options){if(!_options.nodelay){if(!!this.__composites.delay)return;var _composite=this.__composites[_type]||_o;if(_composite.delay)return}var _query=_u._$object2query(_options.param)||"";if(_type=="onrefresh"){_u._$forIn(this.__composites,_doRedirect._$bind(this,_query,_options))}_u._$forIn(_composite,_doRedirect._$bind(this,_query,_options))}}();_proAbstractModule.__doHideComposite=function(){var _doHide=function(_umi,_pid){if(!this.__isEscapedComposite(_pid))this.__dispatcher._$hide(_umi)};return function(){_u._$forIn(this.__composites,_doHide,this);_u._$forIn(this.__composites.onshow,_doHide,this);_u._$forIn(this.__composites.onrefresh,_doHide,this)}}()})();
(function(){var using=NEJ.P;var o=NEJ.O;var e=using("nej.e");var t=using("nej.ut");var m=using("dd.module");var proto;if(!!m._$$Module){return}m._$$Module=NEJ.C();proto=m._$$Module._$extend(t._$$AbstractModule);proto.__doParseUMIFromOpt=function(){var reg0=/\?|#/;var reg1=/^\/m\//i;return function(options){options=(options.input||o).location||options;return options.href.split(reg0)[0].replace(reg1,"/")}}()})();
(function(){var _=NEJ.P,_e=_("nej.e"),_h=_("nej.h");_h.__setPlaceholder=function(_element,_clazz){}})();
(function(){var _=NEJ.P,_f=NEJ.F,_p=_("nej.p"),_e=_("nej.e"),_v=_("nej.v"),_h=_("nej.h");if(_p._$NOT_PATCH.trident)return;_h.__setPlaceholder=function(){var _cache={};var _onFocus=function(_event){var _input=_v._$getElement(_event);_cache[_input.id]=2;if(!!_input.value)return;_e._$setStyle(_e._$wrapInline(_input),"display","none")};var _onBlur=function(_event){var _input=_v._$getElement(_event);_cache[_input.id]=1;if(!!_input.value)return;_e._$setStyle(_e._$wrapInline(_input),"display","")};var _onInput=function(_event){var _input=_v._$getElement(_event);if(_cache[_input.id]==2)return;_e._$setStyle(_e._$wrapInline(_input),"display",!_input.value?"":"none")};var _doWrapInput=function(_input,_clazz){var _id=_e._$id(_input),_label=_e._$wrapInline(_input,{tag:"label",clazz:_clazz});_label.htmlFor=_id;var _text=_e._$attr(_input,"placeholder")||"";_label.innerText=_text=="null"?"":_text;var _height=_input.offsetHeight+"px";_e._$style(_label,{left:0,display:!_input.value?"":"none"})};return _h.__setPlaceholder._$aop(function(_event){_event.stopped=!0;var _args=_event.args,_input=_e._$get(_args[0]);if(_cache[_input.id]!=null)return;_doWrapInput(_input,_args[1]);_cache[_input.id]=1;_v._$addEvent(_input,"blur",_onBlur._$bind(null));_v._$addEvent(_input,"focus",_onFocus._$bind(null));_v._$addEvent(_input,"input",_onInput._$bind(null))})}()})();
(function(){var _=NEJ.P,_h=_("nej.h"),_e=_("nej.e"),_x=_("nej.x");_e._$placeholder=_x._$placeholder=function(_element,_clazz){_h.__setPlaceholder(_element,_e._$dataset(_element,"holder")||_clazz||"js-placeholder");return this};_x.isChange=!0})();
(function(){var using=NEJ.P;var u=using("nej.u");var j=using("nej.j");var i=using("nej.ui");var t=using("nej.ut");var v=using("nej.v");var dd=using("dd.data");var proto;dd._$$FeedsCache=NEJ.C();proto=dd._$$FeedsCache._$extend(dd._$$Cache);proto.__doLoadList=function(options){var key=options.key;var callback=options.onload;var data=options.data;var list=this._$getListInCache(options.key);var last=list[list.length-1];if(last){data.createTime=last.createTime;data.id=last.id}j._$requestByREST("/rest/feeds",{method:"GET",type:"json",data:data,onload:this.__cbLoadList._$bind(this,key,callback)})};proto.__cbLoadList=function(key,callback,json){var result=json&&json.result;var list=result&&result.list;if(list&&list.length){for(var i=0,length=list.length;i<length;i++){var time=list[i].createTime;list[i].createTimeStr=u._$format(time,"yyyy/M/d");list[i].createTimeStr+="\n"+u._$format(time,"HH:mm:ss")}}callback(result)};proto._$add=function(param){j._$requestByREST("/rest/feeds",{method:"PUT",type:"json",data:param,onload:this._$dispatchEvent._$bind(this,"add")})};proto._$delete=function(id){j._$requestByREST("/rest/feeds/"+id,{method:"DELETE",type:"json",onload:this._$dispatchEvent._$bind(this,"delete")})};proto._$getQrContent=function(uid,callback){j._$requestByREST("/wap/rest/feeds/getQrContent",{method:"GET",type:"json",data:{id:uid},onload:callback||this._$dispatchEvent._$bind(this,"getQrContent")})}})();
(function(){var _=NEJ.P,_e=_("nej.e"),_u=_("nej.u"),_p=_("nej.ut"),_proTabView;if(!!_p._$$TabView)return;_p._$$TabView=NEJ.C();_proTabView=_p._$$TabView._$extend(_p._$$Event);_proTabView.__reset=function(){var _doMatchEq=function(_event){_event.matched=_event.source==_event.target};return function(_options){_options.oncheck=_options.oncheck||_doMatchEq;this.__supReset(_options);this.__list=_options.list;this.__name=_options.dataset||"id";this.__selected=_options.selected||"js-selected"}}();_proTabView._$match=function(_value){var _element,_event={target:_value};_u._$forEach(this.__list,function(_node){delete _event.matched;_event.source=_e._$dataset(_node,this.__name);this._$dispatchEvent("oncheck",_event);if(!_event.matched){_e._$delClassName(_node,this.__selected)}else{_element=_node;_e._$addClassName(_node,this.__selected)}},this);return _element}})();
(function(){var using=NEJ.P;var o=NEJ.O;var f=NEJ.F;var e=using("nej.e");var t=using("nej.ut");var v=using("nej.v");var u=using("nej.u");var d=using("dd.data");var dm=using("dd.module");var du=using("dd.util");var types=using("dd.const").TYPES;var proto;if(!!dm._$$CompositeListModule){return}dm._$$CompositeListModule=NEJ.C();proto=dm._$$CompositeListModule._$extend(dm._$$Module);proto.__doBuild=function(){this.__supDoBuild();var context=e._$html2node(e._$getTextTemplate(this.__seed_html));this.__body=context;this.__mopt={limit:20,parent:du.get("list",context),item:{operatable:true},cache:{key:"mid",klass:d._$$MaterialCache},pager:{clazz:"",label:{prev:"<",next:">"},noend:true,parent:du.getAll("page",context)},ondelete:this.__onDelete._$bind(this),onerror:du.showListError,onbeforelistload:du.showListLoading,onemptylist:du.showListMessage._$bind(null,"暂无素材！"),onafterlistload:this.__onAfterListLoad._$bind(this)}};proto.__onRefresh=function(options){this.__supOnRefresh(options);if(this.__listModule){this.__listModule._$recycle()}this.__mopt.cache.lkey=""+this.__typeNum;this.__listModule=t._$$ListModulePG._$allocate(this.__mopt)};proto.__onAfterListLoad=function(){var total=this.__listModule._$getTotal();du.get("count",this.__body).innerText=total===undefined?"?":total;this.__doSendMessage("/?/tab/",{name:"change",id:this.__typeNum,value:total})};proto.__onDelete=function(event){if(window.confirm("确定删除此素材？")){this.__listModule._$delete(event.data)}}})();
(function(){var using=NEJ.P;var u=using("nej.u");var j=using("nej.j");var t=using("nej.ut");var v=using("nej.v");var dd=using("dd.data");var proto;dd._$$AdvancedCache=NEJ.C();proto=dd._$$AdvancedCache._$extend(dd._$$Cache);proto._$getMode=function(){j._$requestByREST("/rest/advanced",{method:"GET",type:"json",onload:this._$dispatchEvent._$bind(this,"modeload")})};proto._$setMode=function(data){j._$requestByREST("/rest/advanced",{method:"POST",data:data,onload:this._$dispatchEvent._$bind(this,"setModeLoad")})};proto._$setDeveloper=function(data){j._$requestByREST("/rest/advanced/developer",{method:"POST",data:data,onload:this._$dispatchEvent._$bind(this,"setDeveloperLoad")})};proto._$setTestAccount=function(data){var evt=data&&data.url?"modifyTestUrl":"setTestLoad";j._$requestByREST("/rest/testAccount",{method:"POST",data:data,onload:this._$dispatchEvent._$bind(this,evt)})};proto._$applyApi=function(data){j._$requestByREST(data.url,{method:"POST",data:data.param,onload:this._$dispatchEvent._$bind(this,"applyapiload")})}})();
(function(){var using=NEJ.P,e=using("nej.e"),u=using("nej.u"),v=using("nej.v"),m=using("dd.module"),du=using("dd.util"),dd=using("dd.data"),dw=using("dd.widget");dc=using("dd.customer");dc.page={_$init:function(){var content=e._$get("applybox");this.__stepTabs=e._$getChildren(du.get("steptab",content));this.__steps=e._$getChildren(du.get("stepbox",content));this.__agreeBtn=du.get("agree",content);this.__gobackBtn=du.get("goback",content);this.__applyBtn=du.get("apply",content);this.__crtTab=this.__stepTabs[0];this.__crtStep=this.__steps[0];this.__table=e._$get("apitable");this.__resultTable=e._$get("applyResultBox");v._$addEvent(this.__agreeBtn,"click",this.__goStepByIndex._$bind(this,1));v._$addEvent(this.__gobackBtn,"click",this.__goStepByIndex._$bind(this,0));v._$addEvent(this.__applyBtn,"click",this.__onClickApply._$bind(this));v._$addEvent(this.__table,"click",this.__onClickTable._$bind(this));this.__advancedCache=dd._$$AdvancedCache._$allocate();this.__advancedCache._$addEvent("applyapiload",this.__onApplyLoad._$bind(this))},__goStepByIndex:function(stepindex,event){v._$stopDefault(event);var gotab=stepindex||0;e._$delClassName(this.__crtTab,"z-cur");this.__crtTab=this.__stepTabs[gotab];e._$addClassName(this.__crtTab,"z-cur");e._$addClassName(this.__crtStep,"f-dn");this.__crtStep=this.__steps[gotab];e._$delClassName(this.__crtStep,"f-dn");if(gotab>0){for(var i=gotab-1;i>=0;i--){e._$addClassName(this.__stepTabs[i],"z-clicked")}}else if(gotab==0){e._$delClassName(this.__stepTabs[0],"z-clicked")}},__onClickApply:function(event){v._$stopDefault(event);if(e._$hasClassName(this.__applyBtn,"z-dis"))return;this.__appliedApis=[];var checklist=this.__table.getElementsByTagName("input");var appliedApi=[];if(checklist.length>0){for(var i=0,l=checklist.length;i<l;i++){if(checklist[i].checked){var node=checklist[i];var apiname=e._$dataset(node,"apiname");var trnode=node.parentNode.parentNode;var txtarea=trnode.getElementsByTagName("textarea")[0];var apindesc=trnode.getElementsByTagName("a")[0];var applyreason=txtarea.value.trim();var len=u._$length(applyreason);if(len>0&&len<=400){appliedApi.push({apiName:apiname,apiUseScene:applyreason});this.__appliedApis.push({apiDesc:u._$escape(apindesc.innerText),apiUrl:e._$attr(apindesc,"href")})}else{du.showHint("申请理由不能为空且不超过200个汉字");return}}}}else{du.showHint("接口已全部开通，暂无新接口");return}if(appliedApi.length>=1){var data={};data.url="/rest/"+window.apiType;data.param=appliedApi;this.__advancedCache._$applyApi(data)}else{du.showHint("请勾选要申请的接口");return}e._$addClassName(this.__applyBtn,"z-dis")},__onApplyLoad:function(data){e._$delClassName(this.__applyBtn,"z-dis");if(data.code==200){this.__goStepByIndex(2);this.__setResultTable()}else{du.showError(data.message||"服务器错误，请稍后再试！")}},__setResultTable:function(){var len=this.__appliedApis.length;this.__resultTable.innerHTML="";var tmp=e._$addHtmlTemplate('<table class="m-table"><thead><tr><th class="colg">接口类型</th><th class="colc">接口描述</th><th class="colh">状态</th></tr></thead><tbody><tr><th rowspan=${len}>${apiname}</th>{if appliedApis&&appliedApis.length}{list appliedApis as item}<td class="colc"><a target="_blank" class="s-fc5" title="点击查看接口详情" href="${item.apiUrl}">${item.apiDesc}</a></td><td class="colb"><b class="u-icn state1" title="审核中"></b><span class="stt">审核中</span></td></tr>{if item_index < item_length-1}<tr>{/if}{/list}{/if}</tbody></table>');var apiname=window.apiType=="applyAdvancedApi"?"高级接口":"认证接口";var data={len:len,apiname:apiname,appliedApis:this.__appliedApis};e._$renderHtmlTemplate("applyResultBox",tmp,data)},__onClickTable:function(event){var node=v._$getElement(event);var tag=node.tagName.toLowerCase();if(tag=="input"){var trnode=node.parentNode.parentNode;var txtarea=trnode.getElementsByTagName("textarea")[0];var text="请描述在哪种场景下会使用到该接口(不超过200汉字)";var txtwrap=e._$getByClassName(trnode,"j-txtwrap")[0];if(node.checked){txtarea.removeAttribute("readonly");nej.$(txtarea)._$attr("placeholder",text);e._$addClassName(txtwrap,"z-show");e._$addClassName(trnode,"z-checked");e._$placeholder(txtarea,"z-placeholder")}else{e._$attr(txtarea,"readonly","true");e._$delClassName(txtwrap,"z-show");e._$delClassName(trnode,"z-checked");e._$delClassName(txtarea,"z-focus")}return}if(tag=="textarea"){if(!node.readOnly){e._$addClassName(node,"z-focus")}}}}})();
(function(){var _=NEJ.P,_v=_("nej.v"),_u=_("nej.u"),_b=_("nej.p"),_h=_("nej.h"),_t=_("nej.ut"),_reg1=/^[#?]+/,_reg2=/#(.*?)$/,_ctxt=window,_hack=!history.pushState||_b._$IS.android||!history.auto;var _setLocation=function(_url,_replaced){_ctxt.history[!_replaced?"pushState":"replaceState"](null,document.title,_url)};var _getLocation=function(){return location.parse(_ctxt.location.href)};_setLocation=_setLocation._$aop(function(_event){if(!_hack)return;var _args=_event.args;_event.stopped=!0;_url=_args[0].replace(_reg1,"");!_args[1]?_ctxt.location.hash=_url:_ctxt.location.replace("#"+_url)});_getLocation=_getLocation._$aop(function(_event){if(!_hack)return;_event.stopped=!0;var _hash=_reg2.test(_ctxt.location.href)?RegExp.$1:"";_event.value=location.parse(_hash.replace(_reg1,""))});location.redirect=function(_url,_replaced){_setLocation(_url,_replaced);return this};location.active=function(){var _timer,_url,_location,_locked,_done;var _onLocationChange=function(_href){if(!!_locked){_locked=!1;return}var _event={oldValue:_location,newValue:_getLocation()};if(!!location.ignored){location.ignored=!1}else{_v._$dispatchEvent(location,"beforeurlchange",_event);if(_event.stopped){if(!!_location){_locked=!0;_setLocation(_location.href,!0)}return}}_url=_ctxt.location.href;_location=_event.newValue;_v._$dispatchEvent(location,"urlchange",_location);_h.__pushHistory(_location.href)};var _doCheckLocation=function(){if(_url!=_ctxt.location.href)_onLocationChange();_timer=requestAnimationFrame(_doCheckLocation)};return function(_context){if(!!_done)return this;_done=!0;_ctxt=_context||window;if(_hack&&"onhashchange"in window&&_b._$NOT_PATCH.trident2){_v._$addEvent(_ctxt,"hashchange",_onLocationChange);_onLocationChange()}else if(!_timer){_timer=requestAnimationFrame(_doCheckLocation)}return this}}();location.parse=function(){var _reg0=/^https?:\/\/.*?\//i,_reg1=/[?#]/;return function(_url){var _result={href:_url};_url=(_url||"").replace(_reg0,"/").split(_reg1);var _count=1;if(_url[0]=="/"&&(_url[1]||"").indexOf("/")==0)_count=2;_result.path=_url.splice(0,_count).join("?");_result.query=_u._$query2object(_url.join("&"));return _result}}();location.same=function(_url){return _getLocation().href==_url};_t._$$CustomEvent._$allocate({element:location,event:["beforeurlchange","urlchange"]})})();
(function(){var using=NEJ.P;var o=NEJ.O;var e=using("nej.e");var u=using("nej.u");var v=using("nej.v");var i=using("nej.ui");var dw=using("dd.widget");var du=using("dd.util");dw._$$SearchForm=NEJ.C();var proto=dw._$$SearchForm._$extend(i._$$Abstract);var queryObj=u._$query2object(location.search.substr(1));queryObj.keyword=window.requestWord||"";proto.__initXGui=function(){this.__seed_html="ntp-widget-search-form"};proto.__initNode=function(){this.__supInitNode();this.__form=this.__body;var form=this.__form;v._$addEvent(form,"submit",this.__onSubmit._$bind(this))};proto.__reset=function(options){var options=options||o;var action=options.action||"";var placeholder=options.placeholder||"";var select=options.select||{};this.__klass=select.klass||"";this.__name=select.name||"";var klass=this.__klass;var name=this.__name;var form=this.__form;form.action=action;var selects=form.getElementsByTagName("select");u._$forEach(selects,function(item,index,that){if(name&&klass&&e._$hasClassName(item,"j-"+klass)){this.__select=du.get(klass,form)}}._$bind(this));u._$reverseEach(selects,function(item,index,that){if(!name||!klass||!e._$hasClassName(item,"j-"+klass)){e._$remove(item)}}._$bind(this));this.__input=du.get("keyword",form);this.__maxlength=options.maxlength||100;this.__supReset(options);this.__initValue();e._$attr(this.__input,"placeholder",placeholder);e._$placeholder(this.__input)};proto.__onSubmit=function(event){var form=this.__form;if(this.__checker()){form.submit()}};proto.__checker=function(){var input=this.__input;var word=input.value.trim();input.value=word;var len=u._$length(word);var max=this.__maxlength;if(word==""){return false}if(len>max){alert("关键字不能超过"+max+"个字符");this.__input.focus();return false}return true};proto.__initValue=function(){var name=this.__name;var type=queryObj[name];var keyword=queryObj.keyword;var options=this.__select&&this.__select.options;if(options&&type!=undefined&&type!=""){var len=options.length;u._$forEach(options,function(item,index,that){if(options[index].value==type){options[index].selected=true}else{options[index].selected=false}})}if(keyword!=undefined&&keyword!=""){this.__input.value=du.removeTag(keyword)}};proto.__destroy=function(){this.__supDestroy()}})();
(function(){var using=NEJ.P,o=NEJ.O,f=NEJ.F,e=using("nej.e"),v=using("nej.v"),u=using("nej.u"),i=using("nej.ui"),p=using("nej.p"),dc=using("dd.contact"),dd=using("dd.data"),du=using("dd.util"),proto,avatarNode,itemNode;dc._$$ContactItem=NEJ.C();proto=dc._$$ContactItem._$extend(i._$$ListItem);contactCache=dd._$$ContactCache._$allocate();proto.__initXGui=function(){this.__seed_html="contact-list-item"};proto.__initNode=function(){this.__supInitNode();this.__avatar=du.get("avatar",this.__body);this.__iconimg=du.get("iconimg",this.__body);this.__nick=du.get("nick",this.__body);this.__remark=du.get("remark",this.__body);this.__uid=du.get("uid",this.__body);this.__group=du.get("group",this.__body);this.__mdremark=du.get("mdremark",this.__body);this.__iname=du.get("iname",this.__body);this.__iremark=du.get("iremark",this.__body);this.__iarea=du.get("iarea",this.__body);this.__isig=du.get("isig",this.__body);this.__igroup=du.get("igroup",this.__body);this.__links=du.getAll("link",this.__body);v._$addEvent(this.__group,"change",this.__doModifyGroup._$bind(this,this.__group));v._$addEvent(this.__igroup,"change",this.__doModifyGroup._$bind(this,this.__igroup));v._$addEvent(this.__mdremark,"click",this.__doModifyRemark._$bind(this));v._$addEvent(this.__iremark,"click",this.__doModifyRemark._$bind(this));if(p._$KERNEL.browser=="ie"){v._$addEvent(this.__igroup,"click",this.__onClickGroup._$bind(this));v._$addEvent(this.__avatar,"mouseover",this.__onMouseOverAvatar._$bind(this));v._$addEvent(document.body,"click",this.__onClickBody._$bind(this))}};proto.__reset=function(_options){this.__isSearch=_options.isSearch;this.__supReset(_options)};proto.__onClickGroup=function(event){v._$stop(event);e._$addClassName(this.__avatar,"z-hover");e._$addClassName(this.__body,"z-hover");avatarNode=this.__avatar;itemNode=this.__body};proto.__onClickBody=function(event){v._$stopBubble(event);e._$delClassName(this.__avatar,"z-hover");e._$delClassName(this.__body,"z-hover")};proto.__onMouseOverAvatar=function(event){v._$stop(event);if(this.__avatar!=avatarNode){if(avatarNode){du.get("igroup",avatarNode).blur();e._$delClassName(avatarNode,"z-hover")}if(itemNode){e._$delClassName(itemNode,"z-hover")}}};proto.__doModifyRemark=function(){this.__onUpdate("mdRemark")};proto.__doModifyGroup=function(type){this.__onUpdate(type)};proto.__doRefresh=function(data){e._$delClassName(this.__body,"z-hover");var input=this.__body.getElementsByTagName("input")[0];input.id="check-"+data.uid;input.checked=false;this.__iconimg.src=data.userInfo&&data.userInfo.icon?du.transUri(data.userInfo.icon):"/res/default/icon.png";var usernick=data.userInfo&&data.userInfo.nick||"";if(this.__isSearch){usernick=du.textHighlight(usernick,window.requestWord);this.__nick.innerHTML=usernick;this.__iname.innerHTML=usernick}else{this.__nick.innerText=usernick;this.__iname.innerText=usernick}this.__nick.title="查看聊天";this.__iconimg.title="查看聊天";u._$forEach(this.__links,function(item,index,that){item.href="/message/chat?contactId="+data.uid});if(data.remark!=undefined){if(this.__isSearch){this.__remark.innerHTML=data.remark!=""?"备注："+du.textHighlight(data.remark,window.requestWord):"";this.__iremark.innerHTML=data.remark!=""?du.textHighlight(data.remark,window.requestWord):"[添加备注]"}else{this.__remark.innerText=data.remark!=""?"备注："+data.remark:"";this.__iremark.innerText=data.remark!=""?data.remark:"[添加备注]"}}if(window.pid==1){this.__uid.innerText="uid："+data.uid}this.__group.options.length=0;this.__igroup.options.length=0;if(this.__isSearch&&window.contactGroupsList){var groups=window.contactGroupsList;var gid=data.gid;u._$forEach(groups,function(group,index,that){var newOption1=new Option(group.gname,group.gid);var newOption2=new Option(group.gname,group.gid);if(gid&&gid==group.gid){newOption1.selected=true;newOption2.selected=true}this.__group.options.add(newOption1);this.__igroup.options.add(newOption2)}._$bind(this))}this.__iarea.innerText=data.userInfo&&data.userInfo.city||"";this.__isig.innerText=data.userInfo&&data.userInfo.signature||"";e._$dataset(this.__body,"uid",data.uid);e._$dataset(this.__body,"gid",data.gid);e._$dataset(this.__group,"gid",data.gid);e._$dataset(this.__group,"uid",data.uid);e._$dataset(this.__igroup,"gid",data.gid);e._$dataset(this.__igroup,"uid",data.uid);e._$dataset(this.__body,"remark",data.remark);e._$dataset(input,"gid",data.gid);contactCache._$dispatchEvent("groupchange",data)}})();
(function(){var _=NEJ.P,_o=NEJ.O,_e=_("nej.e"),_u=_("nej.u"),_p=_("nej.ut"),_pro;if(!!_p._$$RegionSelector)return;_p._$$RegionSelector=NEJ.C();_pro=_p._$$RegionSelector._$extend(_p._$$Event);_pro.__reset=function(_options){this.__supReset(_options);var _nmap={province:_e._$get(_options.province),city:_e._$get(_options.city),area:_e._$get(_options.area)};this.__selectors=_nmap;this.__offset=_nmap.province.options.length||0;this.__doInitDomEvent([[_nmap.area,"change",this.__onChange._$bind(this,"area")],[_nmap.city,"change",this.__onChange._$bind(this,"city")],[_nmap.province,"change",this.__onChange._$bind(this,"province")]]);this.__cache=_options.cache||_p._$$RegionCacheZH._$allocate();this.__cache._$setEvent("onlistload",this.__onListLoad._$bind(this));this.__doClearSelect(_nmap.province);this._$setRegion(_options.data,!0);this.__cache._$getList({key:"province"})};_pro.__destroy=function(){this.__supDestroy();if(!!this.__cache){this.__cache._$recycle();delete this.__cache}delete this.__cache;delete this.__data;delete this.__selectors};_pro.__doClearSelect=function(_selector){if(!!_selector){_selector.options.length=this.__offset}};_pro.__doFillList=function(_selector,_list){if(!_selector)return;_u._$forEach(_list,function(_value){_selector.add(new Option(_value,_value))});_e._$setStyle(_selector,"display",!_list||!_list.length?"none":"")};_pro.__doSetValue=function(_type){var _value=this.__data[_type]||"";if(!!_value){this.__selectors[_type].value=_value;delete this.__data[_type]}this.__onChange(_type)};_pro.__onChange=function(_type){var _nmap=this.__selectors,_value=_nmap.province.value;switch(_type){case"province":this.__doClearSelect(_nmap.city);this.__doClearSelect(_nmap.area);if(!this.__cache._$hasArea(_value)){_e._$setStyle(_nmap.area,"display","none");if(!_nmap.area){_e._$setStyle(_nmap.city,"display","none");break}else{_e._$setStyle(_nmap.city,"display","")}}else{_e._$setStyle(_nmap.area,"display","");_e._$setStyle(_nmap.city,"display","")}if(!!_nmap.city&&!!_value){this.__cache._$getList({key:"city-"+_value})}break;case"city":this.__doClearSelect(_nmap.area);var _city=_nmap.city.value;if(!_city)return;this.__cache._$getList({key:"area-"+_value+"-"+_city});break}this._$dispatchEvent("onchange",_type)};_pro.__onListLoad=function(_options){var _key=_options.key,_type=_key.split("-")[0],_node=this.__selectors[_type];this.__doFillList(_node,this.__cache._$getListInCache(_key));this.__doSetValue(_type)};_pro._$setRegion=function(_data,_nochange){this.__data=_data||_o;if(!_nochange)this.__doSetValue("province");return this}})();
(function(){var _=NEJ.P,_r=NEJ.R,_p=_("nej.ut"),_pro;if(!!_p._$$RegionCacheZH)return;_p._$$RegionCacheZH=NEJ.C();_pro=_p._$$RegionCacheZH._$extend(_p._$$AbstractListCache);_pro.__doLoadList=function(_options){var _list,_arr=_options.key.split("-");switch(_arr.shift()){case"province":_list=_dmap.p;break;case"city":_list=_dmap.c[_arr.join("-")]||_r;break;case"area":_list=_dmap.a[_arr.join("-")]||_r;break}this._$setTotal(_options.key,_list.length);_options.onload(_list)};_pro._$hasArea=function(_province){return!_dmap.s[_province]};var _dmap={s:{"北京市":1,"天津市":1,"上海市":1,"重庆市":1,"澳门特别行政区":1,"香港特别行政区":1},p:["北京市","天津市","上海市","重庆市","河北省","山西省","辽宁省","吉林省","黑龙江省","江苏省","浙江省","安徽省","福建省","江西省","山东省","河南省","湖北省","湖南省","广东省","海南省","四川省","贵州省","云南省","陕西省","甘肃省","青海省","西藏自治区","内蒙古自治区","广西壮族自治区","宁夏回族自治区","新疆维吾尔自治区","香港特别行政区","澳门特别行政区","台湾省"],c:{"北京市":["东城区","西城区","朝阳区","丰台区","石景山区","海淀区","门头沟区","房山区","通州区","顺义区","昌平区","大兴区","怀柔区","平谷区","密云县","延庆县"],"天津市":["和平区","河东区","河西区","南开区","河北区","红桥区","东丽区","西青区","津南区","北辰区","武清区","宝坻区","滨海新区","宁河县","静海县","蓟县"],"河北省":["石家庄市","唐山市","秦皇岛市","邯郸市","邢台市","保定市","张家口市","承德市","沧州市","廊坊市","衡水市"],"山西省":["太原市","大同市","阳泉市","长治市","晋城市","朔州市","晋中市","运城市","忻州市","临汾市","吕梁市"],"内蒙古自治区":["呼和浩特市","包头市","乌海市","赤峰市","通辽市","鄂尔多斯市","呼伦贝尔市","巴彦淖尔市","乌兰察布市","兴安盟","锡林郭勒盟","阿拉善盟"],"辽宁省":["沈阳市","大连市","鞍山市","抚顺市","本溪市","丹东市","锦州市","营口市","阜新市","辽阳市","盘锦市","铁岭市","朝阳市","葫芦岛市"],"吉林省":["长春市","吉林市","四平市","辽源市","通化市","白山市","松原市","白城市","延边朝鲜族自治州"],"黑龙江省":["哈尔滨市","齐齐哈尔市","鸡西市","鹤岗市","双鸭山市","大庆市","伊春市","佳木斯市","七台河市","牡丹江市","黑河市","绥化市","大兴安岭地区"],"上海市":["黄浦区","徐汇区","长宁区","静安区","普陀区","闸北区","虹口区","杨浦区","闵行区","宝山区","嘉定区","浦东新区","金山区","松江区","青浦区","奉贤区","崇明县"],"江苏省":["南京市","无锡市","徐州市","常州市","苏州市","南通市","连云港市","淮安市","盐城市","扬州市","镇江市","泰州市","宿迁市"],"浙江省":["杭州市","宁波市","温州市","嘉兴市","湖州市","绍兴市","金华市","衢州市","舟山市","台州市","丽水市"],"安徽省":["合肥市","芜湖市","蚌埠市","淮南市","马鞍山市","淮北市","铜陵市","安庆市","黄山市","滁州市","阜阳市","宿州市","六安市","亳州市","池州市","宣城市"],"福建省":["福州市","厦门市","莆田市","三明市","泉州市","漳州市","南平市","龙岩市","宁德市"],"江西省":["南昌市","景德镇市","萍乡市","九江市","新余市","鹰潭市","赣州市","吉安市","宜春市","抚州市","上饶市"],"山东省":["济南市","青岛市","淄博市","枣庄市","东营市","烟台市","潍坊市","济宁市","泰安市","威海市","日照市","莱芜市","临沂市","德州市","聊城市","滨州市","菏泽市"],"河南省":["郑州市","开封市","洛阳市","平顶山市","安阳市","鹤壁市","新乡市","焦作市","濮阳市","许昌市","漯河市","三门峡市","南阳市","商丘市","信阳市","周口市","驻马店市","省直辖县级行政区划"],"湖北省":["武汉市","黄石市","十堰市","宜昌市","襄阳市","鄂州市","荆门市","孝感市","荆州市","黄冈市","咸宁市","随州市","恩施土家族苗族自治州","省直辖县级行政区划"],"湖南省":["长沙市","株洲市","湘潭市","衡阳市","邵阳市","岳阳市","常德市","张家界市","益阳市","郴州市","永州市","怀化市","娄底市","湘西土家族苗族自治州"],"广东省":["广州市","韶关市","深圳市","珠海市","汕头市","佛山市","江门市","湛江市","茂名市","肇庆市","惠州市","梅州市","汕尾市","河源市","阳江市","清远市","东莞市","中山市","潮州市","揭阳市","云浮市"],"广西壮族自治区":["南宁市","柳州市","桂林市","梧州市","北海市","防城港市","钦州市","贵港市","玉林市","百色市","贺州市","河池市","来宾市","崇左市"],"海南省":["海口市","三亚市","省直辖县级行政区划"],"重庆市":["万州区","涪陵区","渝中区","大渡口区","江北区","沙坪坝区","九龙坡区","南岸区","北碚区","綦江区","大足区","渝北区","巴南区","黔江区","长寿区","江津区","合川区","永川区","南川区","潼南县","铜梁县","荣昌县","璧山县","梁平县","城口县","丰都县","垫江县","武隆县","忠县","开县","云阳县","奉节县","巫山县","巫溪县","石柱土家族自治县","秀山土家族苗族自治县","酉阳土家族苗族自治县","彭水苗族土家族自治县"],"四川省":["成都市","自贡市","攀枝花市","泸州市","德阳市","绵阳市","广元市","遂宁市","内江市","乐山市","南充市","眉山市","宜宾市","广安市","达州市","雅安市","巴中市","资阳市","阿坝藏族羌族自治州","甘孜藏族自治州","凉山彝族自治州"],"贵州省":["贵阳市","六盘水市","遵义市","安顺市","毕节市","铜仁市","黔西南布依族苗族自治州","黔东南苗族侗族自治州","黔南布依族苗族自治州"],"云南省":["昆明市","曲靖市","玉溪市","保山市","昭通市","丽江市","普洱市","临沧市","楚雄彝族自治州","红河哈尼族彝族自治州","文山壮族苗族自治州","西双版纳傣族自治州","大理白族自治州","德宏傣族景颇族自治州","怒江傈僳族自治州","迪庆藏族自治州"],"西藏自治区":["拉萨市","昌都地区","山南地区","日喀则地区","那曲地区","阿里地区","林芝地区"],"陕西省":["西安市","铜川市","宝鸡市","咸阳市","渭南市","延安市","汉中市","榆林市","安康市","商洛市"],"甘肃省":["兰州市","嘉峪关市","金昌市","白银市","天水市","武威市","张掖市","平凉市","酒泉市","庆阳市","定西市","陇南市","临夏回族自治州","甘南藏族自治州"],"青海省":["西宁市","海东地区","海北藏族自治州","黄南藏族自治州","海南藏族自治州","果洛藏族自治州","玉树藏族自治州","海西蒙古族藏族自治州"],"宁夏回族自治区":["银川市","石嘴山市","吴忠市","固原市","中卫市"],"新疆维吾尔自治区":["乌鲁木齐市","克拉玛依市","吐鲁番地区","哈密地区","昌吉回族自治州","博尔塔拉蒙古自治州","巴音郭楞蒙古自治州","阿克苏地区","克孜勒苏柯尔克孜自治州","喀什地区","和田地区","伊犁哈萨克自治州","塔城地区","阿勒泰地区","自治区直辖县级行政区划"],"香港特别行政区":["中西区","东区","南区","湾仔区","九龙城区","深水埗区","油尖旺区","黄大仙区","观塘区","离岛区","葵青区","荃湾区","屯门区","元朗区","北区","大埔区","西贡区","沙田区"],"澳门特别行政区":["花地玛堂区","圣安多尼堂区","大堂区","望德堂区","风顺堂区","嘉模堂区","圣方济各堂区","路氹城"],"台湾省":["台北市","台中市","台南市","高雄市","新北市","新竹市","嘉义市","基隆市","云林县","南投县","台东县","嘉义县","宜兰县","屏东县","彰化县","新竹县","桃园县","澎湖县","花莲县","苗栗县","连江县","金门县"]},a:{"河北省-石家庄市":["长安区","桥东区","桥西区","新华区","井陉矿区","裕华区","井陉县","正定县","栾城县","行唐县","灵寿县","高邑县","深泽县","赞皇县","无极县","平山县","元氏县","赵县","辛集市","藁城市","晋州市","新乐市","鹿泉市"],"河北省-唐山市":["路南区","路北区","古冶区","开平区","丰南区","丰润区","滦县","滦南县","乐亭县","迁西县","玉田县","唐海县","遵化市","迁安市"],"河北省-秦皇岛市":["海港区","山海关区","北戴河区","青龙满族自治县","昌黎县","抚宁县","卢龙县"],"河北省-邯郸市":["邯山区","丛台区","复兴区","峰峰矿区","邯郸县","临漳县","成安县","大名县","涉县","磁县","肥乡县","永年县","邱县","鸡泽县","广平县","馆陶县","魏县","曲周县","武安市"],"河北省-邢台市":["桥东区","桥西区","邢台县","临城县","内丘县","柏乡县","隆尧县","任县","南和县","宁晋县","巨鹿县","新河县","广宗县","平乡县","威县","清河县","临西县","南宫市","沙河市"],"河北省-保定市":["新市区","北市区","南市区","满城县","清苑县","涞水县","阜平县","徐水县","定兴县","唐县","高阳县","容城县","涞源县","望都县","安新县","易县","曲阳县","蠡县","顺平县","博野县","雄县","涿州市","定州市","安国市","高碑店市"],"河北省-张家口市":["桥东区","桥西区","宣化区","下花园区","宣化县","张北县","康保县","沽源县","尚义县","蔚县","阳原县","怀安县","万全县","怀来县","涿鹿县","赤城县","崇礼县"],"河北省-承德市":["双桥区","双滦区","鹰手营子矿区","承德县","兴隆县","平泉县","滦平县","隆化县","丰宁满族自治县","宽城满族自治县","围场满族蒙古族自治县"],"河北省-沧州市":["新华区","运河区","沧县","青县","东光县","海兴县","盐山县","肃宁县","南皮县","吴桥县","献县","孟村回族自治县","泊头市","任丘市","黄骅市","河间市"],"河北省-廊坊市":["安次区","广阳区","固安县","永清县","香河县","大城县","文安县","大厂回族自治县","霸州市","三河市"],"河北省-衡水市":["桃城区","枣强县","武邑县","武强县","饶阳县","安平县","故城县","景县","阜城县","冀州市","深州市"],"山西省-太原市":["小店区","迎泽区","杏花岭区","尖草坪区","万柏林区","晋源区","清徐县","阳曲县","娄烦县","古交市"],"山西省-大同市":["城区","矿区","南郊区","新荣区","阳高县","天镇县","广灵县","灵丘县","浑源县","左云县","大同县"],"山西省-阳泉市":["城区","矿区","郊区","平定县","盂县"],"山西省-长治市":["城区","郊区","长治县","襄垣县","屯留县","平顺县","黎城县","壶关县","长子县","武乡县","沁县","沁源县","潞城市"],"山西省-晋城市":["城区","沁水县","阳城县","陵川县","泽州县","高平市"],"山西省-朔州市":["朔城区","平鲁区","山阴县","应县","右玉县","怀仁县"],"山西省-晋中市":["榆次区","榆社县","左权县","和顺县","昔阳县","寿阳县","太谷县","祁县","平遥县","灵石县","介休市"],"山西省-运城市":["盐湖区","临猗县","万荣县","闻喜县","稷山县","新绛县","绛县","垣曲县","夏县","平陆县","芮城县","永济市","河津市"],"山西省-忻州市":["忻府区","定襄县","五台县","代县","繁峙县","宁武县","静乐县","神池县","五寨县","岢岚县","河曲县","保德县","偏关县","原平市"],"山西省-临汾市":["尧都区","曲沃县","翼城县","襄汾县","洪洞县","古县","安泽县","浮山县","吉县","乡宁县","大宁县","隰县","永和县","蒲县","汾西县","侯马市","霍州市"],"山西省-吕梁市":["离石区","文水县","交城县","兴县","临县","柳林县","石楼县","岚县","方山县","中阳县","交口县","孝义市","汾阳市"],"内蒙古自治区-呼和浩特市":["新城区","回民区","玉泉区","赛罕区","土默特左旗","托克托县","和林格尔县","清水河县","武川县"],"内蒙古自治区-包头市":["东河区","昆都仑区","青山区","石拐区","白云鄂博矿区","九原区","土默特右旗","固阳县","达尔罕茂明安联合旗"],"内蒙古自治区-乌海市":["海勃湾区","海南区","乌达区"],"内蒙古自治区-赤峰市":["红山区","元宝山区","松山区","阿鲁科尔沁旗","巴林左旗","巴林右旗","林西县","克什克腾旗","翁牛特旗","喀喇沁旗","宁城县","敖汉旗"],"内蒙古自治区-通辽市":["科尔沁区","科尔沁左翼中旗","科尔沁左翼后旗","开鲁县","库伦旗","奈曼旗","扎鲁特旗","霍林郭勒市"],"内蒙古自治区-鄂尔多斯市":["东胜区","达拉特旗","准格尔旗","鄂托克前旗","鄂托克旗","杭锦旗","乌审旗","伊金霍洛旗"],"内蒙古自治区-呼伦贝尔市":["海拉尔区","阿荣旗","莫力达瓦达斡尔族自治旗","鄂伦春自治旗","鄂温克族自治旗","陈巴尔虎旗","新巴尔虎左旗","新巴尔虎右旗","满洲里市","牙克石市","扎兰屯市","额尔古纳市","根河市"],"内蒙古自治区-巴彦淖尔市":["临河区","五原县","磴口县","乌拉特前旗","乌拉特中旗","乌拉特后旗","杭锦后旗"],"内蒙古自治区-乌兰察布市":["集宁区","卓资县","化德县","商都县","兴和县","凉城县","察哈尔右翼前旗","察哈尔右翼中旗","察哈尔右翼后旗","四子王旗","丰镇市"],"内蒙古自治区-兴安盟":["乌兰浩特市","阿尔山市","科尔沁右翼前旗","科尔沁右翼中旗","扎赉特旗","突泉县"],"内蒙古自治区-锡林郭勒盟":["二连浩特市","锡林浩特市","阿巴嘎旗","苏尼特左旗","苏尼特右旗","东乌珠穆沁旗","西乌珠穆沁旗","太仆寺旗","镶黄旗","正镶白旗","正蓝旗","多伦县"],"内蒙古自治区-阿拉善盟":["阿拉善左旗","阿拉善右旗","额济纳旗"],"辽宁省-沈阳市":["和平区","沈河区","大东区","皇姑区","铁西区","苏家屯区","东陵区","沈北新区","于洪区","辽中县","康平县","法库县","新民市"],"辽宁省-大连市":["中山区","西岗区","沙河口区","甘井子区","旅顺口区","金州区","长海县","瓦房店市","普兰店市","庄河市"],"辽宁省-鞍山市":["铁东区","铁西区","立山区","千山区","台安县","岫岩满族自治县","海城市"],"辽宁省-抚顺市":["新抚区","东洲区","望花区","顺城区","抚顺县","新宾满族自治县","清原满族自治县"],"辽宁省-本溪市":["平山区","溪湖区","明山区","南芬区","本溪满族自治县","桓仁满族自治县"],"辽宁省-丹东市":["元宝区","振兴区","振安区","宽甸满族自治县","东港市","凤城市"],"辽宁省-锦州市":["古塔区","凌河区","太和区","黑山县","义县","凌海市","北镇市"],"辽宁省-营口市":["站前区","西市区","鲅鱼圈区","老边区","盖州市","大石桥市"],"辽宁省-阜新市":["海州区","新邱区","太平区","清河门区","细河区","阜新蒙古族自治县","彰武县"],"辽宁省-辽阳市":["白塔区","文圣区","宏伟区","弓长岭区","太子河区","辽阳县","灯塔市"],"辽宁省-盘锦市":["双台子区","兴隆台区","大洼县","盘山县"],"辽宁省-铁岭市":["银州区","清河区","铁岭县","西丰县","昌图县","调兵山市","开原市"],"辽宁省-朝阳市":["双塔区","龙城区","朝阳县","建平县","喀喇沁左翼蒙古族自治县","北票市","凌源市"],"辽宁省-葫芦岛市":["连山区","龙港区","南票区","绥中县","建昌县","兴城市"],"吉林省-长春市":["南关区","宽城区","朝阳区","二道区","绿园区","双阳区","农安县","九台市","榆树市","德惠市"],"吉林省-吉林市":["昌邑区","龙潭区","船营区","丰满区","永吉县","蛟河市","桦甸市","舒兰市","磐石市"],"吉林省-四平市":["铁西区","铁东区","梨树县","伊通满族自治县","公主岭市","双辽市"],"吉林省-辽源市":["龙山区","西安区","东丰县","东辽县"],"吉林省-通化市":["东昌区","二道江区","通化县","辉南县","柳河县","梅河口市","集安市"],"吉林省-白山市":["八道江区","江源区","抚松县","靖宇县","长白朝鲜族自治县","临江市"],"吉林省-松原市":["宁江区","前郭尔罗斯蒙古族自治县","长岭县","乾安县","扶余县"],"吉林省-白城市":["洮北区","镇赉县","通榆县","洮南市","大安市"],"吉林省-延边朝鲜族自治州":["延吉市","图们市","敦化市","珲春市","龙井市","和龙市","汪清县","安图县"],"黑龙江省-哈尔滨市":["道里区","南岗区","道外区","平房区","松北区","香坊区","呼兰区","阿城区","依兰县","方正县","宾县","巴彦县","木兰县","通河县","延寿县","双城市","尚志市","五常市"],"黑龙江省-齐齐哈尔市":["龙沙区","建华区","铁锋区","昂昂溪区","富拉尔基区","碾子山区","梅里斯达斡尔族区","龙江县","依安县","泰来县","甘南县","富裕县","克山县","克东县","拜泉县","讷河市"],"黑龙江省-鸡西市":["鸡冠区","恒山区","滴道区","梨树区","城子河区","麻山区","鸡东县","虎林市","密山市"],"黑龙江省-鹤岗市":["向阳区","工农区","南山区","兴安区","东山区","兴山区","萝北县","绥滨县"],"黑龙江省-双鸭山市":["尖山区","岭东区","四方台区","宝山区","集贤县","友谊县","宝清县","饶河县"],"黑龙江省-大庆市":["萨尔图区","龙凤区","让胡路区","红岗区","大同区","肇州县","肇源县","林甸县","杜尔伯特蒙古族自治县"],"黑龙江省-伊春市":["伊春区","南岔区","友好区","西林区","翠峦区","新青区","美溪区","金山屯区","五营区","乌马河区","汤旺河区","带岭区","乌伊岭区","红星区","上甘岭区","嘉荫县","铁力市"],"黑龙江省-佳木斯市":["向阳区","前进区","东风区","郊区","桦南县","桦川县","汤原县","抚远县","同江市","富锦市"],"黑龙江省-七台河市":["新兴区","桃山区","茄子河区","勃利县"],"黑龙江省-牡丹江市":["东安区","阳明区","爱民区","西安区","东宁县","林口县","绥芬河市","海林市","宁安市","穆棱市"],"黑龙江省-黑河市":["爱辉区","嫩江县","逊克县","孙吴县","北安市","五大连池市"],"黑龙江省-绥化市":["北林区","望奎县","兰西县","青冈县","庆安县","明水县","绥棱县","安达市","肇东市","海伦市"],"黑龙江省-大兴安岭地区":["呼玛县","塔河县","漠河县"],"江苏省-南京市":["玄武区","白下区","秦淮区","建邺区","鼓楼区","下关区","浦口区","栖霞区","雨花台区","江宁区","六合区","溧水县","高淳县"],"江苏省-无锡市":["崇安区","南长区","北塘区","锡山区","惠山区","滨湖区","江阴市","宜兴市"],"江苏省-徐州市":["鼓楼区","云龙区","贾汪区","泉山区","铜山区","丰县","沛县","睢宁县","新沂市","邳州市"],"江苏省-常州市":["天宁区","钟楼区","戚墅堰区","新北区","武进区","溧阳市","金坛市"],"江苏省-苏州市":["沧浪区","平江区","金阊区","虎丘区","吴中区","相城区","常熟市","张家港市","昆山市","吴江市","太仓市"],"江苏省-南通市":["崇川区","港闸区","通州区","海安县","如东县","启东市","如皋市","海门市"],"江苏省-连云港市":["连云区","新浦区","海州区","赣榆县","东海县","灌云县","灌南县"],"江苏省-淮安市":["清河区","楚州区","淮阴区","清浦区","涟水县","洪泽县","盱眙县","金湖县"],"江苏省-盐城市":["亭湖区","盐都区","响水县","滨海县","阜宁县","射阳县","建湖县","东台市","大丰市"],"江苏省-扬州市":["广陵区","邗江区","江都区","宝应县","仪征市","高邮市"],"江苏省-镇江市":["京口区","润州区","丹徒区","丹阳市","扬中市","句容市"],"江苏省-泰州市":["海陵区","高港区","兴化市","靖江市","泰兴市","姜堰市"],"江苏省-宿迁市":["宿城区","宿豫区","沭阳县","泗阳县","泗洪县"],"浙江省-杭州市":["上城区","下城区","江干区","拱墅区","西湖区","滨江区","萧山区","余杭区","桐庐县","淳安县","建德市","富阳市","临安市"],"浙江省-宁波市":["海曙区","江东区","江北区","北仑区","镇海区","鄞州区","象山县","宁海县","余姚市","慈溪市","奉化市"],"浙江省-温州市":["鹿城区","龙湾区","瓯海区","洞头县","永嘉县","平阳县","苍南县","文成县","泰顺县","瑞安市","乐清市"],"浙江省-嘉兴市":["南湖区","秀洲区","嘉善县","海盐县","海宁市","平湖市","桐乡市"],"浙江省-湖州市":["吴兴区","南浔区","德清县","长兴县","安吉县"],"浙江省-绍兴市":["越城区","绍兴县","新昌县","诸暨市","上虞市","嵊州市"],"浙江省-金华市":["婺城区","金东区","武义县","浦江县","磐安县","兰溪市","义乌市","东阳市","永康市"],"浙江省-衢州市":["柯城区","衢江区","常山县","开化县","龙游县","江山市"],"浙江省-舟山市":["定海区","普陀区","岱山县","嵊泗县"],"浙江省-台州市":["椒江区","黄岩区","路桥区","玉环县","三门县","天台县","仙居县","温岭市","临海市"],"浙江省-丽水市":["莲都区","青田县","缙云县","遂昌县","松阳县","云和县","庆元县","景宁畲族自治县","龙泉市"],"安徽省-合肥市":["瑶海区","庐阳区","蜀山区","包河区","长丰县","肥东县","肥西县","庐江县","巢湖市"],"安徽省-芜湖市":["镜湖区","弋江区","鸠江区","三山区","芜湖县","繁昌县","南陵县","无为县"],"安徽省-蚌埠市":["龙子湖区","蚌山区","禹会区","淮上区","怀远县","五河县","固镇县"],"安徽省-淮南市":["大通区","田家庵区","谢家集区","八公山区","潘集区","凤台县"],"安徽省-马鞍山市":["金家庄区","花山区","雨山区","当涂县","含山县","和县"],"安徽省-淮北市":["杜集区","相山区","烈山区","濉溪县"],"安徽省-铜陵市":["铜官山区","狮子山区","郊区","铜陵县"],"安徽省-安庆市":["迎江区","大观区","宜秀区","怀宁县","枞阳县","潜山县","太湖县","宿松县","望江县","岳西县","桐城市"],"安徽省-黄山市":["屯溪区","黄山区","徽州区","歙县","休宁县","黟县","祁门县"],"安徽省-滁州市":["琅琊区","南谯区","来安县","全椒县","定远县","凤阳县","天长市","明光市"],"安徽省-阜阳市":["颍州区","颍东区","颍泉区","临泉县","太和县","阜南县","颍上县","界首市"],"安徽省-宿州市":["埇桥区","砀山县","萧县","灵璧县","泗县"],"安徽省-六安市":["金安区","裕安区","寿县","霍邱县","舒城县","金寨县","霍山县"],"安徽省-亳州市":["谯城区","涡阳县","蒙城县","利辛县"],"安徽省-池州市":["贵池区","东至县","石台县","青阳县"],"安徽省-宣城市":["宣州区","郎溪县","广德县","泾县","绩溪县","旌德县","宁国市"],"福建省-福州市":["鼓楼区","台江区","仓山区","马尾区","晋安区","闽侯县","连江县","罗源县","闽清县","永泰县","平潭县","福清市","长乐市"],"福建省-厦门市":["思明区","海沧区","湖里区","集美区","同安区","翔安区"],"福建省-莆田市":["城厢区","涵江区","荔城区","秀屿区","仙游县"],"福建省-三明市":["梅列区","三元区","明溪县","清流县","宁化县","大田县","尤溪县","沙县","将乐县","泰宁县","建宁县","永安市"],"福建省-泉州市":["鲤城区","丰泽区","洛江区","泉港区","惠安县","安溪县","永春县","德化县","金门县","石狮市","晋江市","南安市"],"福建省-漳州市":["芗城区","龙文区","云霄县","漳浦县","诏安县","长泰县","东山县","南靖县","平和县","华安县","龙海市"],"福建省-南平市":["延平区","顺昌县","浦城县","光泽县","松溪县","政和县","邵武市","武夷山市","建瓯市","建阳市"],"福建省-龙岩市":["新罗区","长汀县","永定县","上杭县","武平县","连城县","漳平市"],"福建省-宁德市":["蕉城区","霞浦县","古田县","屏南县","寿宁县","周宁县","柘荣县","福安市","福鼎市"],"江西省-南昌市":["东湖区","西湖区","青云谱区","湾里区","青山湖区","南昌县","新建县","安义县","进贤县"],"江西省-景德镇市":["昌江区","珠山区","浮梁县","乐平市"],"江西省-萍乡市":["安源区","湘东区","莲花县","上栗县","芦溪县"],"江西省-九江市":["庐山区","浔阳区","九江县","武宁县","修水县","永修县","德安县","星子县","都昌县","湖口县","彭泽县","瑞昌市","共青城市"],"江西省-新余市":["渝水区","分宜县"],"江西省-鹰潭市":["月湖区","余江县","贵溪市"],"江西省-赣州市":["章贡区","赣县","信丰县","大余县","上犹县","崇义县","安远县","龙南县","定南县","全南县","宁都县","于都县","兴国县","会昌县","寻乌县","石城县","瑞金市","南康市"],"江西省-吉安市":["吉州区","青原区","吉安县","吉水县","峡江县","新干县","永丰县","泰和县","遂川县","万安县","安福县","永新县","井冈山市"],"江西省-宜春市":["袁州区","奉新县","万载县","上高县","宜丰县","靖安县","铜鼓县","丰城市","樟树市","高安市"],"江西省-抚州市":["临川区","南城县","黎川县","南丰县","崇仁县","乐安县","宜黄县","金溪县","资溪县","东乡县","广昌县"],"江西省-上饶市":["信州区","上饶县","广丰县","玉山县","铅山县","横峰县","弋阳县","余干县","鄱阳县","万年县","婺源县","德兴市"],"山东省-济南市":["历下区","市中区","槐荫区","天桥区","历城区","长清区","平阴县","济阳县","商河县","章丘市"],"山东省-青岛市":["市南区","市北区","四方区","黄岛区","崂山区","李沧区","城阳区","胶州市","即墨市","平度市","胶南市","莱西市"],"山东省-淄博市":["淄川区","张店区","博山区","临淄区","周村区","桓台县","高青县","沂源县"],"山东省-枣庄市":["市中区","薛城区","峄城区","台儿庄区","山亭区","滕州市"],"山东省-东营市":["东营区","河口区","垦利县","利津县","广饶县"],"山东省-烟台市":["芝罘区","福山区","牟平区","莱山区","长岛县","龙口市","莱阳市","莱州市","蓬莱市","招远市","栖霞市","海阳市"],"山东省-潍坊市":["潍城区","寒亭区","坊子区","奎文区","临朐县","昌乐县","青州市","诸城市","寿光市","安丘市","高密市","昌邑市"],"山东省-济宁市":["市中区","任城区","微山县","鱼台县","金乡县","嘉祥县","汶上县","泗水县","梁山县","曲阜市","兖州市","邹城市"],"山东省-泰安市":["泰山区","岱岳区","宁阳县","东平县","新泰市","肥城市"],"山东省-威海市":["环翠区","文登市","荣成市","乳山市"],"山东省-日照市":["东港区","岚山区","五莲县","莒县"],"山东省-莱芜市":["莱城区","钢城区"],"山东省-临沂市":["兰山区","罗庄区","河东区","沂南县","郯城县","沂水县","苍山县","费县","平邑县","莒南县","蒙阴县","临沭县"],"山东省-德州市":["德城区","陵县","宁津县","庆云县","临邑县","齐河县","平原县","夏津县","武城县","乐陵市","禹城市"],"山东省-聊城市":["东昌府区","阳谷县","莘县","茌平县","东阿县","冠县","高唐县","临清市"],"山东省-滨州市":["滨城区","惠民县","阳信县","无棣县","沾化县","博兴县","邹平县"],"山东省-菏泽市":["牡丹区","曹县","单县","成武县","巨野县","郓城县","鄄城县","定陶县","东明县"],"河南省-郑州市":["中原区","二七区","管城回族区","金水区","上街区","惠济区","中牟县","巩义市","荥阳市","新密市","新郑市","登封市"],"河南省-开封市":["龙亭区","顺河回族区","鼓楼区","禹王台区","金明区","杞县","通许县","尉氏县","开封县","兰考县"],"河南省-洛阳市":["老城区","西工区","瀍河回族区","涧西区","吉利区","洛龙区","孟津县","新安县","栾川县","嵩县","汝阳县","宜阳县","洛宁县","伊川县","偃师市"],"河南省-平顶山市":["新华区","卫东区","石龙区","湛河区","宝丰县","叶县","鲁山县","郏县","舞钢市","汝州市"],"河南省-安阳市":["文峰区","北关区","殷都区","龙安区","安阳县","汤阴县","滑县","内黄县","林州市"],"河南省-鹤壁市":["鹤山区","山城区","淇滨区","浚县","淇县"],"河南省-新乡市":["红旗区","卫滨区","凤泉区","牧野区","新乡县","获嘉县","原阳县","延津县","封丘县","长垣县","卫辉市","辉县市"],"河南省-焦作市":["解放区","中站区","马村区","山阳区","修武县","博爱县","武陟县","温县","沁阳市","孟州市"],"河南省-濮阳市":["华龙区","清丰县","南乐县","范县","台前县","濮阳县"],"河南省-许昌市":["魏都区","许昌县","鄢陵县","襄城县","禹州市","长葛市"],"河南省-漯河市":["源汇区","郾城区","召陵区","舞阳县","临颍县"],"河南省-三门峡市":["湖滨区","渑池县","陕县","卢氏县","义马市","灵宝市"],"河南省-南阳市":["宛城区","卧龙区","南召县","方城县","西峡县","镇平县","内乡县","淅川县","社旗县","唐河县","新野县","桐柏县","邓州市"],"河南省-商丘市":["梁园区","睢阳区","民权县","睢县","宁陵县","柘城县","虞城县","夏邑县","永城市"],"河南省-信阳市":["浉河区","平桥区","罗山县","光山县","新县","商城县","固始县","潢川县","淮滨县","息县"],"河南省-周口市":["川汇区","扶沟县","西华县","商水县","沈丘县","郸城县","淮阳县","太康县","鹿邑县","项城市"],"河南省-驻马店市":["驿城区","西平县","上蔡县","平舆县","正阳县","确山县","泌阳县","汝南县","遂平县","新蔡县"],"河南省-省直辖县级行政区划":["济源市"],"湖北省-武汉市":["江岸区","江汉区","硚口区","汉阳区","武昌区","青山区","洪山区","东西湖区","汉南区","蔡甸区","江夏区","黄陂区","新洲区"],"湖北省-黄石市":["黄石港区","西塞山区","下陆区","铁山区","阳新县","大冶市"],"湖北省-十堰市":["茅箭区","张湾区","郧县","郧西县","竹山县","竹溪县","房县","丹江口市"],"湖北省-宜昌市":["西陵区","伍家岗区","点军区","猇亭区","夷陵区","远安县","兴山县","秭归县","长阳土家族自治县","五峰土家族自治县","宜都市","当阳市","枝江市"],"湖北省-襄阳市":["襄城区","樊城区","襄州区","南漳县","谷城县","保康县","老河口市","枣阳市","宜城市"],"湖北省-鄂州市":["梁子湖区","华容区","鄂城区"],"湖北省-荆门市":["东宝区","掇刀区","京山县","沙洋县","钟祥市"],"湖北省-孝感市":["孝南区","孝昌县","大悟县","云梦县","应城市","安陆市","汉川市"],"湖北省-荆州市":["沙市区","荆州区","公安县","监利县","江陵县","石首市","洪湖市","松滋市"],"湖北省-黄冈市":["黄州区","团风县","红安县","罗田县","英山县","浠水县","蕲春县","黄梅县","麻城市","武穴市"],"湖北省-咸宁市":["咸安区","嘉鱼县","通城县","崇阳县","通山县","赤壁市"],"湖北省-随州市":["曾都区","随县","广水市"],"湖北省-恩施土家族苗族自治州":["恩施市","利川市","建始县","巴东县","宣恩县","咸丰县","来凤县","鹤峰县"],"湖北省-省直辖县级行政区划":["仙桃市","潜江市","天门市","神农架林区"],"湖南省-长沙市":["芙蓉区","天心区","岳麓区","开福区","雨花区","望城区","长沙县","宁乡县","浏阳市"],"湖南省-株洲市":["荷塘区","芦淞区","石峰区","天元区","株洲县","攸县","茶陵县","炎陵县","醴陵市"],"湖南省-湘潭市":["雨湖区","岳塘区","湘潭县","湘乡市","韶山市"],"湖南省-衡阳市":["珠晖区","雁峰区","石鼓区","蒸湘区","南岳区","衡阳县","衡南县","衡山县","衡东县","祁东县","耒阳市","常宁市"],"湖南省-邵阳市":["双清区","大祥区","北塔区","邵东县","新邵县","邵阳县","隆回县","洞口县","绥宁县","新宁县","城步苗族自治县","武冈市"],"湖南省-岳阳市":["岳阳楼区","云溪区","君山区","岳阳县","华容县","湘阴县","平江县","汨罗市","临湘市"],"湖南省-常德市":["武陵区","鼎城区","安乡县","汉寿县","澧县","临澧县","桃源县","石门县","津市市"],"湖南省-张家界市":["永定区","武陵源区","慈利县","桑植县"],"湖南省-益阳市":["资阳区","赫山区","南县","桃江县","安化县","沅江市"],"湖南省-郴州市":["北湖区","苏仙区","桂阳县","宜章县","永兴县","嘉禾县","临武县","汝城县","桂东县","安仁县","资兴市"],"湖南省-永州市":["零陵区","冷水滩区","祁阳县","东安县","双牌县","道县","江永县","宁远县","蓝山县","新田县","江华瑶族自治县"],"湖南省-怀化市":["鹤城区","中方县","沅陵县","辰溪县","溆浦县","会同县","麻阳苗族自治县","新晃侗族自治县","芷江侗族自治县","靖州苗族侗族自治县","通道侗族自治县","洪江市"],"湖南省-娄底市":["娄星区","双峰县","新化县","冷水江市","涟源市"],"湖南省-湘西土家族苗族自治州":["吉首市","泸溪县","凤凰县","花垣县","保靖县","古丈县","永顺县","龙山县"],"广东省-广州市":["荔湾区","越秀区","海珠区","天河区","白云区","黄埔区","番禺区","花都区","南沙区","萝岗区","增城市","从化市"],"广东省-韶关市":["武江区","浈江区","曲江区","始兴县","仁化县","翁源县","乳源瑶族自治县","新丰县","乐昌市","南雄市"],"广东省-深圳市":["罗湖区","福田区","南山区","宝安区","龙岗区","盐田区"],"广东省-珠海市":["香洲区","斗门区","金湾区"],"广东省-汕头市":["龙湖区","金平区","濠江区","潮阳区","潮南区","澄海区","南澳县"],"广东省-佛山市":["禅城区","南海区","顺德区","三水区","高明区"],"广东省-江门市":["蓬江区","江海区","新会区","台山市","开平市","鹤山市","恩平市"],"广东省-湛江市":["赤坎区","霞山区","坡头区","麻章区","遂溪县","徐闻县","廉江市","雷州市","吴川市"],"广东省-茂名市":["茂南区","茂港区","电白县","高州市","化州市","信宜市"],"广东省-肇庆市":["端州区","鼎湖区","广宁县","怀集县","封开县","德庆县","高要市","四会市"],"广东省-惠州市":["惠城区","惠阳区","博罗县","惠东县","龙门县"],"广东省-梅州市":["梅江区","梅县","大埔县","丰顺县","五华县","平远县","蕉岭县","兴宁市"],"广东省-汕尾市":["城区","海丰县","陆河县","陆丰市"],"广东省-河源市":["源城区","紫金县","龙川县","连平县","和平县","东源县"],"广东省-阳江市":["江城区","阳西县","阳东县","阳春市"],"广东省-清远市":["清城区","佛冈县","阳山县","连山壮族瑶族自治县","连南瑶族自治县","清新县","英德市","连州市"],"广东省-潮州市":["湘桥区","潮安县","饶平县"],"广东省-揭阳市":["榕城区","揭东县","揭西县","惠来县","普宁市"],"广东省-云浮市":["云城区","新兴县","郁南县","云安县","罗定市"],"广西壮族自治区-南宁市":["兴宁区","青秀区","江南区","西乡塘区","良庆区","邕宁区","武鸣县","隆安县","马山县","上林县","宾阳县","横县"],"广西壮族自治区-柳州市":["城中区","鱼峰区","柳南区","柳北区","柳江县","柳城县","鹿寨县","融安县","融水苗族自治县","三江侗族自治县"],"广西壮族自治区-桂林市":["秀峰区","叠彩区","象山区","七星区","雁山区","阳朔县","临桂县","灵川县","全州县","兴安县","永福县","灌阳县","龙胜各族自治县","资源县","平乐县","荔蒲县","恭城瑶族自治县"],"广西壮族自治区-梧州市":["万秀区","蝶山区","长洲区","苍梧县","藤县","蒙山县","岑溪市"],"广西壮族自治区-北海市":["海城区","银海区","铁山港区","合浦县"],"广西壮族自治区-防城港市":["港口区","防城区","上思县","东兴市"],"广西壮族自治区-钦州市":["钦南区","钦北区","灵山县","浦北县"],"广西壮族自治区-贵港市":["港北区","港南区","覃塘区","平南县","桂平市"],"广西壮族自治区-玉林市":["玉州区","容县","陆川县","博白县","兴业县","北流市"],"广西壮族自治区-百色市":["右江区","田阳县","田东县","平果县","德保县","靖西县","那坡县","凌云县","乐业县","田林县","西林县","隆林各族自治县"],"广西壮族自治区-贺州市":["八步区","昭平县","钟山县","富川瑶族自治县"],"广西壮族自治区-河池市":["金城江区","南丹县","天峨县","凤山县","东兰县","罗城仫佬族自治县","环江毛南族自治县","巴马瑶族自治县","都安瑶族自治县","大化瑶族自治县","宜州市"],"广西壮族自治区-来宾市":["兴宾区","忻城县","象州县","武宣县","金秀瑶族自治县","合山市"],"广西壮族自治区-崇左市":["江洲区","扶绥县","宁明县","龙州县","大新县","天等县","凭祥市"],"海南省-海口市":["秀英区","龙华区","琼山区","美兰区"],"海南省-省直辖县级行政区划":["五指山市","琼海市","儋州市","文昌市","万宁市","东方市","定安县","屯昌县","澄迈县","临高县","白沙黎族自治县","昌江黎族自治县","乐东黎族自治县","陵水黎族自治县","保亭黎族苗族自治县","琼中黎族苗族自治县","西沙群岛","南沙群岛","中沙群岛的岛礁及其海域"],"四川省-成都市":["锦江区","青羊区","金牛区","武侯区","成华区","龙泉驿区","青白江区","新都区","温江区","金堂县","双流县","郫县","大邑县","蒲江县","新津县","都江堰市","彭州市","邛崃市","崇州市"],"四川省-自贡市":["自流井区","贡井区","大安区","沿滩区","荣县","富顺县"],"四川省-攀枝花市":["东区","西区","仁和区","米易县","盐边县"],"四川省-泸州市":["江阳区","纳溪区","龙马潭区","泸县","合江县","叙永县","古蔺县"],"四川省-德阳市":["旌阳区","中江县","罗江县","广汉市","什邡市","绵竹市"],"四川省-绵阳市":["涪城区","游仙区","三台县","盐亭县","安县","梓潼县","北川羌族自治县","平武县","江油市"],"四川省-广元市":["利州区","元坝区","朝天区","旺苍县","青川县","剑阁县","苍溪县"],"四川省-遂宁市":["船山区","安居区","蓬溪县","射洪县","大英县"],"四川省-内江市":["市中区","东兴区","威远县","资中县","隆昌县"],"四川省-乐山市":["市中区","沙湾区","五通桥区","金口河区","犍为县","井研县","夹江县","沐川县","峨边彝族自治县","马边彝族自治县","峨眉山市"],"四川省-南充市":["顺庆区","高坪区","嘉陵区","南部县","营山县","蓬安县","仪陇县","西充县","阆中市"],"四川省-眉山市":["东坡区","仁寿县","彭山县","洪雅县","丹棱县","青神县"],"四川省-宜宾市":["翠屏区","南溪区","宜宾县","江安县","长宁县","高县","珙县","筠连县","兴文县","屏山县"],"四川省-广安市":["广安区","岳池县","武胜县","邻水县","华蓥市"],"四川省-达州市":["通川区","达县","宣汉县","开江县","大竹县","渠县","万源市"],"四川省-雅安市":["雨城区","名山县","荥经县","汉源县","石棉县","天全县","芦山县","宝兴县"],"四川省-巴中市":["巴州区","通江县","南江县","平昌县"],"四川省-资阳市":["雁江区","安岳县","乐至县","简阳市"],"四川省-阿坝藏族羌族自治州":["汶川县","理县","茂县","松潘县","九寨沟县","金川县","小金县","黑水县","马尔康县","壤塘县","阿坝县","若尔盖县","红原县"],"四川省-甘孜藏族自治州":["康定县","泸定县","丹巴县","九龙县","雅江县","道孚县","炉霍县","甘孜县","新龙县","德格县","白玉县","石渠县","色达县","理塘县","巴塘县","乡城县","稻城县","得荣县"],"四川省-凉山彝族自治州":["西昌市","木里藏族自治县","盐源县","德昌县","会理县","会东县","宁南县","普格县","布拖县","金阳县","昭觉县","喜德县","冕宁县","越西县","甘洛县","美姑县","雷波县"],"贵州省-贵阳市":["南明区","云岩区","花溪区","乌当区","白云区","小河区","开阳县","息烽县","修文县","清镇市"],"贵州省-六盘水市":["钟山区","六枝特区","水城县","盘县"],"贵州省-遵义市":["红花岗区","汇川区","遵义县","桐梓县","绥阳县","正安县","道真仡佬族苗族自治县","务川仡佬族苗族自治县","凤冈县","湄潭县","余庆县","习水县","赤水市","仁怀市"],"贵州省-安顺市":["西秀区","平坝县","普定县","镇宁布依族苗族自治县","关岭布依族苗族自治县","紫云苗族布依族自治县"],"贵州省-毕节市":["七星关区","大方县","黔西县","金沙县","织金县","纳雍县","威宁彝族回族苗族自治县","赫章县"],"贵州省-铜仁市":["碧江区","万山区","江口县","玉屏侗族自治县","石阡县","思南县","印江土家族苗族自治县","德江县","沿河土家族自治县","松桃苗族自治县"],"贵州省-黔西南布依族苗族自治州":["兴义市","兴仁县","普安县","晴隆县","贞丰县","望谟县","册亨县","安龙县"],"贵州省-黔东南苗族侗族自治州":["凯里市","黄平县","施秉县","三穗县","镇远县","岑巩县","天柱县","锦屏县","剑河县","台江县","黎平县","榕江县","从江县","雷山县","麻江县","丹寨县"],"贵州省-黔南布依族苗族自治州":["都匀市","福泉市","荔波县","贵定县","瓮安县","独山县","平塘县","罗甸县","长顺县","龙里县","惠水县","三都水族自治县"],"云南省-昆明市":["五华区","盘龙区","官渡区","西山区","东川区","呈贡区","晋宁县","富民县","宜良县","石林彝族自治县","嵩明县","禄劝彝族苗族自治县","寻甸回族彝族自治县","安宁市"],"云南省-曲靖市":["麒麟区","马龙县","陆良县","师宗县","罗平县","富源县","会泽县","沾益县","宣威市"],"云南省-玉溪市":["红塔区","江川县","澄江县","通海县","华宁县","易门县","峨山彝族自治县","新平彝族傣族自治县","元江哈尼族彝族傣族自治县"],"云南省-保山市":["隆阳区","施甸县","腾冲县","龙陵县","昌宁县"],"云南省-昭通市":["昭阳区","鲁甸县","巧家县","盐津县","大关县","永善县","绥江县","镇雄县","彝良县","威信县","水富县"],"云南省-丽江市":["古城区","玉龙纳西族自治县","永胜县","华坪县","宁蒗彝族自治县"],"云南省-普洱市":["思茅区","宁洱哈尼族彝族自治县","墨江哈尼族自治县","景东彝族自治县","景谷傣族彝族自治县","镇沅彝族哈尼族拉祜族自治县","江城哈尼族彝族自治县","孟连傣族拉祜族佤族自治县","澜沧拉祜族自治县","西盟佤族自治县"],"云南省-临沧市":["临翔区","凤庆县","云县","永德县","镇康县","双江拉祜族佤族布朗族傣族自治县","耿马傣族佤族自治县","沧源佤族自治县"],"云南省-楚雄彝族自治州":["楚雄市","双柏县","牟定县","南华县","姚安县","大姚县","永仁县","元谋县","武定县","禄丰县"],"云南省-红河哈尼族彝族自治州":["个旧市","开远市","蒙自市","屏边苗族自治县","建水县","石屏县","弥勒县","泸西县","元阳县","红河县","金平苗族瑶族傣族自治县","绿春县","河口瑶族自治县"],"云南省-文山壮族苗族自治州":["文山市","砚山县","西畴县","麻栗坡县","马关县","丘北县","广南县","富宁县"],"云南省-西双版纳傣族自治州":["景洪市","勐海县","勐腊县"],"云南省-大理白族自治州":["大理市","漾濞彝族自治县","祥云县","宾川县","弥渡县","南涧彝族自治县","巍山彝族回族自治县","永平县","云龙县","洱源县","剑川县","鹤庆县"],"云南省-德宏傣族景颇族自治州":["瑞丽市","芒市","梁河县","盈江县","陇川县"],"云南省-怒江傈僳族自治州":["泸水县","福贡县","贡山独龙族怒族自治县","兰坪白族普米族自治县"],"云南省-迪庆藏族自治州":["香格里拉县","德钦县","维西傈僳族自治县"],"西藏自治区-拉萨市":["城关区","林周县","当雄县","尼木县","曲水县","堆龙德庆县","达孜县","墨竹工卡县"],"西藏自治区-昌都地区":["昌都县","江达县","贡觉县","类乌齐县","丁青县","察雅县","八宿县","左贡县","芒康县","洛隆县","边坝县"],"西藏自治区-山南地区":["乃东县","扎囊县","贡嘎县","桑日县","琼结县","曲松县","措美县","洛扎县","加查县","隆子县","错那县","浪卡子县"],"西藏自治区-日喀则地区":["日喀则市","南木林县","江孜县","定日县","萨迦县","拉孜县","昂仁县","谢通门县","白朗县","仁布县","康马县","定结县","仲巴县","亚东县","吉隆县","聂拉木县","萨嘎县","岗巴县"],"西藏自治区-那曲地区":["那曲县","嘉黎县","比如县","聂荣县","安多县","申扎县","索县","班戈县","巴青县","尼玛县"],"西藏自治区-阿里地区":["普兰县","札达县","噶尔县","日土县","革吉县","改则县","措勤县"],"西藏自治区-林芝地区":["林芝县","工布江达县","米林县","墨脱县","波密县","察隅县","朗县"],"陕西省-西安市":["新城区","碑林区","莲湖区","灞桥区","未央区","雁塔区","阎良区","临潼区","长安区","蓝田县","周至县","户县","高陵县"],"陕西省-铜川市":["王益区","印台区","耀州区","宜君县"],"陕西省-宝鸡市":["渭滨区","金台区","陈仓区","凤翔县","岐山县","扶风县","眉县","陇县","千阳县","麟游县","凤县","太白县"],"陕西省-咸阳市":["秦都区","杨陵区","渭城区","三原县","泾阳县","乾县","礼泉县","永寿县","彬县","长武县","旬邑县","淳化县","武功县","兴平市"],"陕西省-渭南市":["临渭区","华县","潼关县","大荔县","合阳县","澄城县","蒲城县","白水县","富平县","韩城市","华阴市"],"陕西省-延安市":["宝塔区","延长县","延川县","子长县","安塞县","志丹县","吴起县","甘泉县","富县","洛川县","宜川县","黄龙县","黄陵县"],"陕西省-汉中市":["汉台区","南郑县","城固县","洋县","西乡县","勉县","宁强县","略阳县","镇巴县","留坝县","佛坪县"],"陕西省-榆林市":["榆阳区","神木县","府谷县","横山县","靖边县","定边县","绥德县","米脂县","佳县","吴堡县","清涧县","子洲县"],"陕西省-安康市":["汉滨区","汉阴县","石泉县","宁陕县","紫阳县","岚皋县","平利县","镇坪县","旬阳县","白河县"],"陕西省-商洛市":["商州区","洛南县","丹凤县","商南县","山阳县","镇安县","柞水县"],"甘肃省-兰州市":["城关区","七里河区","西固区","安宁区","红古区","永登县","皋兰县","榆中县"],"甘肃省-金昌市":["金川区","永昌县"],"甘肃省-白银市":["白银区","平川区","靖远县","会宁县","景泰县"],"甘肃省-天水市":["秦州区","麦积区","清水县","秦安县","甘谷县","武山县","张家川回族自治县"],"甘肃省-武威市":["凉州区","民勤县","古浪县","天祝藏族自治县"],"甘肃省-张掖市":["甘州区","肃南裕固族自治县","民乐县","临泽县","高台县","山丹县"],"甘肃省-平凉市":["崆峒区","泾川县","灵台县","崇信县","华亭县","庄浪县","静宁县"],"甘肃省-酒泉市":["肃州区","金塔县","瓜州县","肃北蒙古族自治县","阿克塞哈萨克族自治县","玉门市","敦煌市"],"甘肃省-庆阳市":["西峰区","庆城县","环县","华池县","合水县","正宁县","宁县","镇原县"],"甘肃省-定西市":["安定区","通渭县","陇西县","渭源县","临洮县","漳县","岷县"],"甘肃省-陇南市":["武都区","成县","文县","宕昌县","康县","西和县","礼县","徽县","两当县"],"甘肃省-临夏回族自治州":["临夏市","临夏县","康乐县","永靖县","广河县","和政县","东乡族自治县","积石山保安族东乡族撒拉族自治县"],"甘肃省-甘南藏族自治州":["合作市","临潭县","卓尼县","舟曲县","迭部县","玛曲县","碌曲县","夏河县"],"青海省-西宁市":["城东区","城中区","城西区","城北区","大通回族土族自治县","湟中县","湟源县"],"青海省-海东地区":["平安县","民和回族土族自治县","乐都县","互助土族自治县","化隆回族自治县","循化撒拉族自治县"],"青海省-海北藏族自治州":["门源回族自治县","祁连县","海晏县","刚察县"],"青海省-黄南藏族自治州":["同仁县","尖扎县","泽库县","河南蒙古族自治县"],"青海省-海南藏族自治州":["共和县","同德县","贵德县","兴海县","贵南县"],"青海省-果洛藏族自治州":["玛沁县","班玛县","甘德县","达日县","久治县","玛多县"],"青海省-玉树藏族自治州":["玉树县","杂多县","称多县","治多县","囊谦县","曲麻莱县"],"青海省-海西蒙古族藏族自治州":["格尔木市","德令哈市","乌兰县","都兰县","天峻县"],"宁夏回族自治区-银川市":["兴庆区","西夏区","金凤区","永宁县","贺兰县","灵武市"],"宁夏回族自治区-石嘴山市":["大武口区","惠农区","平罗县"],"宁夏回族自治区-吴忠市":["利通区","红寺堡区","盐池县","同心县","青铜峡市"],"宁夏回族自治区-固原市":["原州区","西吉县","隆德县","泾源县","彭阳县"],"宁夏回族自治区-中卫市":["沙坡头区","中宁县","海原县"],"新疆维吾尔自治区-乌鲁木齐市":["天山区","沙依巴克区","新市区","水磨沟区","头屯河区","达坂城区","米东区","乌鲁木齐县"],"新疆维吾尔自治区-克拉玛依市":["独山子区","克拉玛依区","白碱滩区","乌尔禾区"],"新疆维吾尔自治区-吐鲁番地区":["吐鲁番市","鄯善县","托克逊县"],"新疆维吾尔自治区-哈密地区":["哈密市","巴里坤哈萨克自治县","伊吾县"],"新疆维吾尔自治区-昌吉回族自治州":["昌吉市","阜康市","呼图壁县","玛纳斯县","奇台县","吉木萨尔县","木垒哈萨克自治县"],"新疆维吾尔自治区-博尔塔拉蒙古自治州":["博乐市","精河县","温泉县"],"新疆维吾尔自治区-巴音郭楞蒙古自治州":["库尔勒市","轮台县","尉犁县","若羌县","且末县","焉耆回族自治县","和静县","和硕县","博湖县"],"新疆维吾尔自治区-阿克苏地区":["阿克苏市","温宿县","库车县","沙雅县","新和县","拜城县","乌什县","阿瓦提县","柯坪县"],"新疆维吾尔自治区-克孜勒苏柯尔克孜自治州":["阿图什市","阿克陶县","阿合奇县","乌恰县"],"新疆维吾尔自治区-喀什地区":["喀什市","疏附县","疏勒县","英吉沙县","泽普县","莎车县","叶城县","麦盖提县","岳普湖县","伽师县","巴楚县","塔什库尔干塔吉克自治县"],"新疆维吾尔自治区-和田地区":["和田市","和田县","墨玉县","皮山县","洛浦县","策勒县","于田县","民丰县"],"新疆维吾尔自治区-伊犁哈萨克自治州":["伊宁市","奎屯市","伊宁县","察布查尔锡伯自治县","霍城县","巩留县","新源县","昭苏县","特克斯县","尼勒克县"],"新疆维吾尔自治区-塔城地区":["塔城市","乌苏市","额敏县","沙湾县","托里县","裕民县","和布克赛尔蒙古自治县"],"新疆维吾尔自治区-阿勒泰地区":["阿勒泰市","布尔津县","富蕴县","福海县","哈巴河县","青河县","吉木乃县"],"新疆维吾尔自治区-自治区直辖县级行政区划":["石河子市","阿拉尔市","图木舒克市","五家渠市"]}}})();
(function(){var _=NEJ.P,_o=NEJ.O,_f=NEJ.F,_p=_("nej.ut"),_pro;if(!!_p._$$Animation)return;_p._$$Animation=NEJ.C();_pro=_p._$$Animation._$extend(_p._$$Event);_pro.__reset=function(_options){this.__supReset(_options);this.__end=_options.to||_o;this.__begin=_options.from||{};this.__delay=Math.max(0,parseInt(_options.delay)||0)};_pro.__destroy=function(){this.__supDestroy();this._$stop();if(!!this.__dtime){window.clearTimeout(this.__dtime);delete this.__dtime}delete this.__end;delete this.__begin};_pro.__onAnimationFrame=function(_time){if(!this.__begin)return;if((""+_time).indexOf(".")>=0)_time=+(new Date);if(this.__doAnimationFrame(_time)){this._$stop();return}this.__timer=requestAnimationFrame(this.__onAnimationFrame._$bind(this))};_pro.__doAnimationFrame=_f;_pro._$play=function(){var _doPlayAnim=function(){this.__dtime=window.clearTimeout(this.__dtime);this.__begin.time=+(new Date);this.__timer=requestAnimationFrame(this.__onAnimationFrame._$bind(this))};return function(){this.__dtime=window.setTimeout(_doPlayAnim._$bind(this),this.__delay);return this}}();_pro._$stop=function(){this.__timer=cancelRequestAnimationFrame(this.__timer);this._$dispatchEvent("onstop",arguments);return this}})();
(function(){var _=NEJ.P,_o=NEJ.O,_u=_("nej.u"),_p=_("nej.ut"),_pro,_sup;if(!!_p._$$AnimBezier)return;_p._$$AnimBezier=NEJ.C();_pro=_p._$$AnimBezier._$extend(_p._$$Animation);_sup=_p._$$AnimBezier._$supro;_pro.__reset=function(_options){this.__supReset(_options);this.__duration=_options.duration||200;this.__epsilon=1/(200*this.__duration);this.__doParseTiming(_options.timing);this.__doCalPolynomialCoefficients()};_pro.__destroy=function(){this.__supDestroy();delete this.__pointer;delete this.__coefficient};_pro.__doParseTiming=function(){var _reg0=/^cubic\-bezier\((.*?)\)$/i,_reg1=/\s*,\s*/i,_pointers={linear:[0,0,1,1],ease:[.25,.1,.25,1],easein:[.42,0,1,1],easeout:[0,0,.58,1],easeinout:[0,0,.58,1]};var _doParseFloat=function(_value,_index,_list){_list[_index]=parseFloat(_value)};return function(_timing){_timing=(_timing||"").toLowerCase();this.__pointer=_pointers[_timing];if(_reg0.test(_timing)){this.__pointer=RegExp.$1.split(_reg1);_u._$forEach(this.__pointer,_doParseFloat)}if(!!this.__pointer)return;this.__pointer=_pointers.ease}}();_pro.__doCalPolynomialCoefficients=function(){var _pt=this.__pointer,_cx=3*_pt[0],_bx=3*(_pt[2]-_pt[0])-_cx,_ax=1-_cx-_bx,_cy=3*_pt[1],_by=3*(_pt[3]-_pt[1])-_cy,_ay=1-_cy-_by;this.__coefficient={ax:_ax,ay:_ay,bx:_bx,by:_by,cx:_cx,cy:_cy}};_pro.__doCalCubicBezierAtTime=function(){var _doSampleCurveX=function(_time,_coef){return((_coef.ax*_time+_coef.bx)*_time+_coef.cx)*_time};var _doSampleCurveY=function(_time,_coef){return((_coef.ay*_time+_coef.by)*_time+_coef.cy)*_time};var _doSampleCurveDerivativeX=function(_time,_coef){return(3*_coef.ax*_time+2*_coef.bx)*_time+_coef.cx};var _doSolveCurveX=function(_time,_epsilon,_coef){var t0,t1,t2,x2,d2,i;for(t2=_time,i=0;i<8;i++){x2=_doSampleCurveX(t2,_coef)-_time;if(Math.abs(x2)<_epsilon)return t2;d2=_doSampleCurveDerivativeX(t2,_coef);if(Math.abs(d2)<1e-6)break;t2=t2-x2/d2}t0=0;t1=1;t2=_time;if(t2<t0)return t0;if(t2>t1)return t1;while(t0<t1){x2=_doSampleCurveX(t2,_coef);if(Math.abs(x2-_time)<_epsilon)return t2;if(_time>x2)t0=t2;else t1=t2;t2=(t1-t0)*.5+t0}return t2};return function(_delta){return _doSampleCurveY(_doSolveCurveX(_delta/this.__duration,this.__epsilon,this.__coefficient),this.__coefficient)}}();_pro.__doAnimationFrame=function(_time){var _delta=_time-this.__begin.time,_percent=this.__doCalCubicBezierAtTime(_delta),_offset=_u._$fixed(this.__begin.offset*(1-_percent)+this.__end.offset*_percent,2),_stop=!1;if(_delta>=this.__duration){_offset=this.__end.offset;_stop=!0}this._$dispatchEvent("onupdate",{offset:1*_offset});return _stop};_pro._$stop=function(){this._$dispatchEvent("onupdate",{offset:this.__end.offset});_sup._$stop.apply(this,arguments);return this}})();
(function(){var _p=NEJ.P("nej.ut"),_proAnimLinear;if(!!_p._$$AnimLinear)return;_p._$$AnimLinear=NEJ.C();_proAnimLinear=_p._$$AnimLinear._$extend(_p._$$AnimBezier);_proAnimLinear.__reset=function(_options){_options=NEJ.X({},_options);_options.timing="linear";this.__supReset(_options)}})();
(function(){var _=NEJ.P,_p=_("nej.ut"),_pro;if(!!_p._$$AnimEaseIn)return;_p._$$AnimEaseIn=NEJ.C();_pro=_p._$$AnimEaseIn._$extend(_p._$$AnimBezier);_pro.__reset=function(_options){_options=NEJ.X({},_options);_options.timing="easein";this.__supReset(_options)}})();
(function(){var _=NEJ.P,_p=_("nej.ut"),_pro;if(!!_p._$$AnimEaseOut)return;_p._$$AnimEaseOut=NEJ.C();_pro=_p._$$AnimEaseOut._$extend(_p._$$AnimBezier);_pro.__reset=function(_options){_options=NEJ.X({},_options);_options.timing="easeout";this.__supReset(_options)}})();
(function(){var _=NEJ.P,_p=_("nej.ut"),_pro;if(!!_p._$$AnimEaseInOut)return;_p._$$AnimEaseInOut=NEJ.C();_pro=_p._$$AnimEaseInOut._$extend(_p._$$AnimBezier);_pro.__reset=function(_options){_options=NEJ.X({},_options);_options.timing="easeinout";this.__supReset(_options)}})();
(function(){var _=NEJ.P,_f=NEJ.F,_e=_("nej.e"),_v=_("nej.v"),_u=_("nej.u"),_x=_("nej.x"),_ut=_("nej.ut");var _animMap={linear:_ut._$$AnimLinear,"ease-in":_ut._$$AnimEaseIn,"ease-out":_ut._$$AnimEaseOut,"ease-in-out":_ut._$$AnimEaseInOut};var _extend=function(_o1,_o2,_override){for(var _i in _o2){if(_o1[_i]==null||_override)_o1[_i]=_o2[_i]}return _o1};_x._$hilight=function(_elem,_scrollTo){if(_scrollTo){_e._$scrollTo(_elem)}var _timingFunc=_animMap["linear"];var _rg="#ffff";var _options={from:{offset:140},to:{offset:255},duration:800,onstop:function(){_e._$setStyle(_elem,"background-color","#fff")},onupdate:function(_offset){var color=Math.round(_offset.offset).toString(16);if(color.length==1)color=color+color;_e._$setStyle(_elem,"background-color",_rg+color)}};_timingFunc._$allocate(_options)._$play()};_x.isChange=true})();
(function(){var _=NEJ.P,_o=NEJ.O,_r=NEJ.R,_e=_("nej.e"),_v=_("nej.v"),_u=_("nej.u"),_i=_("nej.ui"),_p=_("nej.ut"),_pro,_sup;if(!!_p._$$ListModuleWF)return;_p._$$ListModuleWF=NEJ.C();_pro=_p._$$ListModuleWF._$extend(_p._$$ListModule);_sup=_p._$$ListModuleWF._$supro;_pro.__reset=function(_options){this.__doResetMoreBtn(_options.more);this.__sbody=_e._$get(_options.sbody);this.__doInitDomEvent([[this.__sbody,"scroll",this.__onCheckScroll._$bind(this)]]);var _delta=_options.delta;if(_delta==null)_delta=30;this.__delta=Math.max(0,_delta);var _count=parseInt(_options.count)||0;this.__count=Math.max(0,_count);var _number=parseInt(_options.number)||0;if(_number>1&&_number<=_count){this.__number=_number}this.__supReset(_options)};_pro.__destroy=function(){this.__supDestroy();delete this.__nmore;delete this.__sbody;delete this.__endskr;delete this.__nexting};_pro.__getPageInfo=function(_offset,_length){var _point=this.__first+(this.__count-1)*this.__limit,_limit=this.__count*this.__limit;return _sup.__getPageInfo.call(this,_point,_offset,_limit,_length)};_pro.__doResetMoreBtn=function(_more){this.__nmore=_e._$get(_more);this.__doInitDomEvent([[this.__nmore,"click",this._$next._$bind(this)]])};_pro.__doCheckScroll=function(_element){if(this.__endskr||!_element)return;if(!_element.scrollHeight)_element=_e._$getPageBox();var _offset=_e._$offset(this.__lbox),_delta=_offset.y+this.__lbox.offsetHeight-_element.scrollTop-_element.clientHeight,_noscroll=_element.scrollHeight<=_element.clientHeight;if(_delta<=this.__delta||_noscroll&&!this.__endskr){this._$next()}};_pro.__onCheckScroll=function(_event){if(this.__endskr)return;this.__doCheckScroll(_v._$getElement(_event))};_pro.__doChangePage=function(_event){_sup.__doChangePage.apply(this,arguments);if(!_event.stopped){this.__doClearListBox();var _offset=0;if(_event.index>1){_offset=this.__first+((_event.index-1)*this.__count-1)*this.__limit}this.__offset=_offset;this._$next()}};_pro.__doGenRequestOpt=function(_options){if(!!this.__number){var _delta=_options.offset>0?this.__limit:this.__first,_limit=_delta+this.__limit*(this.__number-1);this.__offset=_options.offset+_limit;_options.data.limit=_limit;_options.limit=_limit;delete this.__number}return _options};_pro.__cbListLoad=function(_options){delete this.__nexting;_sup.__cbListLoad.apply(this,arguments);this._$resize()};_pro.__cbListChange=function(_event){if(_event.key!=this.__ropt.key)return;switch(_event.action){case"refresh":case"append":delete this.__nexting;break}_sup.__cbListChange.apply(this,arguments)};_pro.__doBeforeListLoad=function(){this.__doShowMessage("onbeforelistload","列表加载中...");_e._$setStyle(this.__nmore,"display","none")};_pro.__doBeforeListRender=function(_list,_offset,_limit){var _length=_list.length,_ended=_list.loaded?_offset+_limit>=_length:_offset+_limit>_length;this.__offset=Math.min(this.__offset,_length);_e._$setStyle(this.__nmore,"display",_ended?"none":"");if(_ended)this.__endskr=!0;if(this.__count>0){var _info=this.__getPageInfo(_offset,_list.length);if(this.__doSyncPager(_info.index,_info.total))return!0;var _delta=this.__first-this.__limit,_number=this.__count*this.__limit;this.__endskr=(_offset+_limit-_delta)%_number==0||_ended;_e._$setStyle(this.__nmore,"display",this.__endskr?"none":"");this.__doSwitchPagerShow(this.__endskr&&_info.total>1?"":"none")}};_pro.__doShowEmpty=function(){this.__offset=0;this.__endskr=!0;this.__doShowMessage("onemptylist","没有列表数据！")};_pro.__doShowListByJST=function(_html,_pos){this.__lbox.insertAdjacentHTML(_pos||"beforeEnd",_html)};_pro.__doShowListByItem=function(_items){this.__items=this.__items||[];if(_u._$isArray(_items)){_r.push.apply(this.__items,_items)}else{this.__items.push(_items)}};_pro.__cbItemAdd=function(_event){_e._$removeByEC(this.__ntip);this.__doCheckResult(_event,"onafteradd");var _flag=_event.flag;if(_event.stopped||!_flag)return;if(this.__count>0){this.__doRefreshByPager();return}this.__offset+=1;_flag==-1?this._$unshift(_event.data):this._$append(_event.data)};_pro.__cbItemDelete=function(_event){this.__doCheckResult(_event,"onafterdelete");if(_event.stopped)return;if(this.__count>0){this.__doRefreshByPager();return}var _id=_event.data[this.__iopt.pkey];if(!!this.__items){var _item=_e._$getItemById(_id),_index=_u._$indexOf(this.__items,_item);if(_index>=0){this.__items.splice(_index,1);this.__offset-=1}if(!!_item)_item._$recycle()}else{var _node=this._$getItemBody(_id);if(!!_node)this.__offset-=1;_e._$remove(_node)}if(this.__offset<=0)this._$next()};_pro.__cbAppendList=function(_offset,_limit){if(_offset!=this.__offset)return;if(this._$isLoaded()){this.__endskr=!1;this._$resize()}};_pro.__cbUnshiftList=function(_offset,_limit){if(_offset!=0)return;var _xlist=this.__cache._$getListInCache(this.__ropt.key);for(var i=_limit-1;i>=0;i--){this._$unshift(_xlist[i])}};_pro._$resize=function(){var _element=this.__sbody;if(!_element||this.__endskr)return;this.__doCheckScroll(this.__sbody)};_pro._$refresh=function(){delete this.__endskr;_sup._$refresh.apply(this,arguments)};_pro._$next=function(){if(!!this.__nexting)return;this.__nexting=!0;var _offset=this.__offset;this.__offset+=_offset==0?this.__first:this.__limit;this.__doChangeOffset(_offset)}})();
(function(){var _=NEJ.P,_o=NEJ.O,_u=_("nej.u"),_t=_("nej.ut"),_p=_("nej.ut.p"),_proNode;if(!!_p._$$Node)return;_p._$$Node=NEJ.C();_proNode=_p._$$Node._$extend(_t._$$Event);_proNode.__init=function(){this.__supInit();this.__children=[]};_proNode.__reset=function(_options){this.__supReset(_options);this._$setParent(_options.parent);this.__name=_options.name||"/";this.__data=_options.data||{}};_proNode.__destroy=function(){var _doRecycle=function(_node,_index,_list){_list.splice(_index,1);_node._$recycle()};return function(){this.__supDestroy();delete this.__data;_u._$reverseEach(this.__children,_doRecycle);this._$setParent(null)}}();_proNode.__isNode=function(_node){return _node instanceof _p._$$Node};_proNode.__hasChild=function(_child){return _u._$indexOf(this.__children,_child)>=0};_proNode._$getName=function(){return this.__name};_proNode._$getData=function(){return this.__data};_proNode._$getPath=function(){var _parent=this._$getParent(),_name=this._$getName();if(!_parent)return _name;var _pname=_parent._$getName();if(_pname!="/"&&_name!="/")_name="/"+_name;return _parent._$getPath()+_name};_proNode._$getParent=function(){return this.__parent};_proNode._$getChildren=function(){return this.__children};_proNode._$getChildByName=function(_name){var _index=_u._$indexOf(this.__children,function(_node){return _name==_node._$getName()});return this.__children[_index]||null};_proNode._$setParent=function(_parent){_parent=this.__isNode(_parent)?_parent:null;if(_parent==this.__parent)return;!!_parent?_parent._$appendChild(this):this.__parent._$removeChild(this);this.__parent=_parent;return this};_proNode._$appendChild=function(_child){_child=this.__isNode(_child)?_child:null;if(!_child||this.__hasChild(_child))return;this.__children.push(_child);_child._$setParent(this);return this};_proNode._$removeChild=function(_child){_child=this.__isNode(_child)?_child:null;var _index=_u._$indexOf(this.__children,_child);if(_index>=0){this.__children.splice(_index,1);_child._$setParent(null)}return _child}})();
(function(){var _=NEJ.P,_f=NEJ.F,_u=_("nej.u"),_t=_("nej.ut"),_p=_("nej.ut.p");var _doParseUMI=function(_root,_umi,_hanlder){var _node=_root,_hanlder=_hanlder||_f;if(_umi!="/"){_u._$forEach(_umi.split("/"),function(_name){var _result=_hanlder(_node,_name);if(!_result)return!0;_node=_result})}return _node};_p._$getNodeByUMI=function(){var _doSearch=function(_parent,_name){var _name=_name||"/",_pname=_parent._$getName();if(_pname=="/"&&_name=="/")return _parent;return _parent._$getChildByName(_name)};return function(_root,_umi){return _doParseUMI(_root,_umi,_doSearch)}}();_p._$appendNodeByUMI=function(){var _doBuild=function(_parent,_name){var _pname=_parent._$getName();if(!_name&&_pname=="/")return _parent;var _node=null;if(_pname!="/"){_node=_parent._$getChildByName("/");if(!_node){_node=_p._$$Node._$allocate();_parent._$appendChild(_node)}}if(!!_name){_node=_parent._$getChildByName(_name);if(!_node){_node=_p._$$Node._$allocate({name:_name});_parent._$appendChild(_node)}}return _node};return function(_root,_umi){return _doParseUMI(_root,_umi,_doBuild)}}();_p._$getCommonRoot=function(_root,_source,_target){if(!_source||!_target)return _root;var _source=_source._$getPath().split("/"),_target=_target._$getPath().split("/"),_difidx=_u._$forIn(_source,function(_value,_index){if(_value!=_target[_index])return!0})||1,_umi=_source.splice(0,_difidx).join("/")||"/";return _p._$getNodeByUMI(_root,_umi)};_p._$breadthFirstSearch=function(_root,_handler){var _arr=[_root],_node=_arr.shift(),_handler=_handler||_f;while(!!_node){_arr.push.apply(_arr,_node._$getChildren());_handler(_node);_node=_arr.shift()}return this};_p._$isNode=function(_node){return _node instanceof _p._$$Node};_p._$isModule=function(_module){return _module instanceof _t._$$Module};_p._$isUMIPrivate=function(){var _reg=/^\/?\?(?=\/|$)/;return function(_umi){return _reg.test(_umi||"")}}();_p._$path2umi=function(){var _reg=/[\?#]/;return function(_url){var _arr=(_url||"").trim().split(_reg),_prv=_arr[0]=="/"&&(_arr[1]||"").indexOf("/")==0;return _arr[0]+(_prv?"?"+_arr[1]:"")}}()})();
(function(){var _=NEJ.P,_o=NEJ.O,_g=_("nej.g"),_e=_("nej.e"),_j=_("nej.j"),_u=_("nej.u"),_t=_("nej.ut"),_p=_("nej.ut.p"),_proGroupManager;if(!!_p._$$GroupManager)return;_p._$$GroupManager=NEJ.C();_proGroupManager=_p._$$GroupManager._$extend(_t._$$Event);_proGroupManager.__reset=function(_options){this.__supReset(_options);this.__root=_options.root;this.__dispatcher=_options.dispatcher;this.__mpool={}};_proGroupManager.__destroy=function(){this.__supDestroy();delete this.__root;delete this.__mpool};_proGroupManager.__isStopped=function(_node){if(!_p._$isNode(_node))return!1;return!!_node._$getData().stopped||this.__isStopped(_node._$getParent())};_proGroupManager.__doClearStopped=function(_node){if(!_p._$isNode(_node))return;delete _node._$getData().stopped;this.__doClearStopped(_node._$getParent())};_proGroupManager.__doModuleHide=function(_from,_to){this.__doModuleCheck("onhide",_from,_to)};_proGroupManager.__doModuleShow=function(_from,_to){this.__doModuleCheck("onshow",_from,_to);this.__doModuleAction(_from)};_proGroupManager.__doModuleRefresh=function(_node){this.__doModuleCheck("onrefresh",_node);this.__doModuleAction(_node)};_proGroupManager.__doModuleCheck=function(_type,_from,_to){if(_from==_to||!_p._$isNode(_from))return;if(_type=="onhide")this.__doModuleDispatch(_from,_type);this.__doModuleCheck(_type,_from._$getParent(),_to);if(_type!="onhide")this.__doModuleDispatch(_from,_type)};_proGroupManager.__doModuleAction=function(_node){if(!_p._$isNode(_node))return!0;var _data=_node._$getData(),_action=_data.action,_module=_data.module;if(!this.__doModuleAction(_node._$getParent())||!!_action&&_u._$isString(_module))return!1;if(!!_module&&!!_module._$allocate&&!!_action&&_action!="onhide"){if(this.__isStopped(_node))return;var _options={umi:_node._$getPath(),composite:_data.composite,dispatcher:this.__dispatcher};_module=_module._$allocate(_options);if(_p._$isModule(_module)){_data.module=_module;this.__doModuleDispatch(_node,"onshow")}else{delete _data.module}}delete _data.action;return!0};_proGroupManager.__doModuleDispatch=function(){var _getParentExport=function(_node){var _module;_node=_node._$getParent();while(!!_node){_module=_node._$getData().module;if(_p._$isModule(_module)){return _module._$getExportData()}_node=_node._$getParent()}return null};return function(_node,_name){if(!_p._$isNode(_node))return;var _data=_node._$getData(),_module=_data.module,_nothide=_name!="onhide";if(_p._$isModule(_module)){if(_nothide&&this.__isStopped(_node))return;var _event=!this.__source?_data.event:this.__source._$getData().event;if(!!_event){_event.umi=_node._$getPath();_event.data=_getParentExport(_node)}var _xname=_data.xname||"onhide";if(_name=="onshow"&&_xname!="onhide")_name="onrefresh";if(_name=="onrefresh"&&_xname=="onhide")_name="onshow";_data.xname=_name;_module._$dispatchEvent(_name,_event||{});if(_nothide&&!!_event&&!!_event.pos&&_event.umi==_event.target){_e._$scrollTo(_event.pos)}if(_nothide&&!!_event){_data.stopped=_event.stopped;delete _event.stopped}}else if(!!_module){_data.action=_name;if(_name=="onshow"&&_u._$isString(_module)){var _element=_e._$get("umi://"+_module);if(!!_element){_e._$parseTemplate(_element)}else{var _config=location.config||_o;_j._$loadHtml((_config.root||"")+_module,{version:(_config.ver||_o)[_module],onloaded:_e._$parseTemplate})}}}}}();_proGroupManager._$hasUMI=function(_umi){return!!this.__mpool[_umi]};_proGroupManager._$addUMI=function(_umi){this.__mpool[_umi]=!0;return this};_proGroupManager._$delUMI=function(_umi){delete this.__mpool[_umi];return this};_proGroupManager._$loadedUMI=function(_umi){if(this._$hasUMI(_umi))this.__doModuleAction(_p._$getNodeByUMI(this.__root,_umi));return this};_proGroupManager._$dispatchUMI=function(_umi){if(this._$hasUMI(_umi)){var _node=_p._$getNodeByUMI(this.__root,_umi);this.__doClearStopped(_node);this.__doModuleShow(_node)}return this};_proGroupManager._$hideUMI=function(_umi){if(this._$hasUMI(_umi)){this.__doModuleHide(_p._$getNodeByUMI(this.__root,_umi))}return this}})();
(function(){var _=NEJ.P,_o=NEJ.O,_f=NEJ.F,_e=_("nej.e"),_p=_("nej.ut.p"),_proSingleGroupManager;if(!!_p._$$SingleGroupManager)return;_p._$$SingleGroupManager=NEJ.C();_proSingleGroupManager=_p._$$SingleGroupManager._$extend(_p._$$GroupManager);_proSingleGroupManager.__reset=function(_options){this.__supReset(_options);this.__classed=!!_options.classed};_proSingleGroupManager.__destroy=function(){this.__supDestroy();delete this.__cmroot;delete this.__source};_proSingleGroupManager._$exitable=function(_event){if(!this.__source)return!0;var _module=this.__source._$getData().module;if(_p._$isModule(_module))_module._$dispatchEvent("onbeforehide",_event);return!_event.stopped};_proSingleGroupManager._$refresh=function(){if(!this.__source)return;window.setTimeout(this._$dispatchUMI._$bind(this,this.__source._$getPath()),0)};_proSingleGroupManager._$dispatchUMI=function(_umi){if(!this._$hasUMI(_umi))return this;var _target=_p._$getNodeByUMI(this.__root,_umi),_data=_target._$getData();if(!_data.module)return this;var _source=this.__source,_event=_data.event,_odata=_o;this.__source=_target;this.__doClearStopped(_target);if(!!_source){_odata=_source._$getData().event;_event.referer=_odata.href||""}if(_source==_target){this.__doModuleRefresh(this.__source);return this}this.__cmroot=_p._$getCommonRoot(this.__root,_source,_target);if(_source!=null){if(_source!=this.__cmroot){if(this.__classed)_e._$delClassName(document.body,_odata.clazz);this.__doModuleHide(_source,this.__cmroot)}this.__doModuleRefresh(this.__cmroot)}else{this.__doModuleShow(this.__cmroot)}if(_target!=this.__cmroot){if(this.__classed)_e._$addClassName(document.body,_event.clazz);this.__doModuleShow(_target,this.__cmroot)}return this};_proSingleGroupManager._$loadedUMI=function(_umi){if(this._$hasUMI(_umi))this.__doModuleAction(this.__source);return this};_proSingleGroupManager._$hideUMI=_f})();
(function(){var _=NEJ.P,_o=NEJ.O,_f=NEJ.F,_e=_("nej.e"),_v=_("nej.v"),_u=_("nej.u"),_p=_("nej.ut"),_d=_("nej.ut.p"),_pro;if(!!_p._$$Dispatcher)return;_p._$$Dispatcher=NEJ.C();_pro=_p._$$Dispatcher._$extend(_p._$$Event);_pro.__init=function(){this.__supInit();var _seed=+(new Date);this.__pbseed="pb-"+_seed;this.__pvseed="pv-"+_seed};_pro.__reset=function(_options){this.__dtmp={};this.__rest=!!_options.rest;this.__root=_d._$$Node._$allocate();this.__config={m:{},mg:{},r:[],rr:{},al:{},am:{}};this.__groups={};this.__doBuildGroup(this.__pbseed);this.__groups[this.__pvseed]=_d._$$GroupManager._$allocate({root:this.__root,dispatcher:this});this.__doInitDomEvent([[location,"urlchange",this.__onURLChange._$bind(this)]]);this.__supReset(_options);this._$rule(_options.rules);this._$regist(_options.modules)};_pro.__destroy=function(){var _doRecycle=function(_group,_key,_map){delete _map[_key];_group._$recycle()};return function(){delete this.__config;this.__root=this.__root._$recycle();_u._$forIn(this.__groups,_doRecycle);this.__supDestroy()}}();_pro.__setModuleConf=function(_umi,_key,_value){var _mconf=this.__config.m[_umi];if(!_mconf){_mconf={};this.__config.m[_umi]=_mconf}_mconf[_key]=_value};_pro.__getModuleConf=function(_umi,_key){var _mconf=this.__config.m[_umi];return!_mconf?"":_mconf[_key]};_pro.__doBuildGroup=function(_gid){if(!_gid)return;var _group=this.__groups[_gid];if(!_group){_group=_d._$$SingleGroupManager._$allocate({root:this.__root,dispatcher:this,classed:_gid==this.__pbseed});this.__groups[_gid]=_group}return _group};_pro.__doAddUMI2Group=function(_umi,_gid){var _group=this.__doBuildGroup(_gid);if(!_group){_gid=_d._$isUMIPrivate(_umi)?this.__pvseed:this.__pbseed;_group=this.__groups[_gid]}_group._$addUMI(_umi);this.__config.mg[_umi]=_gid};_pro.__doRewriteUMI=function(){var _reg=/\$\d/;return function(_umi,_href){var _result;_u._$forIn(this.__config.r,function(_config){_u._$forIn(_config,function(_value,_key){if(!!_value.test&&(_value.test(_umi)||_value.test(_href))){_result=_reg.test(_key)?_umi.replace(_value,_key):_key;return!0}if(_value===_umi||_value===_href){_result=_key;return!0}});return!!_result});return _result||_umi}}();_pro.__onURLChange=function(){var _trim=/(?:^\/+)|(?:\/+$)/gi,_reg0=/#(\$.*?)$/;var _doParseRestParam=function(_umi,_node){var _path=_node._$getPath(),_umi=_umi.replace(_path,"").replace(_trim,"");return _umi.split("/")};var _doTryGroupId=function(_umi,_map){var _value,_arr=_umi.split("/");while(_arr.length>0){if(!_arr[_arr.length-1]){_arr.pop()}else{_arr[_arr.length-1]=""}_value=_map[_arr.join("/")];if(!!_value)return _value}return""};return function(_location){if(_location.path.indexOf("$")==0)return;var _input=this.__dtmp[_location.path];delete this.__dtmp[_location.path];this._$dispatchEvent("onbeforechange",_location);var _umi=this.__doRewriteUMI(_location.path,_location.href),_gid=this.__config.mg[_umi];if(!_gid&&this.__rest)_gid=_doTryGroupId(_umi,this.__config.mg);if(!_gid&&!_d._$isUMIPrivate(_umi)){_umi=this.__config.rr["404"];_gid=this.__config.mg[_umi]}if(!_gid&&this.__rest)_gid=_doTryGroupId(_umi,this.__config.mg);if(!_gid)return;var _node=_d._$getNodeByUMI(this.__root,_umi),_prst=null;if(this.__rest)_prst=_doParseRestParam(_umi,_node);var _source=_umi;_umi=_node._$getPath();_node._$getData().event={target:_umi,source:_source,href:_location.href,param:_location.query,input:_input,prest:_prst,clazz:this.__getModuleConf(_umi,"clazz"),pos:_reg0.test(_location.href)?RegExp.$1:""};var _title=this.__getModuleConf(_source,"title");if(!!_title)document.title=_title;this.__groups[_gid]._$dispatchUMI(_umi)}}();_pro.__onClickDelegate=function(){var _doCheckUMI=function(_url,_href){if(!_url)return;var _info=location.parse(_url);this._$dispatchEvent("onbeforechange",_info);var _umi=this.__doRewriteUMI(_info.path,_href||_info.href);return this.__groups[this.__pbseed]._$hasUMI(_umi)};var _doParseUMI=function(_node){var _umi=_e._$dataset(_node,"href");if(!!_umi)return _umi;var _href=_e._$attr(_node,"href");if(!!_href&&!_e._$dataset(_node,"notUmi")){var _arr=_href.split("#");_arr.shift();var _umi=_arr.join("#");if(_doCheckUMI.call(this,_umi,_href)){return _umi}if(_doCheckUMI.call(this,_href)){var _info=location.parse(_href);return _info.path+"?"+_u._$object2query(_info.query)}}};var _isNode=function(_node){return!!_doParseUMI.call(this,_node)};return function(_event){var _element=_v._$getElement(_event,_isNode._$bind(this));if(!!_element){_v._$stopDefault(_event);this._$redirect(_doParseUMI.call(this,_element))}}}();_pro.__onActionDelegate=function(_event){var _am=this.__config.am,_conf=_am[_event.type];if(!_conf)return;var _element=_v._$getElement(_event,"d:resAction");if(!_element)return;var _action=_e._$dataset(_element,"resAction"),_handler=_conf[_action];if(!_handler)return;var _options={action:_action,target:_element,id:_e._$dataset(_element,"resId"),type:_e._$dataset(_element,"resType"),extra:_e._$dataset(_element,"resExtra")};this._$dispatchEvent("onbeforeaction",{event:_event,target:_element,result:_options});_handler.call(this,_options)};_pro._$rule=function(){var _buildin=["404"];var _doRegistRule=function(_config,_key){this._$rule(_key,_config)};var _doRegistTitle=function(_title,_umi){this.__setModuleConf(_umi,"title",_title)};var _doRegistAlias=function(_umi,_alias){this.__config.al[_alias]=_umi};var _doRegistRewrite=function(_config){if(!_config)return;this.__config.r.push(_config);_u._$forEach(_buildin,function(_key){if(!_config[_key])return;this.__config.rr[_key]=_config[_key];delete _config[_key]},this)};var _doRegistAction=function(_action,_name){var _am=this.__config.am;var _event="click",_handler=_action,_name=(_name||"").toLowerCase();if(_u._$isObject(_action)){_event=_action.event||_event;_handler=_action.value}if(_u._$isString(_handler)){_handler=function(_umi,_options){this._$redirect(_umi,{force:!0,input:_options})}._$bind(this,_handler)}else if(_u._$isFunction(_handler)){_handler=_handler._$aop(null,function(_event){var _result=_event.value;if(_u._$isString(_result)){this._$redirect(_result,{force:!0,input:_event.args[0]})}}._$bind(this))}if(_u._$isFunction(_handler)){if(!_am[_event]){this.__doInitDomEvent([[document,_event,this.__onActionDelegate._$bind(this)]]);_am[_event]={}}_am[_event][_name]=_handler}};var _fmap={title:function(_config){_u._$forIn(_config,_doRegistTitle,this)},rewrite:function(_config){if(!_u._$isArray(_config)){_doRegistRewrite.call(this,_config)}else{_u._$forEach(_config,_doRegistRewrite,this)}},alias:function(_config){_u._$forIn(_config,_doRegistAlias,this)},action:function(_config){_u._$forIn(_config,_doRegistAction,this)}};return function(_key,_config){if(_u._$isArray(_key)){_config=_key;_key="rewrite"}else if(!_u._$isString(_key)){_u._$forIn(_key,_doRegistRule,this);return this}(_fmap[_key]||_f).call(this,_config);return this}}();_pro._$regist=function(){var _doRegistUMI=function(_config,_umi){this._$regist(_umi,_config)};var _isModuleClass=function(_module){return!!_module&&!!_module._$extend};return function(_umi,_config){if(!_u._$isString(_umi)){_u._$forIn(_umi,_doRegistUMI,this);return this}var _data=_d._$appendNodeByUMI(this.__root,_umi)._$getData(),_module=_data.module;if(_d._$isModule(_module)||_isModuleClass(_module))return this;var _gid=this.__config.mg[_umi],_module;if(_u._$isString(_config)||_isModuleClass(_config)){_module=_config}else{_config=_config||_o;_gid=_config.gid;_module=_config.module;if(!!_config.title)this.__setModuleConf(_umi,"title",_config.title);if(!!_config.clazz)this.__setModuleConf(_umi,"clazz",_config.clazz);if(!!_config.composite)_data.composite=_config.composite}this.__doAddUMI2Group(_umi,_gid);_data.module=_module;return this}}();_pro._$message=function(){var _doSendMessage=function(_node,_message){var _module=_node._$getData().module;if(_d._$isModule(_module))_module._$dispatchEvent("onmessage",_message)};var _fmap=[_doSendMessage,function(_target,_message){var _from=_message.from;while(!!_target){if(_target._$getPath()!=_from)_doSendMessage(_target,_message);_target=_target._$getParent()}},function(_target,_message){var _from=_message.from;_d._$breadthFirstSearch(_target,function(_node){if(_node._$getPath()!=_from)_doSendMessage(_node,_message)})}];return function(_message){var _event=NEJ.X({},_message),_target=_d._$getNodeByUMI(this.__root,_event.to);_event.path=_target._$getPath();(_fmap[_event.mode]||_fmap[0]).call(this,_target,_event)}}();_pro._$publish=function(_type,_message){var _message=NEJ.X({},_message);_message.type=_type||"";this._$dispatchEvent((_message.from||"")+":"+_message.type,_message)};_pro._$subscribe=function(_umi,_type,_callback){_umi=this.__config.al[_umi]||_umi;this._$pushEvent((_umi||"")+":"+(_type||""),_callback)};_pro._$unsubscribe=function(_umi,_type,_callback){_umi=this.__config.al[_umi]||_umi;this._$delEvent((_umi||"")+":"+(_type||""),_callback)};_pro._$apply=function(_url){return this._$redirect(_url)};_pro._$hide=function(_umi){var _gid=this.__config.mg[_umi];if(_gid==this.__pvseed){this.__groups[_gid]._$hideUMI(_umi)}return this};_pro._$redirect=function(_url,_options){_options=_options||_o;var _umi=_d._$path2umi(_url),_location=location.parse(_url);this.__dtmp[_location.path]=_options.input;if(_d._$isUMIPrivate(_umi)){this.__onURLChange(_location)}else{var _group=this.__groups[this.__pbseed],_event={target:_location,umi:_umi};if(!!_group._$exitable(_event)){if(location.same(_url)&&!!_options.force){this.__onURLChange(_location)}else{location.ignored=!!_options.ignored;location.redirect(_url,!!_options.replace)}}}return this};_pro._$refresh=function(_url){if(!!_url){this._$redirect(_url,{replace:!0,force:!0})}else{this.__groups[this.__pbseed]._$refresh()}};_pro._$delegate=function(){this.__doInitDomEvent([[document,"click",this.__onClickDelegate._$bind(this)]]);return this};_pro._$active=function(){location.active();return this};_pro._$loaded=function(_umi,_module){_umi=this.__config.al[_umi]||_umi;if(!_u._$isArray(_umi)){this._$regist(_umi,_module);this.__groups[this.__config.mg[_umi]]._$loadedUMI(_umi)}else{_u._$forEach(_umi,function(_key){this._$loaded(_key,_module)},this)}return this};_e._$startup=function(_options){window.dispatcher=_p._$$Dispatcher._$getInstance(_options);_e._$parseTemplate((_options||_o).tid||"template-box",location.config);_v._$addEvent(document,"templateready",function(){window.setTimeout(dispatcher._$active._$bind(dispatcher),0)});return window.dispatcher}})();
(function(){var _=NEJ.P,_f=NEJ.F,_h=_("nej.h");_h.__getItemInStorage=function(_key){return localStorage.getItem(_key)};_h.__setItemToStorage=function(_key,_value){localStorage.setItem(_key,_value)};_h.__removeItemFromStorage=function(_key){localStorage.removeItem(_key)};_h.__clearStorage=function(){localStorage.clear()};_h.__getAllKeys=function(){var _result=[];for(var i=0,l=localStorage.length;i<l;i++)_result.push(localStorage.key(i));return _result};_h.__initStorage=function(){(document.onstorageready||_f)()};_h.__isStorageReady=function(){return!0}})();
(function(){var _=NEJ.P,_p=_("nej.p"),_c=_("nej.c"),_h=_("nej.h"),_localStorage;if(_p._$NOT_PATCH.trident||!!window.localStorage)return;var __doInitFlash=function(){var _div,_timer;var _doInitDOM=function(){_div=document.createElement("div");NEJ.X(_div.style,{position:"absolute",top:0,left:0,width:"1px",height:"1px",zIndex:1e4,overflow:"hidden"});document.body.insertAdjacentElement("afterBegin",_div);_div.innerHTML='<object classid="clsid:d27cdb6e-ae6d-11cf-96b8-444553540000" width="1" height="1"id="f-'+ +(new Date)+'" codebase="http://fpdownload.macromedia.com/get/flashplayer/current/swflash.cab"><param name="movie" value="'+_c._$get("storage.swf")+'"/><param name="AllowScriptAccess" value="sameDomain"/></object>'};var _doCheckFlash=function(){_timer=window.clearTimeout(_timer);var _flash=_div.getElementsByTagName("object")[0];if(!!_flash.initStorage){delete _div;_localStorage=_flash;_localStorage.initStorage("nej-storage");(document.onstorageready||_f)();return}_timer=window.setTimeout(_doCheckFlash,500)};return function(){if(!!_localStorage)return;_doInitDOM();_doCheckFlash()}}();_h.__getItemInStorage=_h.__getItemInStorage._$aop(function(_event){_event.stopped=!0;if(!_localStorage)return;_event.value=_localStorage.getItem(_event.args[0])});_h.__setItemToStorage=_h.__setItemToStorage._$aop(function(_event){_event.stopped=!0;if(!_localStorage)return;var _args=_event.args;_localStorage.setItem(_args[0],_args[1])});_h.__removeItemFromStorage=_h.__removeItemFromStorage._$aop(function(_event){_event.stopped=!0;if(!_localStorage)return;_localStorage.removeItem(_event.args[0])});_h.__clearStorage=_h.__clearStorage._$aop(function(_event){_event.stopped=!0;if(!!_localStorage)_localStorage.clear()});_h.__initStorage=_h.__initStorage._$aop(function(_event){_event.stopped=!0;__doInitFlash()});_h.__isStorageReady=_h.__isStorageReady._$aop(function(_event){_event.stopped=!0;_event.value=!!_localStorage})})();
(function(){var _=NEJ.P,_u=_("nej.u"),_v=_("nej.v"),_h=_("nej.h"),_j=_("nej.j"),_t=_("nej.ut"),_cache={};_j._$setDataInStorage=function(_key,_value){var _sval=JSON.stringify(_value);try{_h.__setItemToStorage(_key,_sval)}catch(ex){console.error(ex.message);console.error(ex)}if(_sval!=_h.__getItemInStorage(_key))_cache[_key]=_value;return this};_j._$getDataInStorage=function(_key){var _data=JSON.parse(_h.__getItemInStorage(_key)||"null");return _data==null?_cache[_key]:_data};_j._$getDataInStorageWithDefault=function(_key,_value){var _data=_j._$getDataInStorage(_key);if(_data==null){_data=_value;_j._$setDataInStorage(_key,_data)}return _data};_j._$delDataInStorage=function(_key){delete _cache[_key];_h.__removeItemFromStorage(_key);return this};_j._$clearDataInStorage=function(){var _doRemove=function(_item,_key,_map){delete _map[_key]};return function(){_u._$forIn(_cache,_doRemove);_h.__clearStorage();return this}}();_j._$cloneDataInStorage=function(_result){_result=_result||{};_u._$forEach(_h.__getAllKeys(),function(_key){_result[_key]=_j._$getDataInStorage(_key)});return _result};_t._$$CustomEvent._$allocate({element:document,event:"storageready",oneventadd:function(){if(_h.__isStorageReady()){document.onstorageready()}}});var __doFlushTempData=function(){var _doFlush=function(_value,_key,_map){_h.__setItemToStorage(_key,JSON.stringify(_value));delete _map[_key]};return function(){_u._$forIn(_cache,_doFlush)}}();_v._$addEvent(document,"storageready",__doFlushTempData);_h.__initStorage()})();
(function(){var using=NEJ.P;var u=using("nej.u");var j=using("nej.j");var t=using("nej.ut");var v=using("nej.v");var dd=using("dd.data");var proto;dd._$$AccountCache=NEJ.C();proto=dd._$$AccountCache._$extend(dd._$$Cache);proto._$setNote=function(){j._$requestByREST("/rest/accounts/setNote",{method:"GET",type:"json",onload:this._$dispatchEvent._$bind(this,"onNoteLoad")})};proto._$saveApply=function(data){j._$requestByREST("/rest/accounts/apply",{method:"PUT",data:data,type:"json",onload:this._$dispatchEvent._$bind(this,"onApplyLoad")})};proto._$authenNoticed=function(data){j._$requestByREST("/rest/accounts/noticed",{method:"GET",type:"json",onload:this._$dispatchEvent._$bind(this,"onNoticedLoad")})};proto._$getYid=function(){j._$requestByREST("/rest/accounts/getYid",{method:"GET",type:"json",onload:this._$dispatchEvent._$bind(this,"getyid"),onerror:this._$dispatchEvent._$bind(this,"getyid")})};proto._$updatePassword=function(data,callback){if(data)delete data.password1;j._$requestByREST("/rest/accounts/updatePassword",{method:"POST",type:"json",data:data,onload:callback||this._$dispatchEvent._$bind(this,"getyid"),onerror:callback||this._$dispatchEvent._$bind(this,"getyid")})};proto._$sendSms=function(obj){j._$requestByREST("/rest/sms",{method:"POST",type:"json",data:obj,onload:this._$dispatchEvent._$bind(this,"smsload")})};proto._$verifyMobile=function(obj){j._$requestByREST("/rest/accounts/verify/sms",{method:"POST",type:"json",data:obj,onload:this._$dispatchEvent._$bind(this,"verifyload")})}})();
(function(){var p=NEJ.P("nej.u");var __chrsz=8;var __rol=function(_number,_count){return _number<<_count|_number>>>32-_count};var __add=function(x,y){var _lsw=(x&65535)+(y&65535),_msw=(x>>16)+(y>>16)+(_lsw>>16);return _msw<<16|_lsw&65535};var __sha1ft=function(t,b,c,d){if(t<20)return b&c|~b&d;if(t<40)return b^c^d;if(t<60)return b&c|b&d|c&d;return b^c^d};var __sha1kt=function(t){if(t<20)return 1518500249;if(t<40)return 1859775393;if(t<60)return-1894007588;return-899497514};var __str2bin=function(){var _lmove=function(i){return i%32},_bmove=function(i){return 32-__chrsz-i%32};return function(_str,_little){var _bin=[],_mask=(1<<__chrsz)-1,_move=_little?_lmove:_bmove;for(var i=0,l=_str.length*__chrsz;i<l;i+=__chrsz)_bin[i>>5]|=(_str.charCodeAt(i/__chrsz)&_mask)<<_move(i);return _bin}}();var __bin2hex=function(){var _hextab="0123456789abcdef",_lmove=function(i){return i%4},_bmove=function(i){return 3-i%4};return function(_binarray,_little){var _arr=[],_move=_little?_lmove:_bmove;for(var i=0,l=_binarray.length*4;i<l;i++){_arr.push(_hextab.charAt(_binarray[i>>2]>>_move(i)*8+4&15)+_hextab.charAt(_binarray[i>>2]>>_move(i)*8&15))}return _arr.join("")}}();var __bin2str=function(){var _lmove=function(i){return i%32},_bmove=function(i){return 32-__chrsz-i%32};return function(_bin,_little){var _arr=[],_mask=(1<<__chrsz)-1,_move=_little?_lmove:_bmove;for(var i=0,l=_bin.length*32;i<l;i+=__chrsz)_arr.push(String.fromCharCode(_bin[i>>5]>>>_move(i)&_mask));return _arr.join("")}}();var __bin2b64=function(){var _b64pad="=",_b64tab="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",_lmove=function(i){return i%4},_bmove=function(i){return 3-i%4};return function(_binarray,_little){var _arr=[],_move=_little?_lmove:_bmove;for(var i=0,_triplet;i<_binarray.length*4;i+=3){_triplet=(_binarray[i>>2]>>8*_move(i)&255)<<16|(_binarray[i+1>>2]>>8*_move(i+1)&255)<<8|_binarray[i+2>>2]>>8*_move(i+2)&255;for(var j=0;j<4;j++)_arr.push(i*8+j*6>_binarray.length*32?_b64pad:_b64tab.charAt(_triplet>>6*(3-j)&63))}return _arr.join("")}}();var __md5cm=function(q,a,b,x,s,t){return __add(__rol(__add(__add(a,q),__add(x,t)),s),b)};var __md5ff=function(a,b,c,d,x,s,t){return __md5cm(b&c|~b&d,a,b,x,s,t)};var __md5gg=function(a,b,c,d,x,s,t){return __md5cm(b&d|c&~d,a,b,x,s,t)};var __md5hh=function(a,b,c,d,x,s,t){return __md5cm(b^c^d,a,b,x,s,t)};var __md5ii=function(a,b,c,d,x,s,t){return __md5cm(c^(b|~d),a,b,x,s,t)};var __data2md5=function(x,y){x[y>>5]|=128<<y%32;x[(y+64>>>9<<4)+14]=y;var a=1732584193,b=-271733879,c=-1732584194,d=271733878;for(var i=0,l=x.length,_oa,_ob,_oc,_od;i<l;i+=16){_oa=a;_ob=b;_oc=c;_od=d;a=__md5ff(a,b,c,d,x[i+0],7,-680876936);d=__md5ff(d,a,b,c,x[i+1],12,-389564586);c=__md5ff(c,d,a,b,x[i+2],17,606105819);b=__md5ff(b,c,d,a,x[i+3],22,-1044525330);a=__md5ff(a,b,c,d,x[i+4],7,-176418897);d=__md5ff(d,a,b,c,x[i+5],12,1200080426);c=__md5ff(c,d,a,b,x[i+6],17,-1473231341);b=__md5ff(b,c,d,a,x[i+7],22,-45705983);a=__md5ff(a,b,c,d,x[i+8],7,1770035416);d=__md5ff(d,a,b,c,x[i+9],12,-1958414417);c=__md5ff(c,d,a,b,x[i+10],17,-42063);b=__md5ff(b,c,d,a,x[i+11],22,-1990404162);a=__md5ff(a,b,c,d,x[i+12],7,1804603682);d=__md5ff(d,a,b,c,x[i+13],12,-40341101);c=__md5ff(c,d,a,b,x[i+14],17,-1502002290);b=__md5ff(b,c,d,a,x[i+15],22,1236535329);a=__md5gg(a,b,c,d,x[i+1],5,-165796510);d=__md5gg(d,a,b,c,x[i+6],9,-1069501632);c=__md5gg(c,d,a,b,x[i+11],14,643717713);b=__md5gg(b,c,d,a,x[i+0],20,-373897302);a=__md5gg(a,b,c,d,x[i+5],5,-701558691);d=__md5gg(d,a,b,c,x[i+10],9,38016083);c=__md5gg(c,d,a,b,x[i+15],14,-660478335);b=__md5gg(b,c,d,a,x[i+4],20,-405537848);a=__md5gg(a,b,c,d,x[i+9],5,568446438);d=__md5gg(d,a,b,c,x[i+14],9,-1019803690);c=__md5gg(c,d,a,b,x[i+3],14,-187363961);b=__md5gg(b,c,d,a,x[i+8],20,1163531501);a=__md5gg(a,b,c,d,x[i+13],5,-1444681467);d=__md5gg(d,a,b,c,x[i+2],9,-51403784);c=__md5gg(c,d,a,b,x[i+7],14,1735328473);b=__md5gg(b,c,d,a,x[i+12],20,-1926607734);a=__md5hh(a,b,c,d,x[i+5],4,-378558);d=__md5hh(d,a,b,c,x[i+8],11,-2022574463);c=__md5hh(c,d,a,b,x[i+11],16,1839030562);b=__md5hh(b,c,d,a,x[i+14],23,-35309556);a=__md5hh(a,b,c,d,x[i+1],4,-1530992060);d=__md5hh(d,a,b,c,x[i+4],11,1272893353);c=__md5hh(c,d,a,b,x[i+7],16,-155497632);b=__md5hh(b,c,d,a,x[i+10],23,-1094730640);a=__md5hh(a,b,c,d,x[i+13],4,681279174);d=__md5hh(d,a,b,c,x[i+0],11,-358537222);c=__md5hh(c,d,a,b,x[i+3],16,-722521979);b=__md5hh(b,c,d,a,x[i+6],23,76029189);a=__md5hh(a,b,c,d,x[i+9],4,-640364487);d=__md5hh(d,a,b,c,x[i+12],11,-421815835);c=__md5hh(c,d,a,b,x[i+15],16,530742520);b=__md5hh(b,c,d,a,x[i+2],23,-995338651);a=__md5ii(a,b,c,d,x[i+0],6,-198630844);d=__md5ii(d,a,b,c,x[i+7],10,1126891415);c=__md5ii(c,d,a,b,x[i+14],15,-1416354905);b=__md5ii(b,c,d,a,x[i+5],21,-57434055);a=__md5ii(a,b,c,d,x[i+12],6,1700485571);d=__md5ii(d,a,b,c,x[i+3],10,-1894986606);c=__md5ii(c,d,a,b,x[i+10],15,-1051523);b=__md5ii(b,c,d,a,x[i+1],21,-2054922799);a=__md5ii(a,b,c,d,x[i+8],6,1873313359);d=__md5ii(d,a,b,c,x[i+15],10,-30611744);c=__md5ii(c,d,a,b,x[i+6],15,-1560198380);b=__md5ii(b,c,d,a,x[i+13],21,1309151649);a=__md5ii(a,b,c,d,x[i+4],6,-145523070);d=__md5ii(d,a,b,c,x[i+11],10,-1120210379);c=__md5ii(c,d,a,b,x[i+2],15,718787259);b=__md5ii(b,c,d,a,x[i+9],21,-343485551);a=__add(a,_oa);b=__add(b,_ob);c=__add(c,_oc);d=__add(d,_od)}return[a,b,c,d]};var __data2hmacmd5=function(_key,_data){var _bkey=__str2bin(_key,!0);if(_bkey.length>16)_bkey=__data2md5(_bkey,_key.length*__chrsz);var _ipad=Array(16),_opad=Array(16);for(var i=0;i<16;i++){_ipad[i]=_bkey[i]^909522486;_opad[i]=_bkey[i]^1549556828}var _hash=__data2md5(_ipad.concat(__str2bin(_data,!0)),512+_data.length*__chrsz);return __data2md5(_opad.concat(_hash),512+128)};var __data2sha1=function(x,_length){x[_length>>5]|=128<<24-_length%32;x[(_length+64>>9<<4)+15]=_length;var w=Array(80),a=1732584193,b=-271733879,c=-1732584194,d=271733878,e=-1009589776;for(var i=0,l=x.length,_olda,_oldb,_oldc,_oldd,_olde;i<l;i+=16){_olda=a;_oldb=b;_oldc=c;_oldd=d;_olde=e;for(var j=0;j<80;j++){w[j]=j<16?x[i+j]:__rol(w[j-3]^w[j-8]^w[j-14]^w[j-16],1);var t=__add(__add(__rol(a,5),__sha1ft(j,b,c,d)),__add(__add(e,w[j]),__sha1kt(j)));e=d;d=c;c=__rol(b,30);b=a;a=t}a=__add(a,_olda);b=__add(b,_oldb);c=__add(c,_oldc);d=__add(d,_oldd);e=__add(e,_olde)}return[a,b,c,d,e]};var __data2hmacsha1=function(_key,_data){var _bkey=__str2bin(_key);if(_bkey.length>16)_bkey=__data2sha1(_bkey,_key.length*__chrsz);var _ipad=Array(16),_opad=Array(16);for(var i=0;i<16;i++){_ipad[i]=_bkey[i]^909522486;_opad[i]=_bkey[i]^1549556828}var _hash=__data2sha1(_ipad.concat(__str2bin(_data)),512+_data.length*__chrsz);return __data2sha1(_opad.concat(_hash),512+160)};p._$hmacsha12hex=function(_key,_data){return __bin2hex(__data2hmacsha1(_key,_data))};p._$hmacsha12b64=function(_key,_data){return __bin2b64(__data2hmacsha1(_key,_data))};p._$hmacsha12str=function(_key,_data){return __bin2str(__data2hmacsha1(_key,_data))};p._$hmacmd52hex=function(_key,_data){return __bin2hex(__data2hmacmd5(_key,_data),!0)};p._$hmacmd52b64=function(_key,_data){return __bin2b64(__data2hmacmd5(_key,_data),!0)};p._$hmacmd52str=function(_key,_data){return __bin2str(__data2hmacmd5(_key,_data),!0)};p._$sha12hex=function(_data){return __bin2hex(__data2sha1(__str2bin(_data),_data.length*__chrsz))};p._$sha12b64=function(_data){return __bin2b64(__data2sha1(__str2bin(_data),_data.length*__chrsz))};p._$sha12str=function(_data){return __bin2str(__data2sha1(__str2bin(_data),_data.length*__chrsz))};p._$md52hex=function(_data){return __bin2hex(__data2md5(__str2bin(_data,!0),_data.length*__chrsz),!0)};p._$md52b64=function(_data){return __bin2b64(__data2md5(__str2bin(_data,!0),_data.length*__chrsz),!0)};p._$md52str=function(_data){return __bin2str(__data2md5(__str2bin(_data,!0),_data.length*__chrsz),!0)};p._$str2hex=function(_data){return __bin2hex(__str2bin(_data,!0),!0)}})();
(function(){var _=NEJ.P,_p=_("nej.p"),_e=_("nej.e"),_u=_("nej.u"),_h=_("nej.h");var __empty=/(?:<(p|div)>(?:\&nbsp\;|<br\/?>)<\/\1>|<br\/?>|\&nbsp\;|\s)+$/gi,__reg_cls0=/(?:class|lang)="(mso)?[^"]*"/gi,__reg_cls1=/(?:class|lang)='(mso)?[^']*'/gi,__reg_cls2=/(?:class|lang)=(mso)?[^>\s]*/gi,__reg_ccm=/(?:<!--)[^>]*(?:-->)/gi,__reg_st0=/(?:<[^>]* style)="([^"]*)"/gi,__reg_st1=/(?:<[^>]* style)='([^']*)'/gi,__reg_st2=/(?:<[^>]* style)=([^>\s]*)/gi,__reg_bgc=/(?:background-color:|text-align:|color:)([^;]*)(;)*/gi;_h.__getWindow=function(_node){var _document=_h.__getDocument(_node);return _document.defaultView||_document.parentWindow||_document.window||_document};_h.__getDocument=function(_node){return _node.ownerDocument||_node};_h.__getSelection=function(_window){if(!!_window.getSelection)return _window.getSelection();var _document=_window.document;if(!!_document.getSelection)return _document.getSelection();if(!!_document.selection)return _document.selection;return null};_h.__getRange=function(_window){_window=_h.__getWindow(_window);var _selection=_h.__getSelection(_window);if(!_selection)return null;if(!!_selection.getRangeAt)return _selection.getRangeAt(0);if(!!_selection.createRange)return _selection.createRange();return null};_h.__getSelectText=function(_document){var _range=this.__getRange(_document);if(!_range)return"";return!!document.selection&&parseFloat(_p._$KERNEL.release)<5?_range.text:_range.toString()||_range.cloneContents().textContent||_range.commonAncestorContainer.data};_h.__getSelectHtml=function(_document){var _range=this.__getRange(_document);if(!_range)return"";if(!!document.selection){var _html=_range.htmlText;_document.execCommand("delete",!1,null);return _html||""}var _ntmp=_e._$create("div");_ntmp.appendChild(_range.cloneContents());_range.deleteContents();return _ntmp.innerHTML};_h.__saveRange=function(_node){};_h.__focusRange=function(_node){_node.focus()};_h.__clearRange=function(_node){};_h.__moveCursorPosition=function(){var _fmap=[function(_node){return _node.childNodes.length},function(){return 0}];return function(_node,_position){var _func=_fmap[_position];if(!_func)return;_h.__getSelection(_h.__getWindow(_node)).collapse(_node,_func(_node))}}();_h.__execCommand=function(_document,_command,_value){if(_command=="inserthtml"){this.__insertHtml(_document,_value);return}_document.execCommand(_command,!1,_value)};_h.__insertHtml=function(_document,_html){if(!document.selection){_document.execCommand("inserthtml",!1,_html);return}var _range=_document.selection.createRange();if(!!_range.pasteHTML){_range.pasteHTML(_html);return}_document.execCommand("delete",!1,null);_document.selection.createRange().pasteHTML(_html)};_h.__filterContent=function(_html){var _html=(_html||"").replace(__empty,"").replace(__reg_cls0,"").replace(__reg_cls1,"").replace(__reg_cls2,"").replace(__reg_ccm,"");_html=!_h.__filterContentPath?_html:_h.__filterContentPath(_html);return _html};_h.__filterContentStyle=function(){var _doFilter=function(_reg,_html){_html=_html.replace(_reg,function(_a,_b,_c){var _prefix=_a.split("style")[0];if(_b.match(__reg_bgc)!=null){var _str0="";var _bgc=_b.replace(__reg_bgc,function(_str,_sstr,_index){return _str0+=_str}._$bind(this));return _prefix+' style="'+_str0+'"'}else{return _prefix}}._$bind(this));return _html};return function(_html){if(__reg_st0.test(_html)){_html=_doFilter(__reg_st0,_html)}else if(__reg_st1.test(_html)){_html=_doFilter(__reg_st1,_html)}else{_html=_doFilter(__reg_st2,_html)}return _html}}()})();
(function(){var _=NEJ.P,_p=_("nej.p"),_e=_("nej.e"),_h=_("nej.h"),_rcache={};if(_p._$KERNEL.engine!="trident")return;_h.__execCommand=_h.__execCommand._$aop(function(_event){var _args=_event.args;if(_args[1]=="styleWithCSS"){_event.stopped=!0;return}_h.__focusRange(_args[0].body);if(_args[1]=="hiliteColor")_args[1]="backColor"});_h.__saveRange=_h.__saveRange._$aop(function(_event){if(!!document.selection||_p._$KERNEL.release>="7.0"){_event.stopped=!0;var _node=_event.args[0],_doc=_h.__getDocument(_node),_id=_e._$id(_doc);_rcache[_id]=_h.__getRange(_h.__getWindow(_doc))}});_h.__focusRange=_h.__focusRange._$aop(null,function(_event){var _doc=_h.__getDocument(_event.args[0]),_id=_e._$id(_doc),_range=_rcache[_id];if(!!_range){if(!!_range.select){_range.select()}else{var _selection=_h.__getSelection(_h.__getWindow(_doc));_selection.addRange(_range)}delete _rcache[_id]}});_h.__clearRange=_h.__clearRange._$aop(null,function(_event){var _id=_e._$id(_h.__getDocument(_event.args[0]));delete _rcache[_id]})})();
(function(){var _=NEJ.P,_u=_("nej.u"),_p=_("nej.p"),_h=_("nej.h");if(_p._$NOT_PATCH.trident1)return;var __reg_nwrd=/<\/?[\w]+:[\w]+.*?>/gi;var __isFromWord=function(_html){return(_html||"").search("</?[\\w]+:[\\w]+.*?>")>=0};_h.__filterWordContent=function(_html){if(!__isFromWord(_html))return _html;return _html.replace(__reg_nwrd,"")};_h.__insertHtml=_h.__insertHtml._$aop(function(_event){if(_p._$KERNEL.release>="7.0"){_event.stopped=!0;var _args=_event.args,_doc=_args[0],_win=_h.__getWindow(_doc),_range=_h.__getRange(_win);var _node=_doc.createElement("div");_node.innerHTML=_args[1];_range.deleteContents();_u._$reverseEach(_node.childNodes,function(_elm){_range.insertNode(_elm)});var _selection=_h.__getSelection(_win);_selection.collapseToEnd();_win.focus()}})})();
(function(){var _=NEJ.P,_p=_("nej.p"),_h=_("nej.h");if(_p._$NOT_PATCH.trident)return;var __reg_nwrd=/<\/?[\w]+:[\w]+.*?>/gi,__reg_cxml=/<\?xml[^>]*>/gi;_h.__moveCursorPosition=function(){var _fmap=[function(_node){return _node.innerText.length},function(){return 0}];return _h.__moveCursorPosition._$aop(function(_event){var _args=_event.args,_range=_h.__getRange(_h.__getWindow(_args[0]));if(!!_range.move){_event.stopped=!0;var _func=_fmap[_args[1]];if(!_func)return;_range.move("character",_func(_args[0]));_range.select()}})}();var __isFromWord=function(_html){return(_html||"").search("</?[\\w]+:[\\w]+.*?>")>=0};_h.__filterWordContent=function(_html){if(!__isFromWord(_html))return _html;return _html.replace(__reg_nwrd,"").replace(__reg_cxml,"")}})();
(function(){var _=NEJ.P,_p=_("nej.p"),_e=_("nej.e"),_h=_("nej.h");if(_p._$NOT_PATCH.gecko)return;var __empty=/(?:<(p|div)>(?:\&nbsp\;|<br\/?>)<\/\1>|<br\/?>|\&nbsp\;|\s)+$/gi;var __reg_flnh=/\f/g,__reg_flns=/\n|\r/g,__reg_fzag=/<(style|script).*?>.*?<\/\1>/gi,__reg_ftag=/<\/?(?:meta|link|!--\[.+?\]--|[\w]+:[\w]+).*?>/gi,__reg_fimg=/<img(\n|\r|\s|[^>])*?src="data:image\/png;base64[^>]*?>/gi;var __isFromWord=function(_html){return(_html||"").indexOf("<w:WordDocument>")>=0};_h.__filterWordContent=function(_html){if(!__isFromWord(_html))return _html;return _html.replace(__reg_flns,"\f").replace(__reg_ftag,"").replace(__reg_fzag,"").replace(__reg_flnh,"\n").replace(__reg_fimg,"").replace(__empty,"")};_h.__filterContentPath=function(_html){_html=_html.replace(__reg_fimg,"");return _html}})();
(function(){var _=NEJ.P,_p=_("nej.p"),_e=_("nej.e"),_h=_("nej.h");if(_p._$NOT_PATCH.webkit)return;var __reg_nwrd=/<\/?[\w]+:[\w]+.*?>/gi;var __isFromWord=function(_html){return(_html||"").search("</?[\\w]+:[\\w]+.*?>")>=0};_h.__filterWordContent=function(_html){if(!__isFromWord(_html))return _html;return _html.replace(__reg_nwrd,"")}})();
(function(){var _=NEJ.P,_p=_("nej.p"),_h=_("nej.h");if(_p._$NOT_PATCH.presto)return;var __reg_nwrd=/<\/?[\w]+:[\w]+.*?>/gi,__opspc="";_h.__execCommand=_h.__execCommand._$aop(function(_event){var _args=_event.args;if(_args[1]=="hiliteColor")_args[1]="backColor"});var __isFromWord=function(_html){return(_html||"").search("</?[\\w]+:[\\w]+.*?>")>=0};_h.__filterWordContent=function(_html){if(!__isFromWord(_html))return _html;return _html.replace(__reg_nwrd,"")};_h.__filterContentPath=function(_html){return _html.replace(__opspc,"&nbsp;")}})();
(function(){var _=NEJ.P,_o=NEJ.O,_v=_("nej.v"),_e=_("nej.e"),_u=_("nej.u"),_h=_("nej.h"),_p=_("nej.ut"),_pro;if(!!_p._$$EditorArea)return;_p._$$EditorArea=NEJ.C();_pro=_p._$$EditorArea._$extend(_p._$$Event);_pro.__init=function(){this.__fopt={visible:!0,onload:this.__onIFrameLoaded._$bind(this)};this.__supInit()};_pro.__reset=function(){var _cnttpl='<head><base href="#<BSUL>"/><style>html,body{margin:0;padding:0;border:0;cursor:text;font-size:14px;font-family:Arial;word-wrap:break-word;}#<UDCS></style></head><body contenteditable="true"></body>';return function(_options){this.__supReset(_options);this.__focus=!!_options.focus;this.__content=_cnttpl.replace("#<UDCS>",_options.style||"").replace("#<BSUL>",_options.base||location.href);this.__initcnt=_options.content||"";this.__fopt.parent=_e._$get(_options.parent)||document.body;this.__iframe=_e._$createXFrame(this.__fopt)}}();_pro.__destroy=function(){this.__supDestroy();_h.__clearRange(this._$getDocument());delete this.__content;delete this.__fopt.parent;delete this.__initcnt;this.__iframe=_e._$remove(this.__iframe)};_pro.__doSaveRange=function(){_h.__saveRange(this._$getDocument())};_pro.__onIFrameLoaded=function(_iframe){var _document=this._$getDocument();_document.open();_document.write(this.__content);if(location.hostname!=document.domain)_document.domain=document.domain;_document.close();this.__doInitDomEvent([[_document,"click",this.__onDocumentClick._$bind(this)],[_document,"selectionchange",this.__onSelectionChange._$bind(this)],[_document,"beforedeactivate",this.__doSaveRange._$bind(this)],[_document,"keydown",this.__onInputCheck._$bind(this)],[_document,"mouseup",this.__onInputCheck._$bind(this)],[_document,"paste",this.__onInputCheck._$bind(this)],[_document,"drop",this.__onInputCheck._$bind(this)]]);if(!!this.__initcnt){this._$setContent(this.__initcnt)}if(this.__focus){this._$focus();delete this.__focus}};_pro.__onDocumentClick=function(_event){_v._$dispatchEvent(document,"click")};_pro.__onSelectionChange=function(){this._$dispatchEvent("onselectionchange")};_pro.__onInputCheck=function(){if(!!this.__timer){window.clearTimeout(this.__timer)}this.__timer=window.setTimeout(this.__doCompareContent._$bind(this),100)};_pro.__doCompareContent=function(){var _document=this._$getDocument();if(!_document)return;var _content=_document.body.innerHTML;if(this.__initcnt!=_content){this.__initcnt=_content;this._$dispatchEvent("oninput",{cont:this._$getContent(),txt:this._$getTextContent()})}};_pro._$focus=function(_cursor){var _document=this._$getDocument();if(!_document)return this;_h.__focusRange(_document.body);_h.__moveCursorPosition(_document.body,parseInt(_cursor)||0);this.__onSelectionChange();return this};_pro._$getDocument=function(){return this.__iframe.contentWindow.document};_pro._$getContent=function(_filter){var _document=this._$getDocument();_html=_h.__filterContent(!_document?"":_document.body.innerHTML);if(!_filter){_html=_h.__filterContentStyle(_html)}return!_h.__filterWordContent?_html:_h.__filterWordContent(_html)};_pro._$getTextContent=function(){var _document=this._$getDocument(),_text=_document.body.innerText||_document.body.textContent;return!_document?"":_text};_pro._$setContent=function(_content){var _document=this._$getDocument();if(!_document)return this;_document.body.innerHTML=_content;this.__onInputCheck();return this};_pro._$execCommand=function(_command,_value,_css){var _document=this._$getDocument();if(!_document)return this;_h.__execCommand(_document,"styleWithCSS",false);_h.__execCommand(_document,_command,_value);this._$focus(2);this.__onInputCheck();return this};_pro._$queryCommand=function(_command,_type){var _document=this._$getDocument();return!_document?null:_document["queryCommand"+_type](_command)};_pro._$getSelectText=function(){this._$focus(2);return _h.__getSelectText(this._$getDocument())};_pro._$getSelectHtml=function(){this._$focus(2);return _h.__getSelectHtml(this._$getDocument())};_pro._$getAreaBox=function(){var _document=this._$getDocument();return!_document?null:_e._$getPageBox(_document)}})();
(function(){var _=NEJ.P,_o=NEJ.O,_e=_("nej.e"),_v=_("nej.v"),_u=_("nej.u"),_p=_("nej.ut"),_proEditorToolbar;if(!!_p._$$EditorToolbar)return;_p._$$EditorToolbar=NEJ.C();_proEditorToolbar=_p._$$EditorToolbar._$extend(_p._$$Event);_proEditorToolbar.__init=function(){this.__command={};this.__supInit()};_proEditorToolbar.__reset=function(_options){this.__supReset(_options);this.__selected=_options.selected||"js-selected";this.__disabled=_options.disabled||"js-disabled";this._$addCommand(_options.list)};_proEditorToolbar.__destroy=function(){this.__supDestroy();this.__command={};delete this.__selected;delete this.__disabled};_proEditorToolbar.__onCommand=function(_command){_v._$stop(arguments[1]);var _node=this.__command[_command];this._$dispatchEvent("oncommand",{name:_command,node:this.__command[_command]})};_proEditorToolbar._$addCommand=function(_node){if(!_u._$isArray(_node)){var _command=_e._$dataset(_node,"command");if(!_command)return this;this.__command[_command]=_e._$get(_node);this.__doInitDomEvent([[_node,"click",this.__onCommand._$bind(this,_command)]]);return this}_u._$forEach(_node,this._$addCommand,this);return this};_proEditorToolbar._$getCommandList=function(){return this.__command};_proEditorToolbar._$select=function(_command,_selected){var _node=this.__command[_command];if(!_node)return this;!_selected?_e._$delClassName(_node,this.__selected):_e._$addClassName(_node,this.__selected);return this};_proEditorToolbar._$disable=function(_command,_disabled,_class){var _node=this.__command[_command];if(!_node)return this;_e._$delClassName(_node,_class);!_disabled?_e._$delClassName(_node,this.__disabled):_e._$addClassName(_node,this.__disabled);return this}})();
(function(){var _=NEJ.P,_o=NEJ.O,_f=NEJ.F,_p=_("nej.ut"),_impls={},_proEditorCommand;if(!!_p._$$EditorCommand)return;_p._$$EditorCommand=NEJ.C();_proEditorCommand=_p._$$EditorCommand._$extend(_p._$$Event);_p._$$EditorCommand._$regist=function(){_impls[this.command]=this};_p._$$EditorCommand._$getImpl=function(_command){return _impls[_command]||null};_proEditorCommand.__init=function(){this.__name=this.constructor.command;this.__supInit()};_proEditorCommand.__reset=function(_options){this.__supReset(_options);this.__editor=_options.area;this.__toolbar=_options.toolbar};_proEditorCommand.__destroy=function(){this.__supDestroy();delete this.__editor;delete this.__toolbar};_proEditorCommand._$execute=_f;_proEditorCommand._$queryValue=_f;_proEditorCommand._$queryState=function(){return null};_proEditorCommand._$queryEnabled=function(){return null}})();
(function(){var _=NEJ.P,_o=NEJ.O,_u=_("nej.u"),_p=_("nej.ut"),_e=_("nej.e"),_proEditor;if(!!_p._$$Editor)return;_p._$$Editor=NEJ.C();_proEditor=_p._$$Editor._$extend(_p._$$Event);_proEditor.__init=function(){this.__copt={};this.__impl={};this.__supInit()};_proEditor.__reset=function(){var _doRegist=function(){this._$registCommand(_p._$$EditorCommand._$getImpl(arguments[1]))};return function(_options){this.__supReset(_options);var _toolbar=_options.toolbar,_isok=_toolbar instanceof _p._$$EditorToolbar;!_isok?_toolbar=null:this.__copt.toolbar=_toolbar;if(!!_toolbar){_toolbar._$setEvent("oncommand",this.__onCommand._$bind(this));_u._$forIn(_toolbar._$getCommandList(),_doRegist,this)}var _area=_options.area,_isok=_area instanceof _p._$$EditorArea;!_isok?_area=null:this.__copt.area=_area;if(!!_area){_area._$setEvent("onselectionchange",this.__onSelectionChange._$bind(this))}}}();_proEditor.__destroy=function(){var _doClearImpl=function(_impl,_key,_map){if(_impl instanceof _p._$$EditorCommand)_impl._$recycle();delete _map[_key]};return function(){this.__supDestroy();if(!!this.__copt.area){this.__copt.area._$recycle();delete this.__copt.area}if(!!this.__copt.toolbar){this.__copt.toolbar._$recycle();delete this.__copt.toolbar}_u._$forIn(this.__impl,_doClearImpl)}}();_proEditor.__getCommandImpl=function(_command){var _impl=this.__impl[_command];if(!_impl)return null;if(!(_impl instanceof _p._$$EditorCommand)){_impl=_impl._$allocate(this.__copt);this.__impl[_command]=_impl}return _impl};_proEditor.__onCommand=function(_event){this.__getCommandImpl(_event.name)._$execute({target:_event.node})};_proEditor.__onSelectionChange=function(){var _doSyncToolbar=function(_node,_command){var _impl=this.__getCommandImpl(_command);if(!_impl)return;var _toolbar=this.__copt.toolbar,_value=_impl._$queryState();if(_value!=null)_toolbar._$select(_command,_value);var _value=_impl._$queryEnabled();if(_value!=null)_toolbar._$disable(_command,!_value);_impl._$queryValue(_node)};return function(){var _toolbar=this.__copt.toolbar;if(!_toolbar)return;_u._$forIn(_toolbar._$getCommandList(),_doSyncToolbar,this)}}();_proEditor._$registCommand=function(_class){if(!_u._$isArray(_class)){var _name=(_class||_o).command;if(!!_name)this.__impl[_name]=_class;return this}_u._$forEach(_class,this._$registCommand,this);return this};_proEditor._$setContent=function(_content){if(!!this.__copt.area)this.__copt.area._$setContent(_content);return this};_proEditor._$getContent=function(_filter){return!this.__copt.area?"":this.__copt.area._$getContent(_filter)};_proEditor._$getTextContent=function(){return!this.__copt.area?"":this.__copt.area._$getTextContent()}})();
(function(){var _=NEJ.P,_o=NEJ.O,_f=NEJ.F,_c=_("nej.c"),_e=_("nej.e"),_u=_("nej.u"),_t=_("nej.ut"),_p=_("nej.ui"),_seed_css,_seed_icmd,_seed_ifnt,_seed_iedt,_pro,_sup;if(!!_p._$$Editor)return;_p._$$Editor=NEJ.C();_pro=_p._$$Editor._$extend(_p._$$Abstract);_sup=_p._$$Editor._$supro;_pro.__init=function(){this.__aopt={};this.__topt={};this.__supInit()};_pro.__reset=function(_options){this.__supReset(_options);NEJ.X(this.__aopt,_options,function(_value,_key){if(_key.search(/^on/)<0){return!0}});this.__aopt.style=_options.style;this.__aopt.content=_options.content;this.__aopt.focus=!_options.focus?!1:!0;this.__editor=_t._$$Editor._$allocate({area:_t._$$EditorArea._$allocate(this.__aopt),toolbar:_t._$$EditorToolbar._$allocate(this.__topt)})};_pro.__destroy=function(){this.__editor._$recycle();this.__supDestroy();delete this.__editor};_pro.__initXGui=function(){this.__seed_css=_seed_css};_pro.__initNode=function(){this.__supInitNode();var _list=_e._$getChildren(this.__body);this.__aopt.parent=_list[1];this.__topt.list=_e._$getByClassName(_list[0],"js-"+_e._$getHtmlTemplateSeed())};_pro.__doGenCmdXhtml=function(_data){return _e._$getHtmlTemplate(_seed_icmd,_data)};_pro.__doGenFontSizeXhtml=function(){return _e._$getHtmlTemplate(_seed_ifnt,{cmd:"fontSize",txt:"标准",icn:"zfs"})};_pro.__doGenFontNameXhtml=function(){return _e._$getHtmlTemplate(_seed_ifnt,{cmd:"fontName",txt:"Arial",icn:"zfm"})};_pro.__doGenEditorXhtml=function(_data){return _e._$getHtmlTemplate(_seed_iedt,_data)};_pro._$getContent=function(){return this.__editor._$getContent()};_pro._$getPhotoIdsAndUrls=function(){var _filter=function(_item){if(_item.id!=0)this.__idsAndUrls.push(_item.id+"@"+_item.src)};return function(){this.__idsAndUrls=[];var _photoIdsAndUrls=[],_content=this.__editor._$getContent(),_div=document.createElement("div");_div.innerHTML=_content;var _document=_e._$get(_div),_list=_document.getElementsByTagName("img");_u._$forEach(_list,_filter,this);var _idsAndUrlsLength=this.__idsAndUrls.length;for(var i=0;i<_idsAndUrlsLength;i++)_photoIdsAndUrls.push(this.__idsAndUrls[i]);return _photoIdsAndUrls}}();_pro._$getTextContent=function(){return this.__editor._$getTextContent()};_pro._$setContent=function(_content){this.__editor._$setContent(_content);return this};_pro._$registCommand=function(_class){this.__editor._$registCommand(_class);return this};_pro._$show=function(){this.__body.style.display="";return this};_pro._$hide=function(){this.__body.style.display="none";return this};var __doGenIconStyle=function(){var _arr=[],_row=20,_col=3;for(var i=0;i<_row;i++)for(var j=0;j<_col;j++)_arr.push(".#<uispace> .z-i-"+i+j+"{background-position:-"+16*j+"px -"+(40+i*16)+"px;}");return _arr.join("")};_seed_css=_e._$pushCSSText(".#<uispace>{width:500px;border:1px solid #ddd;text-align:center;}.#<uispace> .zbg{background:url("+_c._$get("root")+'nej_editor.png?20131028) no-repeat 100px 100px;}.#<uispace> .ztbar{height:30px;background-color:#eee;zoom:1;}.#<uispace> .ztbar:after{display:block;clear:both;visibility:hidden;height:0;content:".";}.#<uispace> .zitm{float:left;width:24px;height:24px;margin:3px 0;course:pointer;}.#<uispace> .zitm:hover{background-position:0 0;}.#<uispace> .zitm.js-selected{background-position:-30px 0;}.#<uispace> .zitm .zicn{width:16px;height:16px;margin:4px auto 0;overflow:hidden;text-indent:100px;}.#<uispace> .zitm .ztxt{display:none;}.#<uispace> .zisp{float:left;width:10px;height:24px;margin:3px 0;background-position:-60px 0;overflow:hidden;}.#<uispace> .zsel{float:left;position:relative;height:20px;overflow:hidden;line-height:20px;padding:0 5px;margin:4px;border:1px solid #C5C5C5;background:#fff;font-size:12px;text-align:left;cursor:pointer;}.#<uispace> .zsel .zarw{position:absolute;top:0;right:0;width:18px;height:18px;background-position:0px -244px;}.#<uispace> .zsel.zfs{width:60px;}.#<uispace> .zsel.zfm{width:140px;}.#<uispace> .zarea{height:200px;}.#<uispace> .zarea iframe{width:100%;height:100%;}'+__doGenIconStyle());_seed_icmd=_e._$addHtmlTemplate('{list xlist as x}<div class="zitm zbg ${\'js-\'|seed}" data-command="${x.cmd}" title="${x.txt}"><div class="zicn zbg ${x.icn}">&nbsp;</div><div class="ztxt">${x.txt}</div></div>{/list}{if defined("hr")&&!!hr}<div class="zbg zisp">&nbsp;</div>{/if}');_seed_ifnt=_e._$addHtmlTemplate('<div class="zsel ${icn} ${\'js-\'|seed}" data-command="${cmd}"><span class="${\'js-t-\'|seed}">${txt}</span><span class="zarw zbg">&nbsp;</span></div>');_seed_iedt=_e._$addHtmlTemplate('<div class="'+_seed_css+'"><div class="ztbar">${toolbar}</div><div class="zarea"></div></div>')})();
(function(){var _=NEJ.P,_t=_("nej.ut"),_p=_("nej.ut.cmd"),_proSimpleCommand;if(!!_p._$$SimpleCommand)return;_p._$$SimpleCommand=NEJ.C();_proSimpleCommand=_p._$$SimpleCommand._$extend(_t._$$EditorCommand);_proSimpleCommand._$execute=function(){this.__editor._$execCommand(this.__name);return this};_proSimpleCommand._$queryState=function(){return this.__editor._$queryCommand(this.__name,"State")}})();
(function(){var _p=NEJ.P("nej.ut.cmd");if(!!_p._$$Bold)return;_p._$$Bold=NEJ.C();_p._$$Bold._$extend(_p._$$SimpleCommand);_p._$$Bold.command="bold";_p._$$Bold._$regist()})();
(function(){var _p=NEJ.P("nej.ut.cmd");if(!!_p._$$Italic)return;_p._$$Italic=NEJ.C();_p._$$Italic._$extend(_p._$$SimpleCommand);_p._$$Italic.command="italic";_p._$$Italic._$regist()})();
(function(){var _p=NEJ.P("nej.ut.cmd");if(!!_p._$$InsertOrderedList)return;_p._$$InsertOrderedList=NEJ.C();_p._$$InsertOrderedList._$extend(_p._$$SimpleCommand);_p._$$InsertOrderedList.command="insertorderedlist";_p._$$InsertOrderedList._$regist()})();
(function(){var _p=NEJ.P("nej.ut.cmd");if(!!_p._$$InsertUnorderedList)return;_p._$$InsertUnorderedList=NEJ.C();_p._$$InsertUnorderedList._$extend(_p._$$SimpleCommand);_p._$$InsertUnorderedList.command="insertunorderedlist";_p._$$InsertUnorderedList._$regist()})();
(function(){var _p=NEJ.P("nej.ut.cmd");if(!!_p._$$UnderLine)return;_p._$$UnderLine=NEJ.C();_p._$$UnderLine._$extend(_p._$$SimpleCommand);_p._$$UnderLine.command="underline";_p._$$UnderLine._$regist()})();
(function(){var _p=NEJ.P("nej.ut.cmd");if(!!_p._$$StrikeThrough)return;_p._$$StrikeThrough=NEJ.C();_p._$$StrikeThrough._$extend(_p._$$SimpleCommand);_p._$$StrikeThrough.command="strikethrough";_p._$$StrikeThrough._$regist()})();
(function(){var _=NEJ.P,_f=NEJ.F,_e=_("nej.e"),_v=_("nej.v"),_t=_("nej.ut"),_p=_("nej.ut.cmd"),_proCardCommand;if(!!_p._$$CardCommand)return;_p._$$CardCommand=NEJ.C();_proCardCommand=_p._$$CardCommand._$extend(_t._$$EditorCommand);_proCardCommand.__init=function(){this.__fopt={destroyable:!0,parent:document.body,onchange:this.__onChange._$bind(this)};this.__supInit()};_proCardCommand.__onChange=_f;_proCardCommand.__doShowCard=_f;_proCardCommand._$execute=function(_options){_v._$dispatchEvent(document,"click");var _node=_options.target,_offset=_e._$offset(_node);this.__fopt.top=_offset.y+_node.offsetHeight+1;this.__fopt.left=_offset.x-1;this.__fopt.width=_node.clientWidth;this.__doShowCard();return this}})();
(function(){var _=NEJ.P,_o=NEJ.O,_r=NEJ.R,_e=_("nej.e"),_v=_("nej.v"),_p=_("nej.ut"),_proSlider;if(!!_p._$$Slider)return;_p._$$Slider=NEJ.C();_proSlider=_p._$$Slider._$extend(_p._$$Event);_proSlider.__init=function(){this.__dopt={onchange:this.__onChange._$bind(this),ondragend:this.__onChange._$bind2(this,!0)};this.__supInit()};_proSlider.__reset=function(_options){this.__supReset(_options);this.__dopt.view=_e._$get(_options.track);this.__dopt.body=_e._$get(_options.slide);this.__dopt.mbar=this.__dopt.view;this._$setRange(_options.range);this.__doInitDomEvent([[this.__dopt.view,"mousedown",this.__onSlideToPosition._$bind(this)]]);this.__dragger=_p._$$Dragger._$allocate(this.__dopt)};_proSlider.__destroy=function(){this.__supDestroy();this.__dragger._$recycle();delete this.__dragger;delete this.__range;delete this.__dopt.view;delete this.__dopt.body;delete this.__dopt.mbar};_proSlider.__onChange=function(_event,_end){var _ratex=_event.left/this.__range.x[1],_ratey=_event.top/this.__range.y[1],_rngx=this.__range.x,_rngy=this.__range.y;this._$dispatchEvent("onchange",{stopped:!!_end,x:{rate:_ratex,value:_ratex*(_rngx[1]-_rngx[0])},y:{rate:_ratey,value:_ratey*(_rngy[1]-_rngy[0])}})};_proSlider.__onSlideToPosition=function(_event){var _offset=_e._$offset(this.__dopt.view),_pointer={x:_v._$pageX(_event),y:_v._$pageY(_event)},_delta={x:Math.floor(this.__dopt.body.offsetWidth/2),y:Math.floor(this.__dopt.body.offsetHeight/2)};this.__dragger._$setPosition({top:_pointer.y-_offset.y-_delta.y,left:_pointer.x-_offset.x-_delta.x})};_proSlider._$setRange=function(_range){var _rate;if(!!this.__range){var _position=this.__dragger._$getPosition();_rate={x:_position.left/this.__range.x[1],y:_position.top/this.__range.y[1]}}_range=_range||_o;var _mx=(_range.x||_r)[1]||this.__dopt.view.clientWidth-this.__dopt.body.offsetWidth,_my=(_range.y||_r)[1]||this.__dopt.view.clientHeight-this.__dopt.body.offsetHeight;this.__range={x:_range.x||[0,_mx],y:_range.y||[0,_my]};if(!!_rate)this._$setPosition(_rate);return this};_proSlider._$setPosition=function(_rate){_rate=_rate||_o;this.__dragger._$setPosition({top:this.__range.y[1]*(_rate.y||0),left:this.__range.x[1]*(_rate.x||0)})}})();
(function(){var _p=NEJ.P("nej.ut"),_proSliderY;if(!!_p._$$SliderY)return;_p._$$SliderY=NEJ.C();_proSliderY=_p._$$SliderY._$extend(_p._$$Slider);_proSliderY.__init=function(){this.__supInit();this.__dopt.direction=2}})();
(function(){var _p=NEJ.P("nej.ut"),_proSliderXY;if(!!_p._$$SliderXY)return;_p._$$SliderXY=NEJ.C();_proSliderXY=_p._$$SliderXY._$extend(_p._$$Slider);_proSliderXY.__init=function(){this.__supInit();this.__dopt.direction=0}})();
(function(){var _=NEJ.P,_u=_("nej.u"),_p=_("nej.ut.c");if(!!_p._$isColor)return;_p._$isColor=function(){var _reg=/^#(?:[0-9a-f]{3}){1,2}$/i;return function(_color){return _reg.test(_color)}}();_p._$isFullColor=function(){var _reg=/^#[0-9a-f]{6}$/i;return function(_color){return _reg.test(_color)}}();_p._$color2rgb=function(){var _doExpand=function(_value,_index,_list){_list[_index]+=_value};return function(_color){if(!_p._$isColor(_color))return null;_color=_color.substr(1);if(_color.length==3){var _arr=_color.split("");_u._$forEach(_arr,_doExpand);_color=_arr.join("")}return{r:parseInt(_color.substr(0,2),16),g:parseInt(_color.substr(2,2),16),b:parseInt(_color.substr(4,2),16)}}}();_p._$rgb2hsl=function(_rgb){var _red=_rgb.r/255,_green=_rgb.g/255,_blue=_rgb.b/255,_min=Math.min(_red,_green,_blue),_max=Math.max(_red,_green,_blue),_delta=_max-_min,_total=_max+_min,_lightness=_total/2;if(!_delta)return{h:0,s:0,l:_lightness};var _saturation=_lightness<.5?_delta/_total:_delta/(2-_total),_deltar=((_max-_red)/6+_delta/2)/_delta,_deltag=((_max-_green)/6+_delta/2)/_delta,_deltab=((_max-_blue)/6+_delta/2)/_delta;var _hue;if(_red==_max){_hue=_deltab-_deltag}else if(_green==_max){_hue=1/3+_deltar-_deltab}else{_hue=2/3+_deltag-_deltar}_hue+=_hue<0?1:_hue>1?-1:0;return{h:_hue,s:_saturation,l:_lightness}};_p._$hsl2color=function(){var _dec2hex=function(_dec){var _value=parseInt(_dec);if(isNaN(_value))return"00";var _hex=_value.toString(16),_pfx=_hex.length<2?"0":"";return(_pfx+_hex).toLowerCase()};var _hue2rgb=function(_v1,_v2,_hue){_hue+=_hue<0?1:_hue>1?-1:0;if(6*_hue<1)return _v1+(_v2-_v1)*6*_hue;if(2*_hue<1)return _v2;if(3*_hue<2)return _v1+(_v2-_v1)*(2/3-_hue)*6;return _v1};return function(_hsl){var _red,_green,_blue;if(!_hsl.s){_red=_blue=_green=_hsl.l*255}else{var _v2=_hsl.l<.5?_hsl.l*(1+_hsl.s):_hsl.l+_hsl.s-_hsl.s*_hsl.l,_v1=2*_hsl.l-_v2;_red=255*_hue2rgb(_v1,_v2,_hsl.h+1/3);_blue=255*_hue2rgb(_v1,_v2,_hsl.h-1/3);_green=255*_hue2rgb(_v1,_v2,_hsl.h)}return"#"+_dec2hex(_red)+_dec2hex(_green)+_dec2hex(_blue)}}();_p._$color2hsl=function(_color){return _p._$rgb2hsl(_p._$color2rgb(_color))}})();
(function(){var _=NEJ.P,_o=NEJ.O,_c=_("nej.c"),_e=_("nej.e"),_v=_("nej.v"),_u=_("nej.u"),_t=_("nej.ut"),_x=_("nej.ut.c"),_p=_("nej.ui"),_proColorPanel,_supColorPanel;if(!!_p._$$ColorPanel)return;var _seed_css=_e._$pushCSSText(".#<uispace>{width:160px;margin:0 auto;overflow:hidden;$<user-select>:none;}.#<uispace> .zbg{background:url("+_c._$get("root")+"nej_color_btn.png) no-repeat -50px -50px;}.#<uispace> .zwrp{position:relative;padding:3px;zoom:1;cursor:default;font-size:1px;}.#<uispace> .zwrp .zdot{position:absolute;top:0;left:0;height:9px;overflow:hidden;}.#<uispace> .zwrp .zshw{height:104px;border:1px solid #bdbabd;}.#<uispace> .zpnl{float:left;}.#<uispace> .zpnl .zdot{width:9px;background-position:0 0;}.#<uispace> .zpnl .zshw{width:104px;background:url("+_c._$get("root")+"nej_color.png) no-repeat;}.#<uispace> .zhlt{float:right;padding:3px 7px;}.#<uispace> .zhlt .zdot{width:44px;background-position:0 -30px;}.#<uispace> .zhlt .zshw{width:26px;background:url("+_c._$get("root")+"nej_color_mask.png) repeat-x;}");var _seed_html=_e._$addNodeTemplate('<div class="'+_seed_css+'"><div class="zwrp zpnl js-ztag"><span class="zdot zbg js-ztag">&nbsp;</span><div class="zshw">&nbsp;</div></div><div class="zwrp zhlt js-ztag"><span class="zdot zbg js-ztag">&nbsp;</span><div class="zshw js-ztag">&nbsp;</div></div></div>');_p._$$ColorPanel=NEJ.C();_proColorPanel=_p._$$ColorPanel._$extend(_p._$$Abstract);_supColorPanel=_p._$$ColorPanel._$supro;_proColorPanel.__init=function(){this.__hsl={};this.__sopt={onchange:this.__onLightChange._$bind(this)};this.__dopt={onchange:this.__onHueSatChange._$bind(this)};this.__supInit()};_proColorPanel.__reset=function(_options){this.__supReset(_options);this.__lslide=_t._$$SliderXY._$allocate(this.__dopt);this.__rslide=_t._$$SliderY._$allocate(this.__sopt);this._$setColor(_options.color||"#fff")};_proColorPanel.__destroy=function(){this.__supDestroy();this.__hsl={};this.__lslide._$recycle();delete this.__lslide;this.__rslide._$recycle();delete this.__rslide};_proColorPanel.__initXGui=function(){this.__seed_css=_seed_css;this.__seed_html=_seed_html};_proColorPanel.__initNode=function(){this.__supInitNode();var _list=_e._$getByClassName(this.__body,"js-ztag");this.__dopt.track=_list[0];this.__dopt.slide=_list[1];this.__sopt.track=_list[2];this.__sopt.slide=_list[3];this.__nlprv=_list[4]};_proColorPanel.__doColorChange=function(){this._$dispatchEvent("onchange",_x._$hsl2color(this.__hsl))};_proColorPanel.__onLightChange=function(_event){var _light=1-_event.y.rate;if(_light==this.__hsl.l)return;this.__hsl.l=_light;this.__doColorChange()};_proColorPanel.__onHueSatChange=function(_event){var _hue=_event.x.rate,_sat=1-_event.y.rate;if(_hue==this.__hsl.h&&_sat==this.__hsl.s)return;this.__hsl.h=_hue;this.__hsl.s=_sat;_e._$setStyle(this.__nlprv,"backgroundColor",_x._$hsl2color({h:this.__hsl.h,s:this.__hsl.s,l:.5}));this.__doColorChange()};_proColorPanel._$setColor=function(_color){if(!_x._$isColor(_color))return;this.__hsl=_x._$color2hsl(_color);this.__lslide._$setPosition({x:this.__hsl.h,y:1-this.__hsl.s});this.__rslide._$setPosition({y:1-this.__hsl.l});this.__doColorChange();return this}})();
(function(){var _=NEJ.P,_o=NEJ.O,_c=_("nej.c"),_e=_("nej.e"),_v=_("nej.v"),_u=_("nej.u"),_x=_("nej.ut.c"),_p=_("nej.ui"),_proColorPick,_supColorPick;if(!!_p._$$ColorPick)return;var _seed_css=_e._$pushCSSText(".#<uispace> .zbx{background:url("+_c._$get("root")+"nej_color_btn.png) no-repeat -50px -50px;}.#<uispace> .zinf{width:160px;margin:0 auto;padding-bottom:2px;overflow:hidden;font-size:12px;}.#<uispace> .zinf .zfl{float:left;}.#<uispace> .zinf .zes{width:19px;height:19px;margin:0 2px 0 3px;background-position:-22px 0;cursor:pointer;}.#<uispace> .zinf .zpv{width:17px;height:17px;border:1px solid #bdbabd;}.#<uispace> .zinf .ztxt{width:56px;height:13px;line-height:13px;}.#<uispace> .zinf .zbtn{width:49px;height:20px;line-height:20px;padding:0;cursor:pointer;}");var _seed_html=_e._$addNodeTemplate('<div class="'+_seed_css+'"><div class="zinf"><span class="zfl zes zbx js-ztag" title="清除颜色">&nbsp;</span><span class="zfl zpv js-ztag">&nbsp;</span><label class="zfl">#<input class="ztxt js-ztag" type="text" maxlength="6"/></label><input class="zfl zbtn js-ztag" type="button" value="确定"/></div></div>');_p._$$ColorPick=NEJ.C();_proColorPick=_p._$$ColorPick._$extend(_p._$$Abstract);_supColorPick=_p._$$ColorPick._$supro;_proColorPick.__init=function(){this.__popt={onchange:this.__onColorChange._$bind(this)};this.__supInit()};_proColorPick.__reset=function(_options){this.__supReset(_options);this.__default=_options.defaultColor||"#fff";this.__popt.color=_options.color||this.__default;this.__panel=_p._$$ColorPanel._$allocate(this.__popt)};_proColorPick.__destroy=function(){this.__supDestroy();this.__panel._$recycle();delete this.__panel};_proColorPick.__initXGui=function(){this.__seed_css=_seed_css;this.__seed_html=_seed_html};_proColorPick.__initNode=function(){this.__supInitNode();var _list=_e._$getByClassName(this.__body,"js-ztag");this.__ninput=_list[2];this.__npreview=_list[1];this.__popt.parent=this.__body;_v._$addEvent(_list[0],"click",this.__onColorClear._$bind(this));_v._$addEvent(_list[2],"keypress",this.__onEnterCheck._$bind(this));_v._$addEvent(_list[3],"click",this.__onColorSelect._$bind(this))};_proColorPick.__onColorClear=function(){this.__panel._$setColor(this.__default)};_proColorPick.__onColorChange=function(_color){this.__ninput.value=_color.substr(1);_e._$setStyle(this.__npreview,"backgroundColor",_color);this._$dispatchEvent("onchange",{color:_color})};_proColorPick.__onColorSelect=function(){var _color="#"+this.__ninput.value.trim();if(!_x._$isColor(_color))return;this.__panel._$setColor(_color);_color="#"+this.__ninput.value.trim();this._$dispatchEvent("onselect",{color:_color})};_proColorPick.__onEnterCheck=function(_event){if(_event.keyCode!=13)return;this.__onColorSelect()};_proColorPick._$setColor=function(_color){this.__panel._$setColor(_color);return this}})();
(function(){var _=NEJ.P,_o=NEJ.O,_e=_("nej.e"),_i=_("nej.ui"),_p=_("nej.ui.cmd"),_proColorCard,_supColorCard;if(!!_p._$$ColorCard)return;var _seed_css=_e._$pushCSSText(".#<uispace>{width:160px;padding:10px 5px 5px;border:1px solid #9FAC87;}");_p._$$ColorCard=NEJ.C();_proColorCard=_p._$$ColorCard._$extend(_i._$$CardWrapper);_supColorCard=_p._$$ColorCard._$supro;_proColorCard.__init=function(){this.__copt={onselect:this.__onColorSelect._$bind(this)};this.__supInit()};_proColorCard.__reset=function(_options){this.__supReset(_options);this.__copt.color=_options.color;this.__copt.parent=this.__layer._$getBody();this.__copt.defaultColor=_options.defaultColor;this.__colorpick=this.__getColorPicker()};_proColorCard.__destroy=function(){if(!!this.__colorpick){this.__colorpick._$recycle();delete this.__colorpick}delete this.__copt.parent;this.__supDestroy()};_proColorCard.__getColorPicker=function(){this.__copt.clazz=_seed_css;return _i._$$ColorPick._$allocate(this.__copt)};_proColorCard.__onColorSelect=function(_event){this._$dispatchEvent("onchange",_event.color);this._$hide()}})();
(function(){var _=NEJ.P,_i=_("nej.ui.cmd"),_p=_("nej.ut.cmd"),_proColor;if(!!_p._$$Color)return;_p._$$Color=NEJ.C();_proColor=_p._$$Color._$extend(_p._$$CardCommand);_proColor.__onChange=function(_color){this.__editor._$execCommand(this.__name,_color)};_proColor.__doShowCard=function(){_i._$$ColorCard._$allocate(this.__fopt)._$show()};_p._$$Color._$regist()})();
(function(){var _=NEJ.P,_o=NEJ.O,_e=_("nej.e"),_v=_("nej.v"),_u=_("nej.u"),_p=_("nej.ui"),_proSimpleColorPick,_supSimpleColorPick;if(!!_p._$$SimpleColorPick)return;var _seed_css=_e._$pushCSSText(".#<uispace>{text-align:left;}.#<uispace> .zdft{display:block;padding:3px 1px 3px 5px;margin:3px;cursor:pointer;}.#<uispace> .zdft:hover{padding:2px 0 2px 4px;background:#ffeec2;border:1px solid #000080;text-decoration:none;}.#<uispace> .zprv{display:block;width:28px;height:11px;overflow:hidden;border:1px solid #aca899;}.#<uispace> .zbox{width:152px;margin:0 5px;overflow:hidden;}.#<uispace> .zbox .zitm{display:block;float:left;width:11px;height:11px;overflow:hidden;margin:3px;border:1px solid #aca899;cursor:pointer;}.#<uispace> .zbox2{width:220px;margin-left:9px;border-width:1px 0 0 1px;border-color:#000;border-style:solid;}.#<uispace> .zbox2 .zitm2{width:10px;height:10px;margin:-1px 0 0 -1px;border-color:#000;}");var _seed_html=_e._$addNodeTemplate('<div class="'+_seed_css+'"><a class="zdft" title="去除颜色" href="#"><span class="zprv j-flag">&nbsp;</span></a><div class="zbox j-flag"></div></div>');var _seed_color=_e._$addHtmlTemplate('{list xlist as x}<a class="zitm" title="${x.t}" style="background-color:${x.v}" data-value="${x.v}" href="#">&nbsp;</a>{/list}');_p._$$SimpleColorPick=NEJ.C();_proSimpleColorPick=_p._$$SimpleColorPick._$extend(_p._$$Abstract);_proSimpleColorPick.__reset=function(_options){this.__supReset(_options);this.__default=_options.defaultColor||"#ffffff";this.__doInitDomEvent([[this.__nprv.parentNode,"click",this.__onClearColor._$bind(this)],[this.__nbox,"click",this.__onSelectColor._$bind(this)],[this.__nbox,"mouseover",this.__onPreviewColor._$bind(this)]]);this.__doPreviewColor(this.__default)};_proSimpleColorPick.__destroy=function(){this.__supDestroy();delete this.__default};_proSimpleColorPick.__initXGui=function(){this.__seed_css=_seed_css;this.__seed_html=_seed_html};_proSimpleColorPick.__initNode=function(){this.__supInitNode();var _list=_e._$getByClassName(this.__body,"j-flag");this.__nprv=_list[0];this.__nbox=_list[1];this.__doRenderColorList()};_proSimpleColorPick.__doRenderColorList=function(){var _xlist=[{t:"黑色",v:"#000000"},{t:"褐色",v:"#993300"},{t:"橄榄色",v:"#333300"},{t:"深绿",v:"#003300"},{t:"深青",v:"#003366"},{t:"深蓝",v:"#000080"},{t:"靛蓝",v:"#333399"},{t:"灰色-80%",v:"#333333"},{t:"深红",v:"#800000"},{t:"橙色",v:"#ff6600"},{t:"深黄",v:"#808000"},{t:"绿色",v:"#008000"},{t:"青色",v:"#008080"},{t:"蓝色",v:"#0000ff"},{t:"蓝-灰",v:"#666699"},{t:"灰色-50%",v:"#808080"},{t:"红色",v:"#ff0000"},{t:"浅橙色",v:"#ff9900"},{t:"酸橙色",v:"#99cc00"},{t:"海绿",v:"#339966"},{t:"水绿色",v:"#33cccc"},{t:"浅蓝",v:"#3366ff"},{t:"紫罗兰",v:"#800080"},{t:"灰色-40%",v:"#999999"},{t:"粉红",v:"#ff00ff"},{t:"金色",v:"#ffcc00"},{t:"黄色",v:"#ffff00"},{t:"鲜绿",v:"#00ff00"},{t:"青绿",v:"#00ffff"},{t:"天蓝",v:"#00ccff"},{t:"梅红",v:"#993366"},{t:"灰色-25%",v:"#c0c0c0"},{t:"玫瑰红",v:"#ff99cc"},{t:"茶色",v:"#ffcc99"},{t:"浅黄",v:"#ffff99"},{t:"浅绿",v:"#ccffcc"},{t:"浅青绿",v:"#ccffff"},{t:"淡蓝",v:"#99ccff"},{t:"淡紫",v:"#cc99ff"},{t:"白色",v:"#ffffff"}];return function(){_e._$renderHtmlTemplate(this.__nbox,_seed_color,{xlist:_xlist})}}();_proSimpleColorPick.__onClearColor=function(_event){_v._$stop(_event);this.__doChangeColor(this.__default)};_proSimpleColorPick.__onSelectColor=function(_event){var _element=_v._$getElement(_event,"d:value");if(!_element)return;_v._$stop(_event);this.__doChangeColor(_e._$dataset(_element,"value"))};_proSimpleColorPick.__onPreviewColor=function(_event){var _element=_v._$getElement(_event,"d:value");if(!_element)return;this.__doPreviewColor(_e._$dataset(_element,"value"))};_proSimpleColorPick.__doPreviewColor=function(_color){_e._$setStyle(this.__nprv,"backgroundColor",_color)};_proSimpleColorPick.__doChangeColor=function(_color){this._$dispatchEvent("onselect",{color:_color})}})();
(function(){var _=NEJ.P,_o=NEJ.O,_e=_("nej.e"),_i=_("nej.ui"),_p=_("nej.ui.cmd"),_proSimpleColorCard,_supSimpleColorCard;if(!!_p._$$SimpleColorCard)return;var _seed_css=_e._$pushCSSText(".#<uispace>{width:160px;padding:5px 0;border:1px solid #9FAC87;}");_p._$$SimpleColorCard=NEJ.C();_proSimpleColorCard=_p._$$SimpleColorCard._$extend(_p._$$ColorCard);_proSimpleColorCard.__getColorPicker=function(){this.__copt.clazz=_seed_css;return _i._$$SimpleColorPick._$allocate(this.__copt)}})();
(function(){var p=NEJ.P("nej.ut.cmd");var i=NEJ.P("nej.ui.cmd");if(!!p._$$ForeColor)return;p._$$ForeColor=NEJ.C();var proto=p._$$ForeColor._$extend(p._$$Color);p._$$ForeColor.command="foreColor";proto.__doShowCard=function(){i._$$SimpleColorCard._$allocate(this.__fopt)._$show()};p._$$ForeColor._$regist()})();
(function(){var p=NEJ.P("nej.ut.cmd");var i=NEJ.P("nej.ui.cmd");if(!!p._$$BackColor)return;p._$$BackColor=NEJ.C();var proto=p._$$BackColor._$extend(p._$$Color);p._$$BackColor.command="hiliteColor";proto.__doShowCard=function(){i._$$SimpleColorCard._$allocate(this.__fopt)._$show()};p._$$BackColor._$regist()})();
(function(){var _p=NEJ.P("nej.ut.cmd");if(!!_p._$$JustifyLeft)return;_p._$$JustifyLeft=NEJ.C();_p._$$JustifyLeft._$extend(_p._$$SimpleCommand);_p._$$JustifyLeft.command="justifyLeft";_p._$$JustifyLeft._$regist()})();
(function(){var _p=NEJ.P("nej.ut.cmd");if(!!_p._$$JustifyCenter)return;_p._$$JustifyCenter=NEJ.C();_p._$$JustifyCenter._$extend(_p._$$SimpleCommand);_p._$$JustifyCenter.command="justifyCenter";_p._$$JustifyCenter._$regist()})();
(function(){var _p=NEJ.P("nej.ut.cmd");if(!!_p._$$JustifyRight)return;_p._$$JustifyRight=NEJ.C();_p._$$JustifyRight._$extend(_p._$$SimpleCommand);_p._$$JustifyRight.command="justifyRight";_p._$$JustifyRight._$regist()})();
(function(){var _=NEJ.P,_o=NEJ.O,_e=_("nej.e"),_u=_("nej.u"),_v=_("nej.v"),_i=_("nej.ui"),_p=_("nej.ui.cmd"),_proLinkCard,_supLinkCard;if(!!_p._$$LinkCard)return;var _seed_html=_e._$addNodeTemplate('<div><div class="u-row f-cb"><div class="u-edit f-cb"><div class="f-fl u-title">标题</div><input class="f-fl ipt" type="text" /></div></div><div class="f-cb"><div class="u-edit f-cb"><div class="f-fl u-title">链接</div><input class="f-fl ipt" type="text" value="http://" /></div></div><div class="u-error j-error"></div><div class="btn f-cb"><a class="f-fr slave j-btn"><span>取消 </span></a><a class="f-fr main right j-btn"><span>确定 </span></a></div></div>');var _seed_css=_e._$pushCSSText(".#<uispace>{padding:20px 20px 32px 20px;}.#<uispace> .u-title{color:#ccc;height:35px;line-height:35px;margin:0 8px 0 10px;}.#<uispace> .u-row{margin-bottom:10px;}.#<uispace> .u-error{color:red;padding-top:10px;}.#<uispace> .u-edit{  position: relative;z-index: 101;background: #FAFAFA;border: 1px solid #DFDFDF;-webkit-box-shadow: inset 1px 1px 2px #DFDFDF;-moz-box-shadow: inset 1px 1px 2px #dfdfdf;box-shadow: inset 1px 1px 2px #DFDFDF;}.#<uispace> .ipt{ display:block;font-size: 14px;position: relative;z-index: 101;line-height: 35px;height: 35px;width: 290px;resize: none;background: transparent;border: none;color: #444;overflow:hidden;}");_p._$$LinkCard=NEJ.C();_proLinkCard=_p._$$LinkCard._$extend(_i._$$WindowWrapper);_supLinkCard=_p._$$LinkCard._$supro;_proLinkCard.__initXGui=function(){this.__seed_css=_seed_css;this.__seed_html=_seed_html};_proLinkCard.__initNode=function(){this.__supInitNode();this.__btns=_e._$getByClassName(this.__body,"j-btn");this.__inputs=_e._$getByClassName(this.__body,"ipt");this.__errorMsg=_e._$getByClassName(this.__body,"j-error")[0]};_proLinkCard.__onCancel=function(){this._$hide()};_proLinkCard.__onOK=function(){var _link={};_link.name=_u._$escape(this.__inputs[0].value);_link.href=this.__inputs[1].value;var _reg=/^(?:http(s)?:\/\/)[^\s].?/,_reg2=/^(?:http(s)?:\/\/).*/;var _flag=_link.href.search(_reg),_flag2=_link.href.search(_reg2);if(_flag2<0){this._$dispatchEvent("onErrorLink",0);return}if(_flag<0){this._$dispatchEvent("onErrorLink",1);return}this._$dispatchEvent("onchange",_link);this._$hide()};_proLinkCard.__reset=function(_options){_options.parent=_options.parent||document.body;_options.draggable=_options.draggable||false;_options.destroyable=_options.destroyable||false;_options.title=_options.title||"超链接";_options.mask=_options.maskclazz||true;this.__supReset(_options);this.__inputs[0].value=_options.name||"";this.__doInitDomEvent([[this.__btns[1],"click",this.__onOK._$bind(this)],[this.__btns[0],"click",this.__onCancel._$bind(this)],[this.__inputs[0],"focus",this.__showErrorTips._$bind(this,"")],[this.__inputs[1],"focus",this.__showErrorTips._$bind(this,"")]])};_proLinkCard.__showErrorTips=function(_message){this.__errorMsg.innerText=_message};_proLinkCard.__destroy=function(){this.__supDestroy()};_proLinkCard._$doFocus=function(){this.__inputs[1].focus();this.__inputs[1].value="http://"}})();
(function(){var _=NEJ.P,_e=_("nej.e"),_h=_("nej.h"),_t=_("nej.ut"),_p=_("nej.ut.cmd"),_proBlockquote;if(!!_p._$$Blockquote)return;_p._$$Blockquote=NEJ.C();_proBlockquote=_p._$$Blockquote._$extend(_t._$$EditorCommand);_p._$$Blockquote.command="blockquote";_proBlockquote._$execute=function(_options){this.__editor._$execCommand("superscript",false,1);return this};_p._$$Blockquote._$regist()})();
(function(){var _p=NEJ.P("nej.ut.cmd");if(!!_p._$$RemoveFormat)return;_p._$$RemoveFormat=NEJ.C();_p._$$RemoveFormat._$extend(_p._$$SimpleCommand);_p._$$RemoveFormat.command="RemoveFormat";_p._$$RemoveFormat._$regist()})();
(function(){var using=NEJ.P;var p=using("nej.ut.cmd");var dw=using("dd.widget");var du=using("dd.util");if(!!p._$$InsertImage)return;p._$$InsertImage=NEJ.C();var proto=p._$$InsertImage._$extend(p._$$CardCommand);p._$$InsertImage.command="insertImage";proto.__doShowCard=function(){this.__selMaterial=dw._$$SelectMaterial._$allocate({type:1,clazz:"m-layer-sm",onconfirm:this.__onConfirmImage._$bind(this)})._$show()};proto.__onConfirmImage=function(data){this.__onChange("inserthtml",data.uri)};proto.__onChange=function(command,src){var html="<img src="+du.transUri(src)+" />";try{this.__editor._$execCommand(command,html)}catch(e){}};p._$$InsertImage._$regist()})();
(function(){var using=NEJ.P;var p=using("nej.ut.cmd");var dw=using("dd.widget");var du=using("dd.util");if(!!p._$$InsertVideo)return;p._$$InsertVideo=NEJ.C();var proto=p._$$InsertVideo._$extend(p._$$CardCommand);p._$$InsertVideo.command="insertVideo";proto.__doShowCard=function(){this.__selMaterial=dw._$$SelectMaterial._$allocate({type:3,clazz:"m-layer-sm",onconfirm:this.__onConfirmVideo._$bind(this)})._$show()};proto.__onConfirmVideo=function(data){var arr=data.fileName.match(/\.(\w+)$/);var type=arr&&arr[1]||"";var src="/res/videoplayer/assets/index.html?src="+encodeURIComponent(data.uri)+"&type="+encodeURIComponent(type)+"&full=false";this.__onChange("inserthtml",src)};proto.__onChange=function(command,src){var html='<iframe width="400" height="300" class="videoPlayer" src="'+du.transUri(src)+'" frameborder="0">';try{this.__editor._$execCommand(command,html)}catch(e){}};p._$$InsertVideo._$regist()})();
(function(){var _=NEJ.P,_t=_("nej.ut"),_p=_("nej.ut.cmd"),_pro;if(!!_p._$$Blank)return;_p._$$Blank=NEJ.C();_pro=_p._$$Blank._$extend(_t._$$EditorCommand);_p._$$Blank.command="space";_pro._$execute=function(){this.__editor._$execCommand("inserthtml","　");return this};_p._$$Blank._$regist()})();
(function(){var using=NEJ.P;var o=NEJ.O;var e=using("nej.e");var v=using("nej.v");var dw=using("dd.widget");var du=using("dd.util");var dd=using("dd.data");dw._$$SendPreview=NEJ.C();var proto=dw._$$SendPreview._$extend(dw._$$Window);proto.__initXGui=function(){this.__seed_html="widget-sendPreview"};proto.__initNode=function(){this.__supInitNode();var context=this.__body;this.__input=du.get("accountName",context);v._$addEvent(this.__input,"keypress",this.__onKeyPress._$bind(this))};proto.__reset=function(options){options.title="测试发送";this.__supReset(options);this.__data=options.data;this.__accountCache=dd._$$AccountCache._$allocate();this.__accountCache._$addEvent("getyid",function(json){this.__input.value=json&&json.result||""}._$bind(this));this.__accountCache._$getYid();this.__cache=dd._$$MaterialCache._$allocate();this.__cache._$addEvent("sendpreview",this.__onSendPreview._$bind(this))};proto._$show=function(){dw._$$SendPreview._$supro._$show.apply(this,arguments);this.__input.focus()};proto.__onClickConfirm=function(event){var accountName=this.__input.value.trim();var length=accountName.length;if(length<1||length>20){du.showHint("易信帐号必须为1到20个字符");this.__input.focus()}else{du.showHint({message:"正在发送...",autoDisappear:false});this.__disabled(true);this.__cache._$sendPreview(accountName,this.__data)}};proto.__onKeyPress=function(event){if(event.keyCode===13){this.__onClickConfirm()}};proto.__disabled=function(flag){var btn=this.__confirmNode;btn.disabled=flag;flag?e._$addClassName(btn,"z-dis"):e._$delClassName(btn,"z-dis")};proto.__onSendPreview=function(json){if(json&&json.code===200){du.showSuccess("发送成功，请查收");this._$hide()}else{this.__disabled(false);du.showError(json&&json.message||"发送失败，请稍后再试！");this.__input.focus()}};proto.__destroy=function(){dd._$MaterialCache._$recycle(this.__cache);this.__supDestroy()}})();
(function(){var using=NEJ.P;var p=using("nej.p");var e=using("nej.e");var v=using("nej.v");var u=using("nej.u");var i=using("nej.ui");var j=using("nej.j");var di=using("dd.ui");var du=using("dd.util");var dd=using("dd.data");var dm=using("dd.message");var dw=using("dd.widget");var proto,materialCache,messageCache,contactCache,avatarNode,itemNode;dm._$$Item=NEJ.C();proto=dm._$$Item._$extend(i._$$ListItem);materialCache=dd._$$MaterialCache._$allocate();messageCache=dd._$$MessageCache._$allocate();contactCache=dd._$$ContactCache._$allocate();proto.__reset=function(_options){this.isSingle=_options.isSingle;this.isSearch=_options.isSearch;this.__supReset(_options)};proto.__initXGui=function(){this.__seed_html="ntp-message-item"};proto.__initNode=function(){this.__supInitNode();var context=this.__body;this.__avatar=du.get("avatar",context);this.__tip=du.get("tip",context);this.__oprate=du.get("oprate",context);this.__links=du.getAll("link",context);this.__contact=du.get("contact",context);this.__iconimg=du.get("iconimg",context);this.__time=du.get("time",context);this.__name=du.get("name",context);this.__remark=du.get("remark",context);this.__cnt=du.get("cnt",context);this.__save=du.get("save",context);this.__download=du.get("download",context);this.__star=du.get("star",context);this.__reply=du.get("reply",context);this.__delete=du.get("delete",context);this.__replyform=du.get("replyform",context);this.__textarea=du.get("textarea",context);this.__close=du.get("close",context);this.__send=du.get("send",context);this.__iname=du.get("iname",context);this.__iremark=du.get("iremark",context);this.__iarea=du.get("iarea",context);this.__isig=du.get("isig",context);this.__igroup=du.get("igroup",context);v._$addEvent(this.__star,"click",this.__onClickStar._$bind(this));v._$addEvent(this.__reply,"click",this.__onClickReply._$bind(this));v._$addEvent(this.__delete,"click",this.__onClickDelete._$bind(this));v._$addEvent(this.__iremark,"click",this.__onClickEdit._$bind(this));v._$addEvent(this.__igroup,"change",this.__onChangeGroup._$bind(this));v._$addEvent(this.__save,"click",this.__onClickSave._$bind(this));v._$addEvent(this.__download,"click",this.__onClickDownload._$bind(this));if(p._$KERNEL.browser=="ie"){v._$addEvent(this.__igroup,"click",this.__onClickGroup._$bind(this));v._$addEvent(this.__avatar,"mouseover",this.__onMouseOverAvatar._$bind(this));v._$addEvent(document.body,"click",this.__onClickBody._$bind(this))}};proto.__onClickGroup=function(event){v._$stop(event);e._$addClassName(this.__avatar,"z-hover");e._$addClassName(this.__body,"z-hover");avatarNode=this.__avatar;itemNode=this.__body};proto.__onClickBody=function(event){v._$stopBubble(event);e._$delClassName(this.__avatar,"z-hover");e._$delClassName(this.__body,"z-hover")};proto.__onMouseOverAvatar=function(event){v._$stop(event);if(this.__avatar!=avatarNode){if(avatarNode){du.get("igroup",avatarNode).blur();e._$delClassName(avatarNode,"z-hover")}if(itemNode){e._$delClassName(itemNode,"z-hover")}}};proto.__onClickEdit=function(event){var user=this.__data.userInfo;var follow=this.__data.followInfo;var that=this;var uid=user.id;var remark=follow.remark;dw._$$Prompt._$allocate({title:"修改备注",autoDisable:true,input:remark,onconfirm:function(value){var value=value.trim();if(value!=remark){if(u._$length(value)<=100){that.__onUpdate({way:"mdRemark",uid:uid,remark:value,onsuccess:function(data){this._$enableConfirm();if(data&&data.code&&data.code!=200){if(data.message){du.showError(data.message)}else{du.showError("修改备注失败！")}}else{du.showSuccess("修改备注成功！");v._$dispatchEvent(dd._$$MessageCache,"contactchange");this._$hide()}}._$bind(this)})}else{this._$enableConfirm();du.showError("备注不能超过100个字符（1个中文算2个字符）")}}else{this._$enableConfirm();this._$hide()}}})._$show()};proto.__onChangeGroup=function(event){var user=this.__data.userInfo;var follow=this.__data.followInfo;var uid=user.id;var gid=follow.gid;var value=this.__igroup.options[this.__igroup.selectedIndex].value;if(value!=gid){this.__onUpdate({way:"changeGroup",uid:uid,gid:value,onsuccess:function(data){du.showSuccess("修改分组成功！");this.__tip.style.display="";v._$dispatchEvent(dd._$$MessageCache,"contactchange")}._$bind(this)})}};proto.__onClickSave=function(event){var messageContent=this.__data.messageContent||{};materialCache._$addEvent("add",function(data){if(data&&data.code==200){du.showSuccess("素材保存成功！")}else{du.showError(data&&data.message||"素材保存失败，请稍后再试！")}});var param={etag:messageContent.etag,fileSize:messageContent.fileSize,fileName:messageContent.fileName,type:messageContent.type};var param2=du.uriToObject(messageContent.uri);param=NEJ.X(param,param2);materialCache._$add(param)};proto.__onClickDownload=function(event){var id=this.__data.id;location.href="/download/m/"+id};proto.__onClickStar=function(event){var star=this.__data.star;this.__data.star=star?false:true;this.__onUpdate()};proto.__onClickReply=function(event){var follow=this.__data.followInfo;if(!follow){du.showError("该用户已取消关注，不能发送！");return}if(e._$hasClassName(this.__replyform,"reply-show")){e._$delClassName(this.__replyform,"reply-show")}else{e._$addClassName(this.__replyform,"reply-show")}this.__textarea.focus();v._$addEvent(this.__close,"click",function(event){e._$delClassName(this.__replyform,"reply-show")}._$bind(this));v._$addEvent(this.__send,"click",this.__onClickSend._$bind(this))};proto.__onClickDelete=function(event){if(window.confirm("确定删除此消息？")){this.__onDelete()}};proto.__onClickSend=function(event){var btn=this.__send;if(e._$hasClassName(btn,"z-dis")){return}var value=this.__textarea.value.trim();var test=this.__checkMessage(value);var contactId=this.__data.nfrom;if(test.result){du.showHint({message:"发送中...",autoDisappear:false});e._$addClassName(btn,"z-dis");this.__onSendReply(value)}else{du.showError(test.message)}};proto.__onSendReply=function(message){this.__data.contactId=this.__data.nfrom;this.__data.message=message;messageCache._$addEvent("add",this.__cbSendReply._$bind(this));messageCache._$add(this.__data)};proto.__cbSendReply=function(data){var btn=this.__send;setTimeout(function(){e._$delClassName(btn,"z-dis")},1e3);if(data.code==200){du.showSuccess({message:"发送成功！"});window.setTimeout(function(){e._$delClassName(this.__replyform,"reply-show");this.__textarea.value=""}._$bind(this),1e3)}else{du.showError(data.message?"发送失败："+data.message:"发送失败，请稍后再试！")}};proto.__checkMessage=function(value){var value=value.replace(/\n/g,"");if(value.length>900){return{result:false,message:"字数不能超过900！"}}else if(value.length==0){return{result:false,message:"内容不能为空！"}}else{return{result:true,message:""}}};proto.__doRefresh=function(data){this.__restoreUI();var isSelf;var ID=window.userAccountId;if(ID){if(data.nfrom==ID){isSelf=true}else{isSelf=false}}e._$delClassName(this.__replyform,"reply-show");this.__data.changeStar=false;var context=this.__body;var user=data.userInfo||{};var follow=data.followInfo||{};var messageContent=data.messageContent||{};var contentInfo=messageContent.contentInfo;try{contentInfo=JSON.parse(contentInfo)}catch(er){contentInfo=contentInfo}if(messageContent.content){try{var msgContent=JSON.parse(messageContent.content)}catch(ev){}}var type=messageContent.type;var groups=data.groups;var gid=follow&&follow.gid;this.__iconimg.src=du.transUri(user.icon)||"/res/default/icon.png";this.__name.title="查看聊天";this.__iconimg.title="查看聊天";var addTime=data.addTime.toString().length==10?data.addTime*1e3:data.addTime;var nowTime=new Date;var timeM=u._$format(addTime,"yyyy-MM");var nowM=u._$format(nowTime,"yyyy-MM");var timeD=parseInt(u._$format(addTime,"d"));var nowD=parseInt(u._$format(nowTime,"d"));if(timeM==nowM&&timeD==nowD){this.__time.innerText="今天 "+u._$format(addTime,"H:mm")}else if(timeM==nowM&&nowD-timeD==1){this.__time.innerText="昨天 "+u._$format(addTime,"H:mm")}else{this.__time.innerText=u._$format(addTime,"M月d日 H:mm")}this.__name.innerText=user.nick;var contentText=messageContent.content;if(type==4){this.__cnt.innerText=contentText?"地理位置："+contentText:""}else if(type==0&&contentText!=undefined){this.__cnt.innerHTML=du.toEmot(contentText)||"";if(this.isSearch){du.highlight(this.__cnt,du.removeTag(window.requestWord))}}else{var mediaData={msgId:data.id,type:type,icon:msgContent?msgContent.photo:"",nick:msgContent?msgContent.name:"",uri:messageContent.uri||contentInfo&&contentInfo.uri,duration:messageContent.duration||contentInfo&&contentInfo.duration||0,fileName:messageContent.fileName||contentInfo&&contentInfo.fileName,title:contentInfo&&contentInfo.title,subtitle:contentInfo&&contentInfo.subtitle,url:contentInfo&&contentInfo.url};this.__media=dw._$$Media._$allocate({parent:this.__cnt,data:mediaData})}if(this.isSingle){this.__reply.style.display="none";e._$delClassName(this.__replyform,"reply-show");this.__textarea.value=""}if(!isSelf){e._$delClassName(this.__body,"self");this.__tip.style.display="";this.__oprate.style.display="";u._$forEach(this.__links,function(item,index,that){item.href="/message/chat?contactId="+user.id});this.__iname.innerText=user.nick;this.__remark.innerText=follow&&follow.remark!=undefined?follow.remark!=""?"（"+follow.remark+"）":"":"";this.__iremark.innerText=follow&&follow.remark!=undefined&&follow.remark!=""?follow.remark:"[添加备注]";this.__iarea.innerText=user.city||"";this.__isig.innerText=user.signature||"";if(data.star!=1){e._$delClassName(this.__star,"u-icn-star");e._$addClassName(this.__star,"u-icn-star2")}else{e._$delClassName(this.__star,"u-icn-star2");e._$addClassName(this.__star,"u-icn-star")}this.__igroup.options.length=0;if(gid==undefined||gid==-1){this.__contact.style.display="none"}else{this.__contact.style.display="";u._$forEach(groups,function(group,index,that){var newOption=new Option(group.gname,group.gid);if(gid&&gid==group.gid){newOption.selected=true}this.__igroup.options.add(newOption)}._$bind(this))}if(type==1||type==2||type==3){this.__save.style.display="";this.__download.style.display=""}else{this.__save.style.display="none";this.__download.style.display="none"}}else{this.__tip.style.display="none";this.__oprate.style.display="none";e._$addClassName(this.__body,"self")}};proto.__restoreUI=function(){if(this.__media){this.__media._$recycle();delete this.__media}this.__cnt.innerHTML="";this.__remark.innerText=""};proto.__destroy=function(){this.__supDestroy();this.__restoreUI()}})();
(function(){var using=NEJ.P,o=NEJ.O,e=using("nej.e"),v=using("nej.v"),i=using("nej.ui"),t=using("nej.ut"),j=using("nej.j"),du=using("dd.util"),dw=using("dd.widget"),di=using("dd.ui"),$=using("nej.$"),validator=du.validator,proto;dw._$$SMSSender=NEJ.C();proto=dw._$$SMSSender._$extend(i._$$Abstract);proto.__initXGui=function(){this.__seed_html="ntp-sendsms"};proto.__initNode=function(){this.__supInitNode();$(this.__body)._$on({"click .resend,.sendSms":this.__sendSms._$bind(this)})};proto.__reset=function(options){this.phone=e._$one(options.phone);this.interval=options.interval||50;this.__supReset(options)};proto.__sendSms=function(ev){if($(ev.target)._$hasClassName("z-disabled"))return;var mobile=this.phone.value.trim();if(!validator["mobile"](mobile)){du.showError("请先填写正确的手机号码");this.phone.focus()}else{j._$requestByREST("/rest/sms",{method:"POST",type:"json",data:{mobile:mobile},onload:this.__cbSendSms._$bind(this)})}};proto.__cbSendSms=function(json){if(json&&json.code===200){this.__disabledResend(true);$(this.__body)._$delClassName("z-actived");this.$(".smsipt")[0].focus();this.second=this.interval;this.timer=window.setInterval(this.__countDown._$bind(this),1e3)}else{du.showError(json.message||"发送失败，请稍后再试！")}};proto.$=function(selector){return $(selector,this.__body)};proto.__countDown=function(){if(this.second<=0){window.clearInterval(this.timer);this.timer=undefined;this.__disabledResend(false)}else{this.$(".second")._$text(--this.second)}};proto.__disabledResend=function(flag){if(flag){this.$(".resend")._$addClassName("z-disabled")}else{this.$(".resend")._$delClassName("z-disabled")}};proto.__destroy=function(){}})();
(function(){var using=NEJ.P;var o=NEJ.O;var u=using("nej.u");var j=using("nej.j");var t=using("nej.ut");var v=using("nej.v");var dd=using("dd.data");var du=using("dd.util");var proto;if(window.globals){var fid=window.globals.feed.id}dd._$$CommentCache=NEJ.C();proto=dd._$$CommentCache._$extend(dd._$$Cache);proto._$add=function(data){j._$requestByREST("/rest/feeds/"+fid+"/comments",{method:"POST",type:"json",data:data,onload:this._$dispatchEvent._$bind(this,"add")})};proto._$delete=function(id){j._$requestByREST("/rest/feeds/"+fid+"/comments/"+id,{method:"DELETE",type:"json",onload:this._$dispatchEvent._$bind(this,"delete")})};proto.__doLoadList=function(options){var key=options.key;var callback=options.onload;var data=options.data;var list=this._$getListInCache(key);var last=list[list.length-1];if(last){data.createTime=last.createTime;data.id=last.id}delete data.offset;j._$requestByREST("/rest/feeds/"+fid+"/comments",{method:"GET",type:"json",data:data,onload:this.__cbLoadList._$bind(this,key,callback)})};proto.__doDeleteItem=function(options){var callback=options.onload;var data=options.data;if(data.ban){callback(true)}else{this._$addEvent("delete",this.__cbDeleteItem._$bind(this,callback));this._$delete(data.id)}};proto.__doAddItem=function(options){var callback=options.onload;var data=options.data;delete data.cid;this._$addEvent("add",this.__cbAddItem._$bind(this,callback,data.cid));this._$add(data)};proto.__cbAddItem=function(callback,cid,json){var data=json&&json.result;if(json.code==200&&u._$isFunction(callback)&&u._$isObject(data)&&data.comment){callback(data.comment);if(cid){this._$dispatchEvent("addItem",cid)}}else{this._$dispatchEvent("addFail",json.message)}};proto.__cbLoadList=function(key,callback,json){var result=json&&json.result;if(result&&json.code==200){callback(result)}else{du.showError(json.message?json.message:"评论列表加载错误");callback(result)}}})();
(function(){var p=NEJ.P("nej.u");var __b64tab="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",__b64char={},__b64index={};for(var i=0,l=__b64tab.length,c;i<l;i++){c=__b64tab.charAt(i);__b64char[i]=c;__b64index[c]=i}var __bin2utf8=function(_binarray){var _index=0,c,_result=[];while(_index<_binarray.length){c=_binarray[_index];if(c<128){_result.push(String.fromCharCode(c));_index++}else if(c>191&&c<224){_result.push(String.fromCharCode((c&31)<<6|_binarray[_index+1]&63));_index+=2}else{_result.push(String.fromCharCode((c&15)<<12|(_binarray[_index+1]&63)<<6|_binarray[_index+2]&63));_index+=3}}return _result.join("")};var __utf82bin=function(){var _line=/\r\n/g;return function(_data){_data=_data.replace(_line,"\n");var _result=[],_test=String.fromCharCode(237);if(_test.charCodeAt(0)<0)for(var i=0,l=_data.length,c;i<l;i++){c=_data.charCodeAt(i);c>0?_result.push(c):_result.push(256+c>>6|192,256+c&63|128)}else for(var i=0,l=_data.length,c;i<l;i++){c=_data.charCodeAt(i);if(c<128)_result.push(c);else if(c>127&&c<2048)_result.push(c>>6|192,c&63|128);else _result.push(c>>12|224,c>>6&63|128,c&63|128)}return _result}}();var __bin2b64=function(_binarray){var _index=0,_result=[],_mode=_binarray.length%3;if(_mode==1)_binarray.push(0,0);if(_mode==2)_binarray.push(0);while(_index<_binarray.length){_result.push(__b64char[_binarray[_index]>>2],__b64char[(_binarray[_index]&3)<<4|_binarray[_index+1]>>4],__b64char[(_binarray[_index+1]&15)<<2|_binarray[_index+2]>>6],__b64char[_binarray[_index+2]&63]);_index+=3}if(_mode==1)_result[_result.length-1]=_result[_result.length-2]="=";if(_mode==2)_result[_result.length-1]="=";return _result.join("")};var __b642bin=function(){var _clear=/\n|\r|=/g;return function(_data){var _index=0,_result=[];_data=_data.replace(_clear,"");for(var i=0,l=_data.length;i<l;i+=4)_result.push(__b64index[_data.charAt(i)]<<2|__b64index[_data.charAt(i+1)]>>4,(__b64index[_data.charAt(i+1)]&15)<<4|__b64index[_data.charAt(i+2)]>>2,(__b64index[_data.charAt(i+2)]&3)<<6|__b64index[_data.charAt(i+3)]);var _length=_result.length,_mode=_data.length%4;if(_mode==2)_result=_result.slice(0,_length-2);if(_mode==3)_result=_result.slice(0,_length-1);return _result}}();p._$b642str=function(_data){return __bin2utf8(__b642bin(_data))};p._$str2b64=function(_data){try{return window.btoa(_data)}catch(ex){return __bin2b64(__utf82bin(_data))}}})();
(function(){var using=NEJ.P;var v=using("nej.v");var e=using("nej.e");var i=using("nej.ui");var j=using("nej.j");var u=using("nej.u");var di=using("dd.ui");var du=using("dd.util");var $=du.$;var dw=using("dd.widget");var proto;di._$$CommentItem=NEJ.C();proto=di._$$CommentItem._$extend(i._$$ListItem);proto.__init=function(){this.__supInit();var $body=this.$body=du.$(this.__body);var self=this;$body._$on({"click .j-reply":function(){$body._$find(".rparea")._$addClassName("show")._$find("textarea")[0].focus()},"click .j-fold":function(){$body._$find(".rparea")._$delClassName("show")},"click .j-del":this.__onDelete._$bind(this)})};proto.__reset=function(options){this.__supReset(options)};proto.__doRefresh=function(data){this.constructor._$supro.__doRefresh.apply(this,arguments);this.id=data.id;var node=e._$getHtmlTemplate("jst-comment",{comment:data},{transUri:du.transUri,transTime:du.transTime,fromNow:du.fromNow,b642str:u._$b642str,toEmot:du.toEmot,toEmot2:du.toEmot._$bind2(null,true)});this.__body.innerHTML=node};proto.__destroy=function(){this.__supDestroy()}})()